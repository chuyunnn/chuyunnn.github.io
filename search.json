[{"title":"AOPå®šä¹‰å’Œé…ç½®","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/AOP%E5%AE%9A%E4%B9%89%E5%92%8C%E9%85%8D%E7%BD%AE/","content":"æ¦‚å¿µå®šä¹‰AOPï¼ˆAspect Orient Programmingï¼‰é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œåˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ã€‚è¿™ç§æ¨ªå‘åˆ‡é¢çš„æ–¹å¼å¯ä»¥æ³¨å…¥**å’Œä¸»ä¸šåŠ¡æ— å…³çš„åŠŸèƒ½ï¼Œæ¯”å¦‚äº‹åŠ¡ç®¡ç†å’Œæ—¥å¿—ç®¡ç†**\nâ€‹\t&#x3D;&#x3D;&gt; å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸ä¿®æ”¹æºç çš„åŒæ—¶ï¼Œä¸ºä¸šåŠ¡ç»„ä»¶æ·»åŠ é€šç”¨åŠŸèƒ½ï¼ˆè®©AOPå»ä¿®æ”¹æºç ï¼‰\næœ¬è´¨ï¼šå¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œåœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åˆ›å»ºæˆ–è€…åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œçš„æƒ…å†µæäº¤æˆ–è€…å›æ»š\næ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-oriented Programmingï¼ŒOOPï¼‰çš„è¡¥å……ã€‚OOPçš„æ ¸å¿ƒå•å…ƒæ˜¯ç±»ï¼ŒAOPçš„æ ¸å¿ƒå•å…ƒæ˜¯åˆ‡é¢ã€‚\n\nspringæ”¯æŒçš„ä¸¤ç§äº‹åŠ¡ï¼š\n\nç¼–ç¨‹å¼äº‹åŠ¡ï¼šæŠŠäº‹åŠ¡ç®¡ç†ä»£ç åµŒå…¥ä¸šåŠ¡ä»£ç ä¸­ï¼Œä¸€èˆ¬ç”¨TransactionTempleteæ¯”è¾ƒå¤š\nå£°æ˜å¼äº‹åŠ¡ï¼šç”¨AOPç®¡ç†äº‹åŠ¡\n\n\nå®ç°æ–¹å¼ä¸¤ç§å®ç°æ–¹å¼ï¼š\n\nAspectJ é™æ€ AOP å®ç°ï¼Œ AOP æ¡†æ¶åœ¨**ç¼–è¯‘é˜¶æ®µ**å¯¹ç¨‹åºæºä»£ç è¿›è¡Œä¿®æ”¹ï¼Œç”Ÿæˆäº†é™æ€çš„ AOPä»£ç†ç±»(ç”Ÿæˆçš„ *.class æ–‡ä»¶å·²ç»è¢«æ”¹æ‰äº†ï¼Œéœ€è¦ä½¿ç”¨ç‰¹å®šçš„ç¼–è¯‘å™¨)\nåŠ¨æ€ AOP å®ç°ï¼Œ AOP æ¡†æ¶åœ¨**è¿è¡Œé˜¶æ®µ**å¯¹åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ï¼ˆåœ¨å†…å­˜ä¸­åŠ¨æ€ç”Ÿæˆ AOP ä»£ç†ç±»ï¼‰ï¼Œå¦‚ SpringAOP\n\nAOPåŠ¨æ€ä»£ç†çš„ä¸¤ç§æ–¹å¼ï¼š\n\nJDKåŠ¨æ€ä»£ç†ï¼šï¼ˆé»˜è®¤ä½¿ç”¨ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼‰ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œåªèƒ½å¯¹å®ç°äº†æ¥å£çš„ç±»ç”Ÿæˆä»£ç†å¯¹è±¡\nCGLIBä»£ç†ï¼šé€‚ç”¨äºæ²¡æœ‰æ¥å£çš„ç±»ï¼ˆåŸºäºç»§æ‰¿ï¼‰ï¼Œä¾èµ–äºSpringå†…ç½®çš„CGLIBï¼Œä¸èƒ½å¯¹finalç±»oræ–¹æ³•ç”Ÿæˆä»£ç†\n\näº”å¤§æ¦‚å¿µï¼š\nJoinPointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šå“ªé‡Œå¯ä»¥è®¾ç½®â€œå®‰æ£€â€ï¼Œå°±æ˜¯ç¨‹åºè¿è¡Œä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•\nPointcutï¼ˆåˆ‡ç‚¹ï¼‰ï¼šå“ªé‡ŒçœŸçš„è®¾ç½®äº†â€œå®‰æ£€â€ã€‚ä¹Ÿå°±æ˜¯é€šçŸ¥åŠŸèƒ½è¢«åº”ç”¨çš„èŒƒå›´ï¼Œæ¯”å¦‚æ—¥å¿—åˆ‡é¢çš„åº”ç”¨èŒƒå›´æ˜¯æ‰€æœ‰controllerçš„æ¥å£ï¼ˆåªç»™controllerå±‚çš„ä»£ç åŠ æ—¥å¿—ï¼‰ï¼Œä¸€èˆ¬ç”¨@Pointcutæ¥å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼\nAdviceï¼ˆé€šçŸ¥ï¼‰ï¼šâ€œå®‰æ£€â€å…·ä½“åšä»€ä¹ˆï¼ˆä»€ä¹ˆæ—¶å€™åšã€å†…å®¹æ˜¯ä»€ä¹ˆï¼‰ã€‚ä¹Ÿå°±æ˜¯åˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å„ä¸ªå…·ä½“å·¥ä½œï¼Œæ¯”å¦‚æ—¥å¿—åˆ‡é¢éœ€è¦è®°å½•æ¥å£è°ƒç”¨å‰åçš„æ—¶é•¿ï¼Œå°±éœ€è¦åœ¨è°ƒç”¨æ¥å£å‰åè®°å½•æ—¶é—´ï¼Œå†è®¡ç®—å·®å€¼ã€‚\n\nâ€‹\täº”ç§é€šçŸ¥æ–¹å¼ï¼š\nâ€‹\t\t@Beforeï¼šåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰\nâ€‹\t\t@Afterï¼šåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å\nâ€‹\t\t@AfterReturningï¼šç›®æ ‡æ–¹æ³•è¿”å›å\nâ€‹\t\t@AfterThrowingï¼šç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸å\nâ€‹\t\t@Aroundï¼šæ•´ä¸ªç›®æ ‡æ–¹æ³•åŒ…è£¹èµ·æ¥ï¼Œåœ¨è¢«è°ƒç”¨å‰å’Œè°ƒç”¨ä¹‹ååˆ†åˆ«æ‰§è¡Œé€šçŸ¥æ–¹æ³•\n\nAspectï¼ˆåˆ‡é¢ï¼‰ï¼šå®‰æ£€ç³»ç»Ÿã€‚åˆ‡ç‚¹+é€šçŸ¥ï¼Œé€šå¸¸ä½¿ç”¨@Aspectæ¥å®šä¹‰\nProxyï¼ˆä»£ç†å¯¹è±¡ï¼‰ï¼šå®‰æ£€é—¨ï¼Œéœ€è¦é€šè¿‡è¿™ä¸ªé€»è¾‘ã€‚AOPçš„åº•å±‚å®ç°ï¼Œå°±æ˜¯JDKåŠ¨æ€ä»£ç†orCGLIBä»£ç†\n\nSpring å®¹å™¨æ‰«æåˆ‡é¢ï¼ˆ@Aspectï¼‰&#x3D;&#x3D;&gt; åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆJDK&#x2F;CGLIBï¼‰&#x3D;&#x3D;&gt; å®¢æˆ·ç«¯è°ƒç”¨æ–¹æ³• â†’ ä»£ç†å…ˆæ‰§è¡Œ Advice â†’ è°ƒç”¨ç›®æ ‡æ–¹æ³• â†’ æ‰§è¡Œåç½® Advice &#x3D;&#x3D;&gt; è¿”å›ç»“æœç»™å®¢æˆ·ç«¯\nå®æ“ï¼šä½¿ç”¨AOPè®°å½•æ¥å£è®¿é—®æ—¥å¿—å®ä¾‹æ”¾åœ¨xx-coreæ¨¡å—ä¸‹çš„mdcåŒ…ä¸‹\nå®šä¹‰äº†äº”ä¸ªç±»ï¼šMdcAspectã€MdcDotã€MdcUtilã€SelfTraceldGeneratorã€SkyWalkingTraceldGenerator\n1. SkyWalkingTraceldGeneratorç±»ä»SkyWalkingä¸­æ‹·è´ï¼Œæ˜¯ä¸€ç§ç”ŸæˆtraceIdçš„æ–¹å¼\nè¿™é‡ŒSkyWalkingï¼šå¼€æºçš„åº”ç”¨æ€§èƒ½ç›‘æ§ç³»ç»Ÿï¼Œæ”¯æŒå¯¹**åˆ†å¸ƒå¼ç³»ç»Ÿ**ä¸­çš„æœåŠ¡è¿›è¡Œè¿½è¸ªã€ç›‘æ§ã€è¯Šæ–­\nâ€‹\tå®˜ç½‘ï¼šhttps://skywalking.apache.org/\nä¸»è¦æ–¹æ³•ä¸ºé™æ€çš„generateæ–¹æ³•ï¼Œç”¨æ¥ç”Ÿäº§traceidï¼Œå®ƒåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\nåº”ç”¨å®ä¾‹IDï¼ˆUUIDï¼‰ï¼šåŒºåˆ†ä¸åŒæœåŠ¡å™¨èŠ‚ç‚¹ã€‚å³ä½¿ä¸¤å°æœºå™¨åœ¨åŒä¸€æ¯«ç§’ç”ŸæˆIDï¼Œæœºå™¨IDä¹Ÿå¯ä»¥æŠŠä»–ä»¬åŒºåˆ†å¼€\nå½“å‰çº¿ç¨‹çš„IDï¼šåŒºåˆ†åŒä¸€å°æœºå™¨ä¸Šå¹¶å‘æ‰§è¡Œçš„ä¸åŒè¯·æ±‚\nç”±æ—¶é—´æˆ³ï¼ˆæ¯«ç§’çº§ï¼‰å’Œçº¿ç¨‹åºåˆ—å·ï¼ˆ0-9999ä¹‹é—´çš„æ•°ï¼‰ç»„æˆçš„æ•°å­—ï¼šç¡®ä¿åŒä¸€ä¸ªçº¿ç¨‹åœ¨æçŸ­æ—¶é—´å†…è¿ç»­ç”Ÿæˆ ID ä¹Ÿä¸é‡å¤\n\nä½¿ç”¨è¿™ä¸ªå·¥å…·ç±»å¯ä»¥ç”Ÿäº§ä¸€ä¸ªæ—¢å”¯ä¸€ç”±åŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯çš„traceidï¼Œå¯ä»¥æ›´å¥½çš„è¿½è¸ªå’Œç†è§£**åˆ†å¸ƒå¼ç³»ç»Ÿ**ä¸­çš„è¯·æ±‚æ‰§è¡Œè·¯å¾„\n\nğŸ’¡ å¼•å…¥traceid &#x3D;&#x3D; ä¸ºåˆ†å¸ƒå¼åœºæ™¯åšå‡†å¤‡orå·²ç»è¿è¡Œåœ¨**åˆ†å¸ƒå¼åœºæ™¯**ä¸­\nâ€‹\tåœ¨ä¼ ç»Ÿçš„å•æœºé¡¹ç›®ä¸­ï¼Œå¦‚æœè¦æŸ¥æ—¥å¿—ï¼Œåªéœ€è¦æ ¹æ®æ—¥å¿—æ–‡ä»¶æŒ‰æ—¶é—´é¡ºåºæŸ¥æ‰¾å°±è¡Œäº†ã€‚ä½†åˆ°äº†åˆ†å¸ƒå¼ç¯å¢ƒï¼Œæƒ…å†µå˜å¾—å¤æ‚ï¼š\n\nè¯·æ±‚è·¨è¿›ç¨‹ï¼šä¸€ä¸ªè¯·æ±‚å¯èƒ½ä»vueå‰ç«¯åˆ°ç½‘å…³ï¼Œå†åˆ°ç”¨æˆ·æœåŠ¡ï¼Œå†åˆ°æ•°æ®åº“\næ—¥å¿—åˆ†æ•£ï¼šè¿™äº›æœåŠ¡çš„æ—¥å¿—åˆ†æ•£åœ¨ä¸åŒçš„æœåŠ¡å™¨æˆ–å®¹å™¨ä¸Šã€‚\nå¹¶å‘å¹²æ‰°ï¼šæˆåƒä¸Šä¸‡ä¸ªè¯·æ±‚åŒæ—¶å‘ç”Ÿï¼Œæ—¥å¿—äº¤ç»‡åœ¨ä¸€èµ·\n\nâ€‹\tTraceIDå°±åƒç»™æ¯ä¸ªè¯·æ±‚è´´ä¸Šäº†ä¸€ä¸ªå”¯ä¸€çš„â€œèº«ä»½è¯å·â€ã€‚æ— è®ºè¿™ä¸ªè¯·æ±‚è·¨è¶Šå¤šå°‘å°æœåŠ¡å™¨ï¼Œåªè¦æ‹¿ç€è¿™ä¸ª ID å»æ—¥å¿—ç³»ç»Ÿï¼ˆå¦‚ ELK æˆ– SkyWalkingï¼‰é‡Œä¸€æœï¼Œå°±èƒ½æŠŠåˆ†æ•£åœ¨å„å¤„çš„æ—¥å¿—ä¸²æˆä¸€æ¡å®Œæ•´çš„çº¿\nâ€‹\tå¾®æœåŠ¡æ¶æ„ &#x3D;&#x3D;&gt; traceidæ˜¯å¿…é€‰çš„ï¼Œè¦ä¸å½“ç”Ÿäº§ç¯å¢ƒæŠ¥é”™çš„æ—¶å€™ï¼Œæ— æ³•ç¡®å®šAæœåŠ¡çš„æŠ¥é”™æ˜¯ç”±BæœåŠ¡çš„å“ªä¸ªè¯·æ±‚å¼•èµ·çš„\nğŸ’¡ ä½†æ˜¯ä½ çš„å•æœºé¡¹ç›®å¦‚æœå¼€å¯äº†å¼‚æ­¥çº¿ç¨‹ï¼ˆæ¯”å¦‚AOPè®°å½•æ—¥å¿—ï¼‰æ™®é€šå•æ—¥å¿—å°±æ–­äº†ï¼Œtraceidå¯ä»¥è®©ä½ çŸ¥é“**è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æ˜¯å“ªä¸ªè¯·æ±‚è§¦å‘çš„**\n\nTraceID é€šå¸¸æ˜¯è¿™æ ·è¢«â€œæ•´åˆâ€è¿›å»çš„ï¼š\n\nåˆ‡é¢æ‹¦æˆªï¼šåˆ©ç”¨ Spring AOPï¼Œåœ¨æ¯ä¸ª Controller è¯·æ±‚è¿›æ¥æ—¶ï¼Œè°ƒç”¨ SkyWalkingTraceIdGenerator.generate() ç”Ÿæˆä¸€ä¸ª IDã€‚\nä¸Šä¸‹æ–‡ä¼ é€’ï¼šå°†è¿™ä¸ª ID å­˜å…¥ **MDCï¼ˆæ—¥å¿—è¯Šæ–­ä¸Šä¸‹æ–‡ï¼‰**ã€‚è¿™æ ·ä½ åœ¨æ—¥å¿—é…ç½®ï¼ˆlogback.xmlï¼‰é‡Œåªéœ€è¦å†™ä¸€ä¸ª %X&#123;traceId&#125;ï¼Œæ‰€æœ‰çš„ log.info å°±ä¼šè‡ªåŠ¨å¸¦ä¸Š IDã€‚\nKnife4j å±•ç¤ºï¼šåœ¨ Knife4j æµ‹è¯•æ¥å£æ—¶ï¼Œè¿”å›ç»“æœé‡Œå¸¦ä¸Šè¿™ä¸ª TraceIDã€‚å‰ç«¯å¦‚æœæŠ¥é”™ï¼Œç›´æ¥æŠŠ ID æˆªå›¾ç»™ä½ ï¼Œä½ åæ‰‹åœ¨æ—¥å¿—é‡Œä¸€æœï¼Œç§’å®šä»£ç ä½ç½®ã€‚\n\n\n2. SelfTraceldGeneratorç±»è‡ªå®šä¹‰traceidç”Ÿæˆå™¨\npublic static String generate() &#123;        StringBuilder traceId = new StringBuilder();        try &#123;            // 1. IP - 8ï¼šå–å¾—å½“å‰æœºå™¨çš„IPåœ°å€ï¼Œè½¬æ¢ä¸º16è¿›åˆ¶å½¢å¼            traceId.append(convertIp(IpUtil.getLocalIp4Address())).append(&quot;.&quot;);            // 2. æ—¶é—´æˆ³ - 13ï¼šä½¿ç”¨java 8 çš„instantç±»è·å–å½“å‰çš„æ¯«ç§’çº§æ—¶é—´æˆ³            traceId.append(Instant.now().toEpochMilli()).append(&quot;.&quot;);            // 3. å½“å‰è¿›ç¨‹å· - 5ï¼šä½¿ç”¨javaçš„ManagementFactoryç±»è·å–å½“å‰JVMè¿›ç¨‹çš„PIDï¼Œæ€»é•¿åº¦ä¸º5ä½            traceId.append(getProcessId());            // 4. è‡ªå¢åºåˆ— - 4ï¼šåœ¨1000-9999ä¹‹é—´å¾ªç¯è‡ªå¢çš„æ•°            traceId.append(getAutoIncreaseNumber());        &#125; catch (Exception e) &#123;            log.error(&quot;generate trace id error!&quot;, e);            return UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;);        &#125;        return traceId.toString();    &#125;\n\n3. MdcUtilå·¥å…·ç®±ï¼Œå°è£…äº†MDCæ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥traceidï¼‰\n4. MdcDotä¸€ä¸ªè‡ªå®šä¹‰javaæ³¨è§£ï¼Œç”¨æ¥æ ‡è®°å“ªäº›æ–¹æ³•æˆ–ç±»éœ€è¦è¢«â€œåˆ‡å…¥â€æ—¥å¿—é€»è¾‘ &#x3D;&#x3D;&gt; ç”¨äºå®šä¹‰åˆ‡ç‚¹\n@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface MdcDot &#123;    String bizCode() default &quot;&quot;;&#125;\n\n5. MdcAspectçœŸæ­£çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£æ‹¦æˆªè¯·æ±‚ã€è§£æä¸šåŠ¡ç¼–ç ã€è®°å½•è€—æ—¶ &#x3D;&#x3D;&gt; çœŸæ­£çš„åˆ‡é¢\n\nåˆ‡ç‚¹\n\n@Pointcut(&quot;@annotation(MdcDot) || @within(MdcDot)&quot;)\n\nè¿™è¡Œä»£ç å®šä¹‰äº†èŒƒå›´ï¼šåªè¦æ–¹æ³•ä¸ŠæŒ‚äº† @MdcDot æ³¨è§£ï¼Œæˆ–è€…æ•´ä¸ªç±»ä¸ŠæŒ‚äº† @MdcDotï¼ˆ@withinï¼‰ï¼Œå°±æ˜¯ç›®æ ‡\n\nè¿æ¥ç‚¹\n\n@Around(&quot;getLogAnnotation()&quot;)public Object handle(ProceedingJoinPoint joinPoint) throws Throwable &#123;    // ...&#125;\n\nè¿™é‡Œçš„joinPointå°±æ˜¯è¿æ¥ç‚¹ï¼Œå®ƒä»£è¡¨äº†å½“å‰æ­£åœ¨è¢«è°ƒç”¨çš„é‚£ä¸ªæ–¹æ³•ï¼ˆæ¯”å¦‚Controlleræ¥å£ï¼‰ã€‚é€šè¿‡å®ƒå¯ä»¥æ‹¿åˆ°æ–¹æ³•åã€å‚æ•°ç­‰\n\né€šçŸ¥\n\nç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ˜¯@Aroundï¼ˆç¯ç»•é€šçŸ¥ï¼‰ï¼Œå®ƒæ˜¯æœ€å¼ºçš„é€šçŸ¥ï¼Œå› ä¸ºå®ƒåŒ…è£¹äº†æ•´ä¸ªæ–¹æ³•ï¼š\n\næ–¹æ³•æ‰§è¡Œå‰ï¼šè°ƒç”¨ addMdcCode å¾€æ—¥å¿—ä¸Šä¸‹æ–‡é‡Œå¡å…¥ bizCodeï¼ˆä¸šåŠ¡ç¼–ç ï¼‰ã€‚\n\næ–¹æ³•æ‰§è¡Œä¸­ï¼šjoinPoint.proceed() è®©åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘è¿è¡Œã€‚\n\næ–¹æ³•æ‰§è¡Œåï¼šåœ¨ finally å—é‡Œè®¡ç®—è€—æ—¶å¹¶æ‰“å°æ—¥å¿—ï¼Œæœ€åé‡ç½® MDCã€‚\n\n\n\nProxyä»£ç†å¯¹è±¡\nå¯åŠ¨ Spring é¡¹ç›®å¹¶åœ¨ Service ä¸ŠåŠ äº† @MdcDot æ—¶ï¼ŒSpring ä¼šåœ¨å†…å­˜ä¸­ä¸ºè¿™ä¸ªç±»ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ä½ è°ƒç”¨çš„å…¶å®æ˜¯ä»£ç†å¯¹è±¡ï¼Œå®ƒå…ˆè·‘ MdcAspect çš„é€»è¾‘ï¼Œå†å»è°ƒä½ çš„åŸä»£ç ã€‚\n\n\næ€»ç»“è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒæŠ€æœ¯ç‚¹æœ‰ä¸¤ä¸ªï¼š\nA. MDC (Mapped Diagnostic Context)ï¼šæ—¥å¿—æ¡†æ¶ï¼ˆLogback&#x2F;Log4jï¼‰æä¾›çš„ä¸€ä¸ªçº¿ç¨‹ç»‘å®šçš„æ˜ å°„è¡¨ã€‚\nâ€‹\tåœ¨springbootè¿™ç§å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªHTTPè¯·æ±‚éƒ½ä¼šè¢«åˆ†é…ç»™ä¸€ä¸ªç‹¬ç«‹çš„**çº¿ç¨‹å¤„ç†ã€‚MDCå†…éƒ¨å°è£…äº†ThreadLocal**&lt;Map&lt;String, String&gt;&gt;ã€‚è€ŒThreadLocalå­˜çš„æ•°æ®æ˜¯ç»‘å®šåœ¨å½“å‰çº¿ç¨‹ä¸Šçš„ &#x3D;&#x3D;&gt; æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„MDCï¼‰\nâ€‹\tæ—¥å¿—æ¡†æ¶æ¯”å¦‚Logbackåœ¨æ‰“å°æ¯ä¸€è¡Œæ—¥å¿—ä¹‹å‰éƒ½ä¼šå†™ä¸€æ®µè¿™æ ·çš„é€»è¾‘ï¼š\nâ€‹\t\tâ€œè®©æˆ‘çœ‹çœ‹å½“å‰è¿è¡Œæˆ‘çš„çº¿ç¨‹æ˜¯è°ï¼Ÿå™¢ï¼Œæ˜¯çº¿ç¨‹ Aã€‚çº¿ç¨‹ A çš„ MDC ç¬”è®°æœ¬é‡Œå­˜äº†ä»€ä¹ˆï¼Ÿå­˜äº† traceId&#x3D;ABCã€‚å¥½ï¼Œæˆ‘æ‰“å°çš„æ—¶å€™æŠŠå®ƒåŠ ä¸Šã€‚â€\n\nä½œç”¨ï¼šè®©ä¸åŒçº¿ç¨‹ï¼ˆä¸åŒè¯·æ±‚ï¼‰çš„æ—¥å¿—å¸¦ä¸Šå±äºè‡ªå·±çš„æ ‡è¯†ï¼ˆTraceId æˆ– ä¸šåŠ¡ä»£ç ï¼‰ã€‚\n&#x3D;&#x3D;&gt; å¯ä»¥é€šè¿‡ grep â€œTraceIdâ€ æŠŠè¯·æ±‚å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ‰¾å‡ºæ¥\n\n\n\nB. Spel è¡¨è¾¾å¼è§£æ (loadBizCode æ–¹æ³•)\nä½¿ç”¨äº† Spring Expression Language (Spel)\n\næ•ˆæœï¼šä½ åœ¨æ³¨è§£é‡Œå†™ @MdcDot(bizCode = &quot;#user.id&quot;)ï¼Œåˆ‡é¢ä¼šåŠ¨æ€åœ°ä»æ–¹æ³•çš„å‚æ•°é‡Œæ‰¾åˆ°å« user çš„å¯¹è±¡ï¼Œå¹¶å–å‡ºå®ƒçš„ idã€‚è¿™è®©ä½ èƒ½åŠ¨æ€åœ°æŠŠä¸šåŠ¡æ•°æ®ï¼ˆå¦‚ç”¨æˆ·IDã€è®¢å•å·ï¼‰å¡è¿›æ—¥å¿—é‡Œã€‚\n\né…ç½®å¥½ä¹‹åï¼Œåœ¨ä¸šåŠ¡ä»£ç é‡Œé¢åªéœ€è¦æ‰“æ ‡ç­¾å°±è¡Œäº†ï¼š\n@RestControllerpublic class UserController &#123;    // åªè¦åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œè¿™ä¸ªæ¥å£çš„æ—¥å¿—å°±ä¼šå¸¦ä¸Š bizCodeï¼Œå¹¶è®°å½•è€—æ—¶    @MdcDot(bizCode = &quot;#userId&quot;)     @GetMapping(&quot;/info&quot;)    public String getInfo(String userId) &#123;        log.info(&quot;æ­£åœ¨æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯...&quot;); // è¿™è¡Œæ—¥å¿—ä¼šè‡ªåŠ¨å¸¦ä¸Š bizCode        return &quot;ok&quot;;    &#125;&#125;\n\né™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦é…ç½®æ—¥å¿—æ ¼å¼ï¼š åœ¨ logback.xml ä¸­ï¼Œä½ éœ€è¦åœ¨ pattern é‡ŒåŠ ä¸Š %X&#123;bizCode&#125; å’Œ %X&#123;traceId&#125;ï¼Œå¦åˆ™è¿™äº›ä¿¡æ¯åªåœ¨å†…å­˜é‡Œï¼Œä¸ä¼šæ‰“å°åˆ°æ§åˆ¶å°æˆ–æ–‡ä»¶ã€‚\nAOPå®ç°æ–¹å¼ï¼š Spring AOPï¼ˆåŸºäºä»£ç†çš„ AOPï¼‰ï¼Œå…·ä½“æ¥è¯´æ˜¯ï¼š\n\nå£°æ˜å¼ AOPï¼šé€šè¿‡æ³¨è§£å’Œé…ç½®æ¥å®ç°ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ä¸šåŠ¡é€»è¾‘\nè¿è¡Œæ—¶ç»‡å…¥ï¼šåœ¨ Spring å®¹å™¨å¯åŠ¨å¹¶åˆå§‹åŒ– Bean çš„æ—¶å€™ï¼ŒåŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["AOP"]},{"title":"APIé…ç½®","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/API%E9%85%8D%E7%BD%AE/","content":"è§£å†³è®©å‰ç«¯çŸ¥é“æ€ä¹ˆè°ƒï¼Œå¦‚ä½•å¿«é€Ÿæµ‹è¯•çš„é—®é¢˜\nRESTful webæµ‹è¯•æµ‹è¯•æ¥å£èƒ½ä¸èƒ½è·‘é€š\nRESTfulæ˜¯ä¸€ç§æµè¡Œçš„æ¥å£è®¾è®¡é£æ ¼ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰\næµ‹è¯•æ–¹æ³•ï¼šKnife4jçš„é¡µé¢è‡ªå¸¦â€œå‘é€è¯·æ±‚â€æŒ‰é’®ï¼Œä¸éœ€è¦postmanæˆ–è€…ç½‘é¡µï¼Œç›´æ¥åœ¨ç”Ÿæˆçš„æ–‡æ¡£é¡µé¢è¾“å…¥å‚æ•°ï¼Œç‚¹å‡»å‘é€å°±å¯ä»¥æŸ¥çœ‹åå°è¿”å›ç»“æœ\nSwaggerå®˜ç½‘ï¼šhttps://swagger.io/\næ ¸å¿ƒåè®®&#x2F;è§„èŒƒï¼Œæ˜¯APIç•Œçš„è¯´æ˜ä¹¦æ ‡å‡†\nä½œç”¨ï¼šè‡ªåŠ¨æ‰«æä»£ç ï¼Œæ¯”å¦‚springbooté‡Œçš„controllerã€‚æ ¹æ®ä»£ç ä¸­çš„æ³¨è§£ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰**æ¥å£åœ°å€ã€å‚æ•°è¦æ±‚ã€è¿”å›å€¼æ ¼å¼**çš„æ–‡ä»¶ &#x3D;&#x3D;&gt; å°†é¡¹ç›®ä¸­æƒ³è¦æš´éœ²çš„æ¥å£å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è°ƒç”¨å’Œæµ‹è¯•\nâ€‹\t@Api æˆ– @ ApiOperation\næ ¼å¼ï¼šJSON æˆ– YAMLæ ¼å¼\né—®é¢˜ï¼š\n\nåŸç”Ÿç•Œé¢Swagger-UIæ¯”è¾ƒè€\n\nå¸ƒå±€ä¸ç›´è§‚ï¼ˆæ¥å£å¤šçš„æ—¶å€™ï¼‰\n\næ²¡æœ‰æœç´¢åŠŸèƒ½\n\nè¯·æ±‚å‚æ•°ä¸ºJSONçš„æ—¶å€™æ²¡åŠæ³•æ ¼å¼åŒ–\n\nè¿”å›ç»“æ„æ— æ³•æŠ˜å \n\n\nKnife4jå®˜ç½‘ï¼šhttps://doc.xiaominfo.com/\nç äº‘åœ°å€ï¼šhttps://gitee.com/xiaoym/knife4j\nç¤ºä¾‹åœ°å€ï¼šhttps://gitee.com/xiaoym/swagger-bootstrap-ui-demo\né’ˆå¯¹javaç”Ÿæ€çš„Swaggerçš„å¢å¼ºç‰ˆ\n\nä½¿ç”¨Swaggerçš„é€»è¾‘æ¥è§£ææ¥å£ï¼Œé‡æ–°åšäº†ä¸€å¥—UIç•Œé¢\n\nä¼˜ç‚¹ï¼š\n\nåœ¨APIæ–‡æ¡£ä¸­ä½¿ç”¨Markdownè¯­æ³•ï¼Œå¯ä»¥ä½¿æ–‡æ¡£æ›´å…·å¯è¯»æ€§å’Œæ˜“äºç»´æŠ¤\n\nå°†APIæ–‡æ¡£å¯¼å‡ºä¸ºç¦»çº¿çš„HTMLã€PDFæˆ–Markdownæ–‡ä»¶ï¼Œæ–¹ä¾¿åˆ†äº«\n\næ”¯æŒåœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆæ¯”å¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸­ä½¿ç”¨ä¸åŒçš„ API æ–‡æ¡£é…ç½®\n\næ”¯æŒåŠ¨æ€å‚æ•°ï¼Œå…è®¸ç”¨æˆ·åœ¨è¿è¡Œæ—¶ä¿®æ”¹ APIè¯·æ±‚çš„å‚æ•°ï¼Œæé«˜æµ‹è¯•çš„çµæ´»æ€§\n\nç•Œé¢æ¸…æ™°ï¼šæ ‘å½¢èœå•+æ¥å£è¯¦æƒ…\n\næ”¯æŒæ¥å£å…¨å±€æœç´¢ã€å‚æ•°ç¼“å­˜ã€æ–¹ä¾¿çš„Debugè°ƒè¯•ç•Œé¢\n\n\né¡¹ç›®æ•´åˆå› ä¸ºKnife4jéµå¾ªSwagger çš„ä½¿ç”¨æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥æ— ç¼åˆ‡æ¢\n\næ·»åŠ ä¾èµ– pom.xml\n\n&lt;dependency&gt;  &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;  &lt;artifactId&gt;knife4j-openapi2-spring-boot-starter&lt;/artifactId&gt;  &lt;version&gt;$&#123;knife4j.version&#125;&lt;/version&gt;&lt;/dependency&gt;\n\n\nåˆ›å»ºjavaé…ç½®ç±»ï¼Œæ¯”å¦‚Knife4jConfig.javaï¼Œä½¿ç”¨@EnableKnife4jæ³¨è§£å¯ç”¨Knife4j\n\n/** * Swagger/OpenAPI é…ç½®ç±» * ä½œç”¨ï¼šè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œæ”¯æŒåœ¨çº¿è°ƒè¯•æ¥å£ */@Configuration  // æ ‡è®°è¯¥ç±»ä¸ºSpringé…ç½®ç±»ï¼ŒSpringå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¹¶è§£æå…¶ä¸­çš„@Beanæ–¹æ³•@EnableOpenApi   // å¯ç”¨OpenAPI 3.0æ”¯æŒï¼Œæ˜¯Swagger 3.xçš„æ–°æ³¨è§£ï¼Œæ›¿ä»£äº†Swagger 2.xçš„@EnableSwagger2public class SwaggerConfig &#123;    /**     * åˆ›å»ºDocketå®ä¾‹ï¼Œä½œä¸ºSwaggerçš„æ ¸å¿ƒé…ç½®å¯¹è±¡     * Docketæ˜¯Swaggerçš„ä¸»æ„å»ºå™¨ï¼Œç”¨æ¥é…ç½®æ–‡æ¡£ç”Ÿæˆçš„å„é¡¹å‚æ•°     */    @Bean  // å°†è¯¥æ–¹æ³•è¿”å›çš„Docketå¯¹è±¡æ³¨å†Œä¸ºSpring Bean    public Docket docket() &#123;        Docket docket = new Docket(DocumentationType.OAS_30)  // æŒ‡å®šä½¿ç”¨OpenAPI 3.0è§„èŒƒ                .apiInfo(apiInfo())  // ç”¨æ¥å®šä¹‰APIæ–‡æ¡£çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€æè¿°ã€ç‰ˆæœ¬ã€è”ç³»äººä¿¡æ¯ç­‰ï¼Œè¿™äº›ä¿¡æ¯ä¼šåœ¨ Swagger UI ä¸­å±•ç¤º                .enable(true)  // æ˜¯å¦å¯ç”¨Swaggerï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ä¸ºfalse                .select()  // å¼€å¯æ¥å£é€‰æ‹©å™¨ï¼šåˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ªAPIé€‰æ‹©æ„å»ºå™¨ï¼Œç”¨äºé…ç½®æ¥å£æ‰«æèŒƒå›´                // æŒ‡å®šè¦æ‰«æçš„controlleråŒ…è·¯å¾„ï¼ŒSwaggeråªä¼šç”Ÿæˆè¯¥åŒ…ä¸‹Controllerçš„æ¥å£æ–‡æ¡£                .apis(RequestHandlerSelectors.basePackage(&quot;www.xx.controller&quot;))                // é…ç½®è¦ç”Ÿæˆæ–‡æ¡£çš„è·¯å¾„è§„åˆ™ï¼ŒPathSelectors.any()è¡¨ç¤ºæ‰€æœ‰è·¯å¾„éƒ½ç”Ÿæˆ                .paths(PathSelectors.any())                .build();  // æ„å»ºDocketå®ä¾‹        return docket;    &#125;    /**     * æ„å»ºAPIæ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯     * è¿™äº›ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨Swagger UIçš„é¡¶éƒ¨     */    private ApiInfo apiInfo() &#123;        return new ApiInfoBuilder()                .title(&quot;xx&quot;)  // æ–‡æ¡£æ ‡é¢˜                .description(&quot;xx&quot;)  // é¡¹ç›®æè¿°                .contact(new Contact(                        &quot;xxx&quot;,  // è”ç³»äººå§“å                        &quot;https://xx.com&quot;,  // è”ç³»äººå®˜ç½‘                        &quot;www.xxx@xx.com&quot;  // è”ç³»äººé‚®ç®±ï¼ˆå›¾ç‰‡ä¸­æ˜¾ç¤ºä¸å®Œæ•´ï¼Œæ­¤å¤„ä¸ºç¤ºä¾‹ï¼‰                ))                .version(&quot;v1.0&quot;)  // æ¥å£ç‰ˆæœ¬å·                .build();  // æ„å»ºApiInfoå®ä¾‹    &#125;&#125;\n\næˆ–è€…åœ¨application.ymlæ–‡ä»¶ä¸­è®¾ç½®å±æ€§ï¼ˆç»“æœç›¸åŒï¼‰\nknife4j:  enable: true # è®¾ç½®ä¸ºtrueæ¥å¯ç”¨Knife4j  # åŒ…å«apiæ–‡æ¡£çš„åŸºæœ¬å…ƒæ•°æ®ä¿¡æ¯  openapi:    title: xx # æ–‡æ¡£æ ‡é¢˜    description: xx # é¡¹ç›®æè¿°ï¼Œè¯´æ˜æŠ€æœ¯æ ˆ    version: 1.0.0 # æ¥å£ç‰ˆæœ¬å·    concat: # é¡¹ç›®ç›¸å…³çš„è”ç³»ä¿¡æ¯ï¼ˆæ•°ç»„å½¢å¼ï¼Œå¯å¤šè¡Œï¼‰      - xx      - https://xx.com      - https://github.com/xx    license: Apache License 2.0 # é¡¹ç›®è®¸å¯è¯    license-url: https://github.com/xx # è®¸å¯è¯åœ°å€    email: xx@xx.com # è”ç³»é‚®ç®±  # å®šä¹‰æ¥å£åˆ†ç»„ï¼šadminå’Œfront  group:    # åå°ç®¡ç†æ¥å£åˆ†ç»„    admin:      group-name: åå°æ¥å£åˆ†ç»„ # åˆ†ç»„åç§°ï¼Œåœ¨æ–‡æ¡£é¡µé¢ä¸­æ˜¾ç¤º      api-rule: package # åˆ†ç»„è§„åˆ™ï¼šæŒ‰åŒ…è·¯å¾„æ‰«æï¼ˆpackageï¼‰      api-rule-resources: # æŒ‡å®šåŒ…åï¼ŒKnife4jå°†æ‰«ææ­¤åŒ…ä¸‹æ‰€æœ‰apiæ¥å£ï¼Œæ·»åŠ åˆ°æ­¤åˆ†ç»„        - com.github.xx.forum.web.admin    # å‰å°ç”¨æˆ·æ¥å£åˆ†ç»„    front:      group-name: å‰å°æ¥å£åˆ†ç»„      api-rule: package      api-rule-resources:        - com.github.xx.forum.web.front  ## å¢åŠ è®¿é—®æƒé™ ==&gt; æ·»åŠ basicè®¤è¯åŠŸèƒ½ï¼ˆéœ€è¦ç™»å½•ï¼‰  basic:   \tenable: true   \tusername: admin   \tpassword: 123456\n\n\nåœ¨æµ‹è¯•ç±»ä¸­æ·»åŠ Knife4jçš„æ¥å£\n\n/*\t@ApiOperation æè¿°ä¸€ä¸ªå…·ä½“çš„APIæ“ä½œ\tä¸»è¦å±æ€§ï¼š\t\t- value: apiæ“ä½œçš„ç®€çŸ­æè¿°ï¼Œä¼šæ˜¾ç¤ºåœ¨apiæ–‡æ¡£ä¸­\t\t- notes: apiæ“ä½œçš„è¯¦ç»†æè¿°ï¼Œä¼šæ˜¾ç¤ºåœ¨apiæ–‡æ¡£ä¸­\t\t- tags: apiæ“ä½œçš„æ ‡ç­¾ï¼Œç”¨æ¥å¯¹apiè¿›è¡Œåˆ†ç±»å’Œåˆ†ç»„*/@ApiOperation(&quot;æµ‹è¯• Knife4j&quot;)@RequestMapping(value = &quot;/testKnife4j&quot;, method = RequestMethod.POST)public String testKnife4j() &#123;  return &quot;xx&quot;&#125;\n\n\nè¿è¡Œé¡¹ç›®ï¼Œè¾“å…¥http://localhost:8080/doc.html å°±å¯ä»¥çœ‹åˆ°APIæ–‡æ¡£äº†\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["API","å¼€å‘"]},{"title":"Cacheableæ³¨è§£","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/Cacheable%E6%B3%A8%E8%A7%A3/","content":"ä½¿ç”¨redis &#x3D;&#x3D;&gt; è´Ÿè´£ä¸šåŠ¡é€»è¾‘å‹ç¼“å­˜ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥ç”¨äºå’Œä¸šåŠ¡é€»è¾‘å¼ºç»‘å®šçš„åœºæ™¯\nä½¿ç”¨@Cacheable &#x3D;&#x3D;&gt; è´Ÿè´£æ¥å£ç»“æœå‹ç¼“å­˜ï¼Œæ¯”å¦‚æŸ¥è¯¢æ¥å£çš„è¿”å›å€¼å¹¶ç¼“å­˜ï¼Œæ— ä¾µå…¥ã€æ˜“ç»´æŠ¤\n@Cacheable æ˜¯æ–¹æ³•çº§åˆ«ç¼“å­˜çš„ä¸€ç§å®ç°æ–¹å¼\n\nspringæ³¨è§£\nåº•å±‚ç¼“å­˜å®ç°å¯ä»¥æ˜¯redisã€caffenieã€memcacheã€guava\n\né…ç½®1. pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š\næ ¸å¿ƒä¾èµ–\n\n&lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;&lt;/dependency&gt;\n\n\næœ¬åœ°ç¼“å­˜å®ç°ä¾èµ– â€“ è¿™é‡Œç”¨çš„æ˜¯caffenie\n\n&lt;dependency&gt;    &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;    &lt;artifactId&gt;caffeine&lt;/artifactId&gt;&lt;/dependency&gt;\n\n\n\nCaffeineï¼šæœ¬åœ°å†…å­˜ç¼“å­˜ï¼Œé€‚åˆä½†èŠ‚ç‚¹ã€é«˜é¢‘è®¿é—®åœºæ™¯\nRedisï¼šåˆ†å¸ƒå¼ç¼“å­˜ï¼Œé€‚åˆå¤šèŠ‚ç‚¹ã€éœ€è¦ç¼“å­˜å…±äº«çš„åœºæ™¯\n\nè¿™é‡Œæœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜åœ¨åº”ç”¨æœåŠ¡å™¨è‡ªèº«çš„jvmå†…å­˜é‡Œé¢ï¼Œåªå±äºå½“å‰è¿™å°æœåŠ¡å™¨ï¼Œåˆ‡ç›´æ¥å­˜åœ¨æœåŠ¡å™¨çš„RAMé‡Œ\nCaffeine æ˜¯ Guava Cache çš„ä½œè€…å‚ä¸å¼€å‘çš„æ–°ä¸€ä»£æœ¬åœ°ç¼“å­˜ï¼Œæ€§èƒ½å’Œç¼“å­˜æ·˜æ±°ç®—æ³•éƒ½è¿œè¶… Guava Cacheï¼Œç°åœ¨æ–°é¡¹ç›®åŸºæœ¬éƒ½ç”¨ Caffeine æ›¿ä»£äº† Guava Cache\n\n\nä¸€çº§ç¼“å­˜ï¼šç¦»ä¸šåŠ¡ä»£ç æœ€è¿‘ï¼Œé€Ÿåº¦æœ€å¿«ã€‚å…ˆæŸ¥å®ƒï¼Œå‘½ä¸­å°±ç›´æ¥è¿”å›ï¼Œé¿å…ç½‘ç»œè¯·æ±‚\n\näºŒçº§ç¼“å­˜ï¼šå¦‚æœä¸€çº§ç¼“å­˜æ²¡å‘½ä¸­ï¼Œå†å»æŸ¥ Redisï¼Œé¿å…ç›´æ¥æŸ¥è¯¢æ•°æ®åº“\n\n\nè¿™é‡Œå‚è€ƒçš„åº”ç”¨å®ä¾‹ä¸æ˜¯ä¸€çº§ç¼“å­˜ç”¨Caffeineï¼ŒäºŒçº§ç¼“å­˜ç”¨redisçš„å½¢å¼\nCaffeineï¼š\n\nåŠ é€Ÿé«˜é¢‘è¯»è¯·æ±‚ï¼šæ¯”å¦‚æ–‡ç« è¯¦æƒ…é¡µã€ç”¨æˆ·ä¿¡æ¯ç­‰æŸ¥è¯¢æ¥å£ï¼Œè¿™äº›è¯·æ±‚è¯»å¤šå†™å°‘ï¼Œç”¨ Caffeine ç¼“å­˜å¯ä»¥å‡å°‘ Redis çš„ç½‘ç»œè¯·æ±‚ï¼Œæå‡å“åº”é€Ÿåº¦\nå‡è½» Redis å‹åŠ›ï¼šçƒ­ç‚¹æ•°æ®è¢« Caffeine æŒ¡ä½ï¼Œä¸ä¼šé¢‘ç¹è¯·æ±‚ Redisï¼Œé™ä½ Redis çš„è´Ÿè½½\nç¼ºç‚¹ï¼šå¤šèŠ‚ç‚¹æ•°æ®ä¸ä¸€è‡´ï¼Œé‡å¯æœåŠ¡å™¨ç¼“å­˜ä¼šä¸¢å¤±\n\nRedis\n\næ”¯æ’‘ä¸šåŠ¡é€»è¾‘ï¼šæ¯”å¦‚ç‚¹èµè®¡æ•°ã€ç²‰ä¸æ•°ã€æ’è¡Œæ¦œç­‰éœ€è¦**åŸå­æ€§æ“ä½œæˆ–è·¨èŠ‚ç‚¹å…±äº«**çš„æ•°æ®ï¼Œå¿…é¡»ç”¨ Redis\nä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼šå¤šèŠ‚ç‚¹å…±äº«åŒä¸€ä¸ª Redis ç¼“å­˜ï¼Œé¿å… Caffeine å¤šèŠ‚ç‚¹ä¸ä¸€è‡´çš„é—®é¢˜\næŒä¹…åŒ–ä¸é«˜å¯ç”¨ï¼šRedis æ”¯æŒæŒä¹…åŒ–ï¼Œé‡å¯åæ•°æ®ä¸ä¸¢å¤±ï¼Œè¿˜èƒ½åšé›†ç¾¤ä¿è¯é«˜å¯ç”¨\n\näºŒè€…äº’è¡¥ï¼š\n\nç”¨ Caffeine ä¿è¯æè‡´æ€§èƒ½ï¼Œç”¨ Redis ä¿è¯åˆ†å¸ƒå¼ä¸€è‡´æ€§\nå¯¹äº â€œè¯»å¤šå†™å°‘â€ çš„æŸ¥è¯¢åœºæ™¯ï¼ŒCaffeine è´Ÿè´£åŠ é€Ÿï¼›å¯¹äº â€œå†™å¤šè¯»å°‘â€ æˆ–éœ€è¦å…±äº«çš„ä¸šåŠ¡åœºæ™¯ï¼ŒRedis è´Ÿè´£ä¿è¯æ­£ç¡®æ€§\n\n\n2. ç¼“å­˜ç®¡ç†å™¨/** * å®šä¹‰ç¼“å­˜ç®¡ç†å™¨ï¼Œé…åˆSpringçš„ @Cache æ¥ä½¿ç”¨ */@Bean(&quot;caffeineCacheManager&quot;)public CacheManager cacheManager() &#123;    CaffeineCacheManager cacheManager = new CaffeineCacheManager();    cacheManager.setCaffeine(Caffeine.newBuilder()            // è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå†™å…¥åäº”åˆ†é’Ÿè¿‡æœŸ            .expireAfterWrite(5, TimeUnit.MINUTES)            // åˆå§‹åŒ–ç¼“å­˜ç©ºé—´å¤§å°            .initialCapacity(100)            // æœ€å¤§çš„ç¼“å­˜æ¡æ•°            .maximumSize(200)    );    return cacheManager;&#125;\n\nè¿™ç§æ–¹å¼å¯ä»¥å®ç°æ›´ç²¾ç»†çš„ç¼“å­˜ç­–ç•¥ï¼Œè¿˜å¯ä»¥å®ç°å¤šç¼“å­˜ç®¡ç†å™¨å…±å­˜\n\nè‡ªåŠ¨å…³è”æœºåˆ¶ï¼šå½“ä½ åœ¨ Spring å®¹å™¨ä¸­å®šä¹‰äº† CacheManager Beanï¼ŒSpring ä¼šè‡ªåŠ¨è¯†åˆ«å®ƒï¼Œå¹¶å°†å…¶ä½œä¸º @Cacheable ç­‰æ³¨è§£çš„é»˜è®¤ç¼“å­˜ç®¡ç†å™¨\nåç§°å…³è”æ–¹å¼ï¼š\n\nå¦‚æœ CacheManager Bean æœ‰åç§°ï¼Œæ¯”å¦‚ @Bean(â€œcaffeineCacheManagerâ€)ï¼Œå¯ä»¥åœ¨æ³¨è§£ä¸­é€šè¿‡cacheManagerå‚æ•°æŒ‡å®šï¼š\n@Cacheable(cacheNames = &quot;user&quot;, cacheManager = &quot;caffeineCacheManager&quot;)\n\nå¦‚æœä¸æŒ‡å®š cacheManagerï¼ŒSpring ä¼šä½¿ç”¨ç±»å‹åŒ¹é…ï¼Œä¼˜å…ˆé€‰æ‹©ç¬¦åˆ CacheManager ç±»å‹çš„ Beanã€‚\n\n\n\næˆ–è€…åœ¨application.ymlæ–‡ä»¶ä¸­é€šè¿‡é…ç½®çš„æ–¹å¼æ·»åŠ \n# æŒ‡å®šå…¨å±€é»˜è®¤çš„ç¼“å­˜ç­–ç•¥spring:  cache:    type: caffeine    caffeine:      spec: initialCapacity=10,maximumSize=200,expireAfterWrite=5m\n\nè¿™ç§æ–¹å¼ä¸éœ€è¦CacheManagerçš„beanå®šä¹‰\nå¼€å¯ç¼“å­˜æ³¨è§£åœ¨é¡¹ç›®çš„å¯åŠ¨å…¥å£ï¼Œæ·»åŠ @EnableCachingæ³¨è§£\næ³¨è§£ä»‹ç»1. @Cacheableä¸»è¦ç”¨äºä¿®é¥°æ–¹æ³•æˆ–ç±»ã€‚\nè®¿é—®@Cacheableä¿®é¥°çš„æ–¹æ³•æ—¶ &#x3D;&#x3D;&gt; ä¼˜å…ˆä»ç¼“å­˜ä¸­è·å–ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨ï¼Œå–ç¼“å­˜å€¼ï¼›ä¸å­˜åœ¨åˆ™æ‰§è¡Œæ–¹æ³•ï¼Œå¹¶å°†ç»“æœå†™å…¥ç¼“å­˜\nå‚æ•°ï¼š\n/** * redisKey: cacheNames + key ç»„åˆè€Œæˆ --&gt; æ”¯æŒSpEL * redisValue: è¿”å›ç»“æœ */@Cacheable(cacheNames = &quot;say&quot;, key = &quot;&#x27;p_&#x27; + #name&quot;)public String sayHello(String name) &#123;    return &quot;hello+&quot; + name + &quot;--&gt;&quot; + UUID.randomUUID().toString();&#125;\n\nkey = &quot;&#39;p_&#39; + #name&quot; æ˜¯ SpELï¼ˆSpring Expression Languageï¼‰è¡¨è¾¾å¼ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆç¼“å­˜çš„ Key\nâ€“&gt;   say::p_name\nè¿˜å¯ä»¥åŠ å…¥ï¼š\n\nconditionæ¥è¡¨ç¤ºè®¾ç½®æ¡ä»¶è¾¾æˆæ—¶å†™å…¥ç¼“å­˜\nunlessè¡¨ç¤ºä¸æ»¡è¶³æ¡ä»¶çš„æ—¶å€™å†™å…¥ç¼“å­˜\n\nä¸èƒ½ç›´æ¥æ”¾å¤šä¸ª@Cacheableï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡@Cachingç»„åˆå®ç°ï¼ˆæŒ‰ç…§æ³¨è§£çš„å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰\n2. @CachePutä¸ç®¡ç¼“å­˜æœ‰æ²¡æœ‰éƒ½å°†æ–¹æ³•ç»“æœå†™å…¥ç¼“å­˜ &#x3D;&#x3D;&gt; é€‚ç”¨äºç¼“å­˜æ›´æ–°\n@CachePut(cacheNames = &quot;t4&quot;, key = &quot;#age&quot;)public String cachePut(int age) &#123;\treturn &quot;t4:&quot; + age + &#x27;--&gt;&#x27; + UUID.randomUUID().toString();&#125;\n\n3. @CacheEvictåˆ é™¤ç¼“å­˜\n@CacheEvict(cacheNames = &quot;say&quot;, key = &quot;&#x27;p_&#x27;+ #name&quot;)public String evict(String name) &#123;  return &quot;evict+&quot; + name + &quot;--&gt;&quot; + UUID.randomUUID().toString();&#125;\n\né»˜è®¤è¡Œä¸ºï¼šå…ˆæ‰§è¡Œæ–¹æ³•ä½“ï¼Œæ–¹æ³•ä½“æˆåŠŸåå†åˆ ç¼“å­˜\n&#x3D;&#x3D;&gt; å¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼šç¼“å­˜æ“ä½œä¼šå›æ»šï¼Œä¸ä¼šæ‰§è¡Œ\n4. @Cachingæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå¯ä»¥æŠŠä¸Šè¿°ç¼“å­˜æ“ä½œç»„åˆåˆ°ä¸€èµ·ï¼Œåœ¨ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ä¸­åŒæ—¶æ‰§è¡Œ\n&#x3D;&#x3D;&gt; å®ç°ä¸€ä¸ªæ•°æ®å˜åŠ¨ï¼Œæ›´æ–°å¤šä¸ªç¼“å­˜çš„æ•ˆæœ\n@Caching(cacheable = @Cacheable(cacheNames = &quot;caching&quot;, key = &quot;#age&quot;), evict = @CacheEvict(cacheNames = &quot;t4&quot;, key = &quot;#age&quot;))public String caching(int age) &#123;  return &quot;caching: &quot; + age + &quot;--&gt;&quot; + UUID.randomUUID.toString();&#125;\n\nä»caching::ageç¼“å­˜å–æ•°æ®ï¼Œä¸å­˜åœ¨æ—¶æ‰§è¡Œæ–¹æ³•å¹¶å†™å…¥ç¼“å­˜ã€‚è¿™é‡Œçš„ageæ˜¯cachingè°ƒç”¨çš„å‚æ•°\nå¤±æ•ˆç¼“å­˜ä¸ºt4::age\næ¯”å¦‚ â€œä¿®æ”¹ç”¨æˆ·ä¿¡æ¯â€ æ—¶ï¼Œéœ€è¦ï¼š\n\næ›´æ–°ã€Œç”¨æˆ·åŸºæœ¬ä¿¡æ¯ç¼“å­˜ã€ï¼ˆ@CachePutï¼‰ï¼›\nåˆ é™¤ã€Œç”¨æˆ·è®¢å•åˆ—è¡¨ç¼“å­˜ã€ï¼ˆ@CacheEvictï¼‰ï¼›\nåˆ é™¤ã€Œç”¨æˆ·ç§¯åˆ†ç¼“å­˜ã€ï¼ˆ@CacheEvictï¼‰ã€‚\n\nè¿™æ—¶å€™ç”¨ @Caching å°±èƒ½ä¸€æ¬¡å®Œæˆï¼š\n@Caching(    put = @CachePut(cacheNames = &quot;user&quot;, key = &quot;#user.id&quot;),  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ç¼“å­˜    evict = &#123;        @CacheEvict(cacheNames = &quot;user:order&quot;, key = &quot;#user.id&quot;),  // æ¸…ç©ºè®¢å•ç¼“å­˜        @CacheEvict(cacheNames = &quot;user:score&quot;, key = &quot;#user.id&quot;)   // æ¸…ç©ºç§¯åˆ†ç¼“å­˜    &#125;)public User updateUser(User user) &#123;    // æ‰§è¡Œæ•°æ®åº“æ›´æ–°é€»è¾‘    userDao.update(user);    return user;&#125;\n\nè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä¼šä¸€æ¬¡æ€§å®Œæˆ 1 ä¸ªç¼“å­˜æ›´æ–° + 2 ä¸ªç¼“å­˜å¤±æ•ˆï¼Œå®Œç¾å®ç° â€œä¸€ä¸ªæ•°æ®å˜åŠ¨ï¼ˆä¿®æ”¹ç”¨æˆ·ï¼‰ï¼Œæ›´æ–°å¤šä¸ªç¼“å­˜â€\nQ &amp;&amp; AQï¼šç¼“å­˜æ³¨è§£ä¸­æœ‰syncæ˜¯å¦æ„å‘³ç€ç¼“å­˜æ”¯æŒå¼‚æ­¥å†™å…¥åŠŸèƒ½ï¼Ÿ\nä¸ï¼Œæ˜¯ç¼“å­˜å‡»ç©¿é˜²æŠ¤\n\nå½“ sync = true æ—¶ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œæ–¹æ³•ä½“å¹¶å†™å…¥ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ä¼šç­‰å¾…ï¼Œé¿å…ç¼“å­˜å‡»ç©¿\nå¤§é‡è¯·æ±‚åŒæ—¶æŸ¥è¯¢åŒä¸€ä¸ªä¸å­˜åœ¨çš„ç¼“å­˜ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§\n\n\n\nQï¼šå¦‚æœæœ‰ä¸åŒç±»å‹çš„ç¼“å­˜å¯¹è±¡ä¸”ç¼“å­˜æ—¶é—´ä¸ä¸€è‡´ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªç¼“å­˜ç®¡ç†å™¨å—ï¼Ÿ\nå¯ä»¥ï¼Œåœ¨æ³¨è§£ä¸­é€šè¿‡ cacheManager å‚æ•°æŒ‡å®šä½¿ç”¨å“ªä¸ª\nQï¼šå¦‚ä½•ç›´æ¥ä½¿ç”¨caffeine\né€šè¿‡caffeine APIã€‚\n// 1. åˆ›å»ºç¼“å­˜å®ä¾‹Cache&lt;String, User&gt; userCache = Caffeine.newBuilder()        .expireAfterWrite(10, TimeUnit.MINUTES)        .maximumSize(1000)        .build();// 2. å†™å…¥ç¼“å­˜userCache.put(&quot;user:123&quot;, user);// 3. è¯»å–ç¼“å­˜ï¼ˆä¸å­˜åœ¨æ—¶è°ƒç”¨ loader åŠ è½½ï¼‰User user = userCache.get(&quot;user:123&quot;, key -&gt; userDao.selectById(Long.parseLong(key.split(&quot;:&quot;)[1])));// 4. åˆ é™¤ç¼“å­˜userCache.invalidate(&quot;user:123&quot;);\n\n\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å®ä¾‹"]},{"title":"Diffusion over éšå¼ç¥ç»è¡¨ç¤ºINR","url":"/papers/work2/Diffusion-over-%E9%9A%90%E5%BC%8F%E7%A5%9E%E7%BB%8F%E8%A1%A8%E7%A4%BAINR/","content":"é—®é¢˜è¡¨è¿°ä½¿ç”¨ **ç¥ç»ç½‘ç»œè¡¨ç¤ºå‡½æ•° Ï†(x)**ã€‚\n\n**Ï†(x)**ï¼šå­¦ä¹ ä¸€ä¸ªå‡½æ•°æœ¬èº«ã€‚è¯¥å‡½æ•°éœ€è¦æ»¡è¶³æŸäº›ç‰©ç† &#x2F; å‡ ä½• &#x2F; æ•°å­¦çº¦æŸï¼ˆæ–¹ç¨‹ï¼‰ã€‚\n\nçº¦æŸï¼šÏ† åŠå…¶å¯¼æ•°å¿…é¡»æ»¡è¶³æŸä¸ªæ¡ä»¶\nC &#x3D; 0\nè¿™å¯¹åº”äºä¸€ç§ éšå¼é—®é¢˜è¡¨è¿°ã€‚\n\n\nä¾‹å¦‚ï¼Œç»™å®šä¸€é˜¶å¯¼æ•°çº¦æŸï¼š\nâˆ‡Ï†(x) = f(x)\n\nå¯ä»¥ç­‰ä»·åœ°å†™æˆå¦‚ä¸‹éšå¼å½¢å¼ï¼š\nC(x, Ï†, âˆ‡Ï†, âˆ‡Â²Ï†) = âˆ‡Â²Ï†(x) âˆ’ f(x) = 0\n\nå…¶ä¸­x è¡¨ç¤ºç©ºé—´åæ ‡ï¼ŒÏ†(x) è¡¨ç¤º RSSï¼ŒC è¡¨ç¤ºè§„åˆ™æ£€æŸ¥å™¨ã€‚å½“ C &#x3D; 0 æ—¶ï¼Œå‡½æ•° Ï† è¢«è®¤ä¸ºæ˜¯åˆæ³•çš„ã€‚\nè¿™é‡Œ Ï† ä¸æ˜¯é€šè¿‡æ˜¾å¼å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼Œè€Œæ˜¯ç”±ä¸€ç»„â€œè§„åˆ™â€æ‰€å®šä¹‰å’Œçº¦æŸçš„ã€‚\nå› æ­¤ï¼ŒINR ä¸æ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªï¼šå¯»æ‰¾åˆæ³•å‡½æ•°çš„é—®é¢˜\n\nï¼ˆåˆæ³•å‡½æ•° &#x3D; æ»¡è¶³æ‰€æœ‰çº¦æŸæ¡ä»¶çš„è§£ï¼‰\n\nåœ¨ä¸€ç»„çº¦æŸä¸­ï¼š\nC_m(a(x), Ï†(x), âˆ‡Ï†(x), âˆ‡Â²Ï†(x), â€¦)\n\nå¯»æ‰¾ä¸€ä¸ªå‡½æ•° Ï†æ»¡è¶³m æ¡è§„åˆ™ã€‚ä¸åŒè§„åˆ™çš„å½¢å¼å¯èƒ½ä¸åŒï¼š\n\næœ‰çš„åªä¾èµ– âˆ‡Ï†(x)\næœ‰çš„åªä¾èµ– âˆ‡Â²Ï†(x)\næœ‰çš„è¿˜éœ€è¦å¤–éƒ¨å·²çŸ¥é‡ a(x)\n\nå…¶ä¸­å·²çŸ¥æ¡ä»¶ï¼ˆPDEï¼‰é€šå¸¸ç”± PDE ç»™å‡ºï¼Œä¾‹å¦‚ï¼š\n\næºé¡¹ï¼ˆsource termï¼‰\nè¾¹ç•Œæ¡ä»¶ï¼ˆboundary conditionsï¼‰\n\næˆ‘ä»¬ä½¿ç”¨ Î©_m è¡¨ç¤ºç¬¬ m æ¡è§„åˆ™çš„ç”Ÿæ•ˆåŒºåŸŸï¼Œç¬¬ m æ¡çº¦æŸå¹¶ä¸è¦æ±‚åœ¨æ•´ä¸ªç©ºé—´å†…éƒ½æˆç«‹ã€‚\næŸå¤±å‡½æ•°æ•´ä½“æŸå¤±å‡½æ•°å®šä¹‰ä¸ºï¼š\nL = âˆ«_Î©  Î£_&#123;m=1&#125;^M  |Î©_m(x)| Â· |C_m(x)|  dx\n\nå…¶ä¸­Î© è¡¨ç¤ºæ•´ä¸ªç©ºé—´ï¼Œx è¡¨ç¤ºç©ºé—´ä¸­çš„æ¯ä¸€ä¸ªç‚¹ã€‚\nå¯¹æ‰€æœ‰ x è¿›è¡Œç§¯åˆ†ã€‚Î£_{m&#x3D;1}^M è¡¨ç¤ºå°†æ‰€æœ‰çº¦æŸçš„è¿åç¨‹åº¦è¿›è¡Œç´¯åŠ ã€‚\n\nå½“ x âˆˆ Î©_m æ—¶ï¼Œç¬¬ m æ¡çº¦æŸç”Ÿæ•ˆ\n\nå½“ x âˆ‰ Î©_m æ—¶ï¼Œè¯¥çº¦æŸåœ¨è¯¥ä½ç½®å¤±æ•ˆ\n\n\nè¿™ç§è®¾è®¡æ˜¾å¼åœ°è€ƒè™‘äº†ä¸åŒç©ºé—´ä½ç½®ä¸Šï¼Œä¸åŒçº¦æŸæ˜¯å¦æˆç«‹çš„é—®é¢˜ã€‚\næ•°æ®é›†","categories":["papers","work2"],"tags":["diffusion","INR"]},{"title":"WEBä¸‰å¤§ç»„ä»¶ä¹‹Filter","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/WEB%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6%E4%B9%8BFilter/","content":"åŸºæœ¬å®šä¹‰Filterï¼Œè¿‡æ»¤å™¨ï¼Œå±äºServletè§„èŒƒï¼Œå¹¶ä¸æ˜¯Springç‹¬æœ‰çš„\nä½œç”¨ï¼šæ‹¦æˆªhttpè¯·æ±‚ï¼Œåšä¸€äº›ä¸šåŠ¡é€»è¾‘æ“ä½œ\nä¸€ä¸ªhttpè¯·æ±‚è¿‡æ¥ä¹‹åï¼Œä¸€ä¸ªFilterçš„å·¥ä½œæµç¨‹ï¼š\n\né¦–å…ˆ**è¿›å…¥filterï¼Œæ‰§è¡Œç›¸å…³ä¸šåŠ¡é€»è¾‘**\n**è‹¥åˆ¤å®šé€šè¡Œï¼Œåˆ™è¿›å…¥Servleté€»è¾‘ï¼ŒServletæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œåˆè¿”å›Filter**ï¼Œæœ€ååœ¨è¿”å›ç»™è¯·æ±‚æ–¹\nåˆ¤å®šå¤±è´¥ï¼Œç›´æ¥è¿”å›ï¼Œä¸éœ€è¦å°†è¯·æ±‚å‘ç»™Servlet\n\næ‰€ä»¥å¯ä»¥ç”¨filteræ¥å®ç°ç”¨æˆ·èº«ä»½è¯†åˆ«ï¼ˆè·å–ã€æ ¡éªŒï¼‰ï¼Œç„¶åå°†è¯†åˆ«çš„ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°TreadLocalå¯¹åº”çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ ·åœ¨åç»­çš„è¯·æ±‚é“¾è·¯ä¸­ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æ¥è·å–å½“å‰ç™»å½•ç”¨æˆ·\nä½¿ç”¨å®ç°Filteræ¥å£å³å¯\negï¼šè¾“å‡ºè¯·æ±‚æ—¥å¿—çš„æ‹¦æˆªå™¨\n@Slf4j@WebFilterpublic class ReqFilter implements Filter &#123;    public ReqFilter() &#123;        System.out.println(&quot;init reqFilter&quot;);    &#125;    @Override    public void init(FilterConfig filterConfig) throws ServletException &#123;    &#125;    @Override    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)            throws IOException, ServletException &#123;        HttpServletRequest req = (HttpServletRequest) request;        log.info(&quot;url=&#123;&#125;, params=&#123;&#125;&quot;, req.getRequestURI(), JSON.toJSONString(req.getParameterMap()));        chain.doFilter(req, response);    &#125;    @Override    public void destroy() &#123;    &#125;&#125;\n\n\nåœ¨doFilteræ–¹æ³•ä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘\n\nå¦‚æœå…è®¸è®¿é—®ç»§ç»­ï¼Œåˆ™æ‰§è¡Œchain.doFilter(req, response);ï¼Œå¦‚æœä¸æ‰§è¡Œä¸Šé¢è¿™ä¸€å¥ï¼Œåˆ™è®¿é—®åˆ°æ­¤ä¸ºæ­¢\n\n\næ³¨å†ŒWebFilteræ³¨è§£å°†@WebFilteræ ‡æ³¨åˆ°è‡ªå·±å®ç°çš„è¿‡æ»¤å™¨ä¸Šï¼ˆä¸Šè¿°ä¾‹å­ä¸­çš„ReqFilterï¼‰ï¼Œå…¶ä¸­å‚æ•°é…ç½®ï¼š\n\n\n\nå‚æ•°å\nç±»å‹\næ ¸å¿ƒä½œç”¨\næ˜¯å¦å¿…å¡«\n\n\n\nfilterName\nString\nè¿‡æ»¤å™¨åç§°ï¼Œç”¨äºåœ¨å¤šè¿‡æ»¤å™¨æ—¶åŒºåˆ†ä¸åŒFIlterï¼Œæˆ–è€…é…åˆ@WebFilteræ’åº\nå¦\n\n\nvalue&#x2F;urlPatterns\nString[]\nã€æœ€å¸¸ç”¨ã€‘æŒ‡å®šè¿‡æ»¤å™¨æ‹¦æˆªçš„ URL è·¯å¾„ï¼ˆæ‹¦æˆªæ‰€æœ‰&#x2F;æŸè·¯å¾„ä¸‹&#x2F;ä»¥xxä¸ºåç¼€&#x2F;ç²¾å‡†æ‹¦æˆªï¼‰\næ˜¯ï¼ˆäºŒé€‰ä¸€ï¼‰\n\n\nservletNames\nString[]\nç²¾å‡†æ‹¦æˆªæŒ‡å®šåç§°çš„Servletå¤„ç†çš„è¯·æ±‚ï¼Œä¸æ˜¯æ‰€æœ‰url\nå¦\n\n\ndispatcherTypes\nDispatcherType[]\næŒ‡å®šæ‹¦æˆªçš„è¯·æ±‚ç±»å‹ï¼ˆå¦‚è¯·æ±‚ã€è½¬å‘ã€åŒ…å«ç­‰ï¼‰\nå¦ï¼ˆé»˜è®¤ REQUESTï¼‰\n\n\nasyncSupported\nboolean\næ˜¯å¦æ”¯æŒå¼‚æ­¥è¯·æ±‚ï¼ˆå¦‚æœæ‹¦æˆªçš„servletæ˜¯ç”¨æ¥å¼‚æ­¥å¤„ç†ï¼Œé‚£Filterä¹Ÿå¿…é¡»å¼€å¯ï¼‰\nå¦ï¼ˆé»˜è®¤ falseï¼‰\n\n\ninitParams\nWebInitParam[]\nè¿‡æ»¤å™¨åˆå§‹åŒ–å‚æ•°\nå¦\n\n\ndescription\nString\nè¿‡æ»¤å™¨æè¿°ä¿¡æ¯ï¼ˆçº¯æ³¨é‡Šæ€§å‚æ•°ï¼‰\nå¦\n\n\ndisplayName\nString\nè¿‡æ»¤å™¨å±•ç¤ºåç§°ï¼ˆçº¯æ³¨é‡Šæ€§å‚æ•°ï¼‰\nå¦\n\n\nğŸŒŸ ä½¿ç”¨è¿™ä¸ªæ³¨è§£çš„æ—¶å€™éœ€è¦åœ¨å¯åŠ¨&#x2F;é…ç½®ç±»ä¸Šæ·»åŠ @ServletComponentScanæ³¨è§£æ¥å¯ç”¨\nFilterRegistrationBean@WebFilteræŒ‡å®šfilterä¼˜å…ˆçº§æ¯”è¾ƒéº»çƒ¦ï¼Œä¸å¦‚FilterRegistrationBeanç®€å•\n@Beanpublic FilterRegistrationBean&lt;Filter&gt; orderFilter() &#123;    FilterRegistrationBean&lt;Filter&gt; filter = new FilterRegistrationBean&lt;&gt;();    filter.setName(&quot;reqRecordFilter&quot;);    filter.setUrlPatterns(Arrays.asList(&quot;/*&quot;));    filter.setFilter(new ReqRecordFilter());    // æŒ‡å®šä¼˜å…ˆçº§    filter.setOrder(-1);    return filter;&#125;\n\nå®ä¾‹ï¼šå®ç°è¯·æ±‚æ—¥å¿—è®°å½•å®ç°åŠŸèƒ½ï¼šå°†æ‰€æœ‰å¤–éƒ¨è®¿é—®éƒ½è®°å½•åœ¨æ—¥å¿—æ–‡ä»¶ä¸­\n\nåŸºäºæ—¥å¿—æ–‡ä»¶å°±å¯ä»¥å®ç°æ•´ä¸ªé¡¹ç›®çš„ç›‘æ§\nå‡ºç°é—®é¢˜çš„æ—¶å€™å¯ä»¥åŸºäºæ­¤è¿›è¡Œæµé‡é‡æ”¾\n\nè€Œè¿‡æ»¤å™¨Filterå¯ä»¥æ‹¦æˆªwebè¯·æ±‚ï¼Œå…¶doFilteræ–¹æ³•å¯ä»¥åˆ’åˆ†ä¸ºä¸‰å—ï¼š\n\ndoBeforeï¼šè¡¨ç¤ºå°†è¯·æ±‚è½¬å‘åˆ° Controller æ‰§è¡Œä¹‹å‰\nè®°å½•å¼€å§‹æ‰§è¡Œæ—¶é—´\nè®°å½•è¯·æ±‚ç›¸å…³ä¿¡æ¯\n\n\ndoFilterï¼šå³å°†è¯·æ±‚è½¬å‘åˆ° Controller å»æ‰§è¡Œ\ndoAfterï¼š**Controller æ–¹æ³•æ‰§è¡Œå®Œ**\nè®°å½•ç»“æŸæ—¶é—´ï¼Œè®¡ç®—æ‰§è¡Œè€—æ—¶\næ—¥å¿—è¾“å‡º\n\n\n\nä½¿ç”¨Filteråšæ—¥å¿—è®°å½•çš„ä¼˜ç‚¹æ˜¯é€‚ç”¨æ€§å¼ºï¼Œå®ç°ç®€å•ï¼Œç¼ºç‚¹æ˜¯åªèƒ½è®°å½• Controller çš„è¯·æ±‚ç›¸å…³ä¿¡æ¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç»Ÿè®¡æŸä¸ª Service æ–¹æ³•ã€Mapper æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼åˆ™ä¸å¤ªåˆé€‚\n&#x3D;&#x3D;&gt; è¿˜å¯ä»¥ç”¨AOPçš„æ–¹æ³•ï¼Œä½†è¿™å°±è¦è‡ªå·±å®šä¹‰åˆ‡ç‚¹ä»€ä¹ˆçš„äº†\næ ¸å¿ƒé€»è¾‘è¿˜æ˜¯ã€Œè¯·æ±‚å‰å¤„ç† â†’ æ”¾è¡Œè¯·æ±‚ â†’ è¯·æ±‚åå¤„ç†ã€\n1. åŸºç¡€é…ç½®@Slf4j // Lombokï¼šè‡ªåŠ¨ç”Ÿæˆæ—¥å¿—å¯¹è±¡// æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼›è¿‡æ»¤å™¨åç§°reqRecordFilterï¼›æ”¯æŒå¼‚æ­¥è¯·æ±‚ï¼ˆasyncSupported = trueï¼‰@WebFilter(urlPatterns = &quot;/*&quot;, filterName = &quot;reqRecordFilter&quot;, asyncSupported = trueï¼‰)public class ReqRecordFilter implements Filter &#123;    // ä¸“é—¨è®°å½•è¯·æ±‚æ—¥å¿—çš„Loggerï¼ˆå’Œæ™®é€šlogåŒºåˆ†å¼€ï¼Œé€šå¸¸ä¼šé…ç½®æˆè¾“å‡ºåˆ°ä¸“é—¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ–¹ä¾¿åˆ†æè¯·æ±‚ï¼‰    private static Logger REQ_LOG = LoggerFactory.getLogger(&quot;req&quot;);    // å“åº”å¤´ä¸­è¿”å›traceIdçš„keyï¼Œå‰ç«¯å¯æ‹¿åˆ°è¿™ä¸ªidæ’æŸ¥é—®é¢˜    private static final String GLOBAL_TRACE_ID_HEADER = &quot;g-trace-id&quot;;    // æ³¨å…¥é¡¹ç›®çš„å…¨å±€åˆå§‹åŒ–æœåŠ¡ã€ç»Ÿè®¡æœåŠ¡    @Autowired    private GlobalInitService globalInitService;    @Autowired    private StatisticsSettingService statisticsSettingService;&#125;\n\n2. æ ¸å¿ƒæ–¹æ³• doFilterï¼ˆè¯·æ±‚å¤„ç†çš„ä¸»æµç¨‹ï¼‰\nè¯·æ±‚å‰å¤„ç†é˜¶æ®µ\n\n@Overridepublic void doFilter(...) throws IOException, ServletException &#123;    long start = System.currentTimeMillis(); // è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´    HttpServletRequest request = null;    StopWatch stopWatch = new StopWatch(&quot;è¯·æ±‚è€—æ—¶&quot;); // ç»†ç²’åº¦è®¡æ—¶å·¥å…·    try &#123;        // 1. åˆå§‹åŒ–è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆtraceIdã€ç”¨æˆ·IPã€è®¾å¤‡IDã€ç™»å½•ä¿¡æ¯ç­‰ï¼‰        stopWatch.start(&quot;è¯·æ±‚å‚æ•°æ„å»º&quot;);        request = this.initReqInfo((HttpServletRequest) servletRequest, (HttpServletResponse) servletResponse);        stopWatch.stop();        // 2. å¤„ç†è·¨åŸŸï¼ˆCORSï¼‰        stopWatch.start(&quot;cors&quot;);        CrossUtil.buildCors(request, (HttpServletResponse) servletResponse);        stopWatch.stop();        // 3. æ”¾è¡Œè¯·æ±‚ï¼šè°ƒç”¨Controller/Serviceå¤„ç†ä¸šåŠ¡ï¼ˆæ ¸å¿ƒï¼ï¼‰        stopWatch.start(&quot;ä¸šåŠ¡æ‰§è¡Œ&quot;);        filterChain.doFilter(request, servletResponse);    &#125; \n\ninitReqInfo()ï¼šæ ¸å¿ƒåˆå§‹åŒ–æ–¹æ³•\nCrossUtil.buildCors()ï¼šå¤„ç†è·¨åŸŸï¼ˆæ¯”å¦‚å‰ç«¯è®¿é—®åç«¯æ¥å£æ—¶çš„è·¨åŸŸé—®é¢˜ï¼Œè¿‡æ»¤å™¨ç»Ÿä¸€å¤„ç†ï¼‰\nfilterChain.doFilter()ï¼šæ”¾è¡Œè¯·æ±‚ â†’ è¿™è¡Œä»£ç æ‰§è¡Œåï¼Œæ‰ä¼šèµ°åˆ° Controller çš„æ¥å£æ–¹æ³•\n\nè¯·æ±‚åå¤„ç†é˜¶æ®µfinallyå—ï¼Œæ— è®ºæ˜¯å¦å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ\n\n    finally &#123;        // é˜²æ­¢ä¸šåŠ¡æ‰§è¡Œå¼‚å¸¸å¯¼è‡´stopWatchæ²¡åœæ­¢ï¼Œå…ˆå¼ºåˆ¶åœæ­¢        if (stopWatch.isRunning()) &#123;            stopWatch.stop();        &#125;        // 1. è¾“å‡ºè¯·æ±‚æ—¥å¿—ï¼ˆURLã€IPã€è€—æ—¶ã€ç”¨æˆ·IDç­‰ï¼‰        stopWatch.start(&quot;è¾“å‡ºè¯·æ±‚æ—¥å¿—&quot;);        buildRequestLog(ReqInfoContext.getReqInfo(), request, System.currentTimeMillis() - start);        stopWatch.stop();        // 2. æ¸…ç©ºä¸Šä¸‹æ–‡ï¼šé¿å…çº¿ç¨‹å¤ç”¨å¯¼è‡´æ•°æ®æ±¡æŸ“ï¼ˆMDC/ReqInfoContextæ˜¯çº¿ç¨‹çº§åˆ«çš„ï¼‰        MdcUtil.clear(); // æ¸…ç©ºé“¾è·¯è¿½è¸ªçš„traceId        ReqInfoContext.clear(); // æ¸…ç©ºè¯·æ±‚ä¸Šä¸‹æ–‡        // 3. éç”Ÿäº§ç¯å¢ƒæ‰“å°ç»†ç²’åº¦è€—æ—¶ï¼ˆæ–¹ä¾¿å¼€å‘è°ƒè¯•ï¼‰        if (!isStaticURI(request) &amp;&amp; !EnvUtil.isPro()) &#123;            log.info(&quot;&#123;&#125; - cost:\\n&#123;&#125;&quot;, request.getRequestURI(), stopWatch.prettyPrint(TimeUnit.MILLISECONDS));        &#125;    &#125;&#125;\n\nbuildRequestLog()ï¼šæ ¸å¿ƒæ—¥å¿—æ„å»ºæ–¹æ³•\nstopWatch.prettyPrint()ï¼šæ‰“å°æ¯ä¸ªæ­¥éª¤çš„è€—æ—¶ï¼ˆæ¯”å¦‚å¼€å‘ç¯å¢ƒèƒ½çœ‹åˆ° â€œè¯·æ±‚å‚æ•°æ„å»ºç”¨äº† 3msï¼Œä¸šåŠ¡æ‰§è¡Œç”¨äº† 50msâ€ï¼‰\nisStaticURI()ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯é™æ€èµ„æºï¼ˆcss&#x2F;js&#x2F;png ç­‰ï¼‰ &#x3D;&#x3D;&gt; è¿™é‡Œpcå‰å°çš„ç½‘é¡µä¹Ÿé›†æˆåœ¨é¡¹ç›®ä¸­ï¼Œæ‰€ä»¥éœ€è¦æ’æ‰é™æ€èµ„æº\n3. è¾…åŠ©æ–¹æ³•æ‹†è§£\ninitReqInfo()ï¼šè¯·æ±‚ä¸Šä¸‹æ–‡åˆå§‹åŒ–\n\n&#x3D;&#x3D;&gt; ç»™æ¯ä¸ªè¯·æ±‚åˆå§‹åŒ–ã€Œé“¾è·¯è¿½è¸ª IDã€ç”¨æˆ·ä¿¡æ¯ã€è®¾å¤‡ IDã€è¯·æ±‚åŸºæœ¬ä¿¡æ¯ã€ï¼Œå¹¶å­˜å…¥ReqInfoContextï¼ˆçº¿ç¨‹ä¸Šä¸‹æ–‡ï¼‰ï¼Œåç»­ä¸šåŠ¡ä»£ç å¯ç›´æ¥è·å–è¿™äº›ä¿¡æ¯\nprivate HttpServletRequest initReqInfo(HttpServletRequest request, HttpServletResponse response) &#123;    // é™æ€èµ„æºç›´æ¥æ”¾è¡Œï¼Œä¸åˆå§‹åŒ–ï¼ˆæå‡æ€§èƒ½ï¼‰    if (isStaticURI(request)) &#123;        return request;    &#125;    StopWatch stopWatch = new StopWatch(&quot;è¯·æ±‚å‚æ•°æ„å»º&quot;);    try &#123;        // æ­¥éª¤1ï¼šæ·»åŠ å…¨é“¾è·¯traceIdï¼ˆæ—¥å¿—è¿½è¸ªç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªè¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—éƒ½å¸¦åŒä¸€ä¸ªtraceIdï¼‰        stopWatch.start(&quot;traceId&quot;);        MdcUtil.addTraceId(); // ç”ŸæˆUUIDä½œä¸ºtraceIdï¼Œå­˜å…¥MDC        stopWatch.stop();        // æ­¥éª¤2ï¼šåˆå§‹åŒ–Sessionï¼Œç”¨äºç»Ÿè®¡åœ¨çº¿äººæ•°ï¼ˆé…åˆOnlineUserCountListenerï¼‰        request.getSession().setAttribute(&quot;latestVisit&quot;, System.currentTimeMillis());        // æ­¥éª¤3ï¼šæ„å»ºè¯·æ±‚åŸºæœ¬ä¿¡æ¯ï¼ˆHostã€Pathã€Refererã€IPã€UserAgentç­‰ï¼‰        stopWatch.start(&quot;è¯·æ±‚åŸºæœ¬ä¿¡æ¯&quot;);        ReqInfoContext.ReqInfo reqInfo = new ReqInfoContext.ReqInfo();        // å¤„ç†è¯·æ±‚çš„Hostï¼ˆå…¼å®¹nginxè½¬å‘çš„X-Forwarded-Hostå¤´ï¼‰        String forwardedHost = request.getHeader(&quot;X-Forwarded-Host&quot;);        String hostHeader = request.getHeader(&quot;host&quot;);        if (StringUtils.isNotBlank(forwardedHost)) &#123;            reqInfo.setHost(forwardedHost);        &#125; else if (StringUtils.isNotBlank(hostHeader)) &#123;            reqInfo.setHost(hostHeader);        &#125; else &#123;            URL reqUrl = new URL(request.getRequestURL().toString());            reqInfo.setHost(reqUrl.getHost());        &#125;        // å¤„ç†è¯·æ±‚è·¯å¾„ã€æ¥æºé¡µã€å®¢æˆ·ç«¯IPã€æµè§ˆå™¨UAã€è®¾å¤‡ID        reqInfo.setPath(request.getPathInfo());        reqInfo.setReferer(request.getHeader(&quot;referer&quot;)); // ä»å“ªä¸ªé¡µé¢è·³è¿‡æ¥çš„        reqInfo.setClientIp(IpUtil.getClientIp(request)); // è·å–çœŸå®å®¢æˆ·ç«¯IPï¼ˆå…¼å®¹ä»£ç†ï¼‰        reqInfo.setUserAgent(request.getHeader(&quot;User-Agent&quot;)); // æµè§ˆå™¨/è®¾å¤‡ä¿¡æ¯        reqInfo.setDeviceId(getOrInitDeviceId(request, response)); // è®¾å¤‡å”¯ä¸€IDï¼ˆç»Ÿè®¡UVç”¨ï¼‰        stopWatch.stop();        // æ­¥éª¤4ï¼šåŒ…è£…POSTè¯·æ±‚ï¼Œè¯»å–è¯·æ±‚ä½“ï¼ˆJSONå‚æ•°ï¼‰        request = this.wrapperRequest(request, reqInfo);        // æ­¥éª¤5ï¼šåˆå§‹åŒ–ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œå­˜å…¥ä¸Šä¸‹æ–‡ï¼‰        stopWatch.start(&quot;ç™»å½•ç”¨æˆ·ä¿¡æ¯&quot;);        globalInitService.initLoginUser(reqInfo); // ä»Session/Tokenä¸­è·å–ç”¨æˆ·IDç­‰ä¿¡æ¯        stopWatch.stop();        // æ­¥éª¤6ï¼šæŠŠè¯·æ±‚ä¿¡æ¯å­˜å…¥çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼ˆåç»­ä¸šåŠ¡ä»£ç å¯ç›´æ¥è·å–ï¼‰        ReqInfoContext.addReqInfo(reqInfo);        // æ­¥éª¤7ï¼šå¼‚æ­¥ç»Ÿè®¡PV/UVï¼ˆä¸é˜»å¡è¯·æ±‚ï¼Œæå‡æ€§èƒ½ï¼‰        stopWatch.start(&quot;pv/uvç«™ç‚¹ç»Ÿè®¡&quot;);        AsyncUtil.execute(() -&gt; SpringUtil.getBean(SitemapServiceImpl.class).saveVisitInfo(reqInfo.getClientIp(), reqInfo.getPath()));        stopWatch.stop();        // æ­¥éª¤8ï¼šå“åº”å¤´è¿”å›traceIdï¼ˆå‰ç«¯å¯æ‹¿åˆ°è¿™ä¸ªIDï¼Œæ’æŸ¥é—®é¢˜æ—¶å’Œåç«¯æ—¥å¿—å¯¹åº”ï¼‰        stopWatch.start(&quot;å›å†™traceId&quot;);        response.setHeader(GLOBAL_TRACE_ID_HEADER, Optional.ofNullable(MdcUtil.getTraceId()).orElse(&quot;&quot;));        stopWatch.stop();    &#125; catch (Exception e) &#123;        log.error(&quot;init reqInfo error!&quot;, e);    &#125; finally &#123;        // å¼€å‘ç¯å¢ƒæ‰“å°å‚æ•°æ„å»ºçš„ç»†ç²’åº¦è€—æ—¶        if (!EnvUtil.isPro()) &#123;            log.info(&quot;&#123;&#125; -&gt; è¯·æ±‚æ„å»ºè€—æ—¶: \\n&#123;&#125;&quot;, request.getRequestURI(), stopWatch.prettyPrint(TimeUnit.MILLISECONDS));        &#125;    &#125;    return request;&#125;\n\ngetOrInitDeviceId()ï¼šç”Ÿæˆ &#x2F; è·å–è®¾å¤‡å”¯ä¸€ IDï¼ˆCookie å­˜å‚¨ï¼‰ï¼Œç”¨äºç»Ÿè®¡ UVï¼ˆç‹¬ç«‹è®¿å®¢ï¼‰\nwrapperRequest()ï¼šåŒ…è£… POST è¯·æ±‚ï¼Œè¯»å–è¯·æ±‚ä½“ï¼ˆJSON å‚æ•°ï¼‰å¹¶å­˜å…¥ reqInfoï¼Œæ–¹ä¾¿æ—¥å¿—è®°å½•\nAsyncUtil.execute()ï¼šå¼‚æ­¥æ‰§è¡Œ PV&#x2F;UV ç»Ÿè®¡ï¼Œé¿å…ç»Ÿè®¡æ“ä½œé˜»å¡è¯·æ±‚å“åº”\n\nbuildRequestLog()ï¼šæ„å»ºå¹¶è¾“å‡ºè¯·æ±‚æ—¥å¿—\n\n&#x3D;&#x3D;&gt; æŠŠè¯·æ±‚çš„æ ¸å¿ƒä¿¡æ¯ï¼ˆæ–¹æ³•ã€IPã€ç”¨æˆ· IDã€URLã€å‚æ•°ã€è€—æ—¶ï¼‰æ‹¼æ¥æˆæ—¥å¿—ï¼Œè¾“å‡ºåˆ°REQ_LOG\nprivate void buildRequestLog(ReqInfoContext.ReqInfo req, HttpServletRequest request, long costTime) &#123;    // é™æ€èµ„æº/æ— è¯·æ±‚ä¿¡æ¯ï¼Œä¸è®°å½•æ—¥å¿—    if (req == null || isStaticURI(request)) &#123;        return;    &#125;    StringBuilder msg = new StringBuilder();    // æ‹¼æ¥è¯·æ±‚æ–¹æ³•ï¼ˆGET/POSTï¼‰    msg.append(&quot;method=&quot;).append(request.getMethod()).append(&quot;; &quot;);    // æ‹¼æ¥æ¥æºé¡µï¼ˆRefererï¼‰    if (StringUtils.isNotBlank(req.getReferer())) &#123;        msg.append(&quot;referer=&quot;).append(URLDecoder.decode(req.getReferer())).append(&quot;; &quot;);    &#125;    // æ‹¼æ¥å®¢æˆ·ç«¯IPã€æµè§ˆå™¨UA    msg.append(&quot;remoteIp=&quot;).append(req.getClientIp());    msg.append(&quot;; agent=&quot;).append(req.getUserAgent());    // æ‹¼æ¥ç™»å½•ç”¨æˆ·IDï¼ˆå·²ç™»å½•æ‰æ˜¾ç¤ºï¼‰    if (req.getUserId() != null) &#123;        msg.append(&quot;; user=&quot;).append(req.getUserId());    &#125;    // æ‹¼æ¥è¯·æ±‚URI+å‚æ•°    msg.append(&quot;; uri=&quot;).append(request.getRequestURI());    if (StringUtils.isNotBlank(request.getQueryString())) &#123;        msg.append(&#x27;?&#x27;).append(URLDecoder.decode(request.getQueryString()));    &#125;    // æ‹¼æ¥POSTè¯·æ±‚ä½“ï¼ˆJSONå‚æ•°ï¼‰    msg.append(&quot;; payload=&quot;).append(req.getPayload());    // æ‹¼æ¥æ€»è€—æ—¶    msg.append(&quot;; cost=&quot;).append(costTime);    // è¾“å‡ºåˆ°ä¸“é—¨çš„è¯·æ±‚æ—¥å¿—    REQ_LOG.info(&quot;&#123;&#125;&quot;, msg);    // ä¿å­˜è¯·æ±‚è®¡æ•°ï¼ˆç»Ÿè®¡æ€»è¯·æ±‚æ•°ï¼‰    statisticsSettingService.saveRequestCount(req.getClientIp());&#125;\n\nä¼ å…¥çš„æ—¶å€™ä¹Ÿæ˜¯ä¼ å…¥request &#x3D;&#x3D;&gt; ç›´æ¥ä»requesté‡Œé¢å–æ—¥å¿—ä¿¡æ¯\n\nä¹Ÿå°±æ˜¯ä¸Šé¢è¿˜åŒ…å«äº†å¾ˆå¤šFilteråšçš„ï¼Œä½†æ˜¯å’Œæ—¥å¿—æ— å…³çš„åŠŸèƒ½\n\n\næ‰«ç›²ï¼š\nReqInfoContextï¼šçº¿ç¨‹çº§åˆ«çš„ä¸Šä¸‹æ–‡ï¼Œç”¨ThreadLocalå®ç°ï¼Œå­˜å½“å‰è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼Œåç»­Service&#x2F;DAOå±‚å¯ç›´æ¥è·å–ï¼ˆæ¯”å¦‚è·å–å½“å‰ç™»å½•ç”¨æˆ· IDï¼‰\nMDCï¼šæ—¥å¿—é“¾è·¯è¿½è¸ªå·¥å…·ï¼Œç»™æ¯ä¸ªè¯·æ±‚åŠ å”¯ä¸€traceIdï¼Œæ‰€æœ‰æ—¥å¿—éƒ½å¸¦è¿™ä¸ªIDï¼Œæ’æŸ¥é—®é¢˜æ—¶èƒ½å¿«é€Ÿå®šä½ä¸€ä¸ªè¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—\nStopWatchï¼šç»†ç²’åº¦è®¡æ—¶ï¼Œæ–¹ä¾¿å¼€å‘ &#x2F; æµ‹è¯•ç¯å¢ƒåˆ†æè¯·æ±‚è€—æ—¶ç“¶é¢ˆï¼ˆæ¯”å¦‚ â€œä¸šåŠ¡æ‰§è¡Œç”¨äº†100msï¼Œå‚æ•°æ„å»ºç”¨äº†5msâ€ï¼‰\nå¼‚æ­¥æ‰§è¡Œï¼šPV&#x2F;UVç»Ÿè®¡ç”¨AsyncUtilå¼‚æ­¥æ‰§è¡Œï¼Œé¿å…ç»Ÿè®¡æ“ä½œæ‹–æ…¢è¯·æ±‚å“åº”\n\n\nä¸Šä¸‹æ–‡ï¼šå½“å‰ä»£ç æ‰§è¡Œæ—¶çš„æ‰€æœ‰ç¯å¢ƒä¿¡æ¯çš„é›†åˆ1. è¯·æ±‚ä¸Šä¸‹æ–‡ï¼šå½“å‰HTTPè¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯çš„é›†åˆ\nåŒ…å«è¯·æ±‚ URLã€å®¢æˆ·ç«¯ IPã€ç™»å½•ç”¨æˆ· IDã€è®¾å¤‡ IDã€è¯·æ±‚å‚æ•°ã€traceIdç­‰ç­‰\n\n&#x3D;&#x3D;&gt; è®©æ•´ä¸ªè¯·æ±‚é“¾è·¯ï¼ˆFilter â†’ Controller â†’ Service â†’ DAOï¼‰éƒ½èƒ½ç›´æ¥è·å–è¿™äº›ä¿¡æ¯ï¼Œä¸ç”¨åœ¨æ¯ä¸ªæ–¹æ³•é‡Œéƒ½ä¼ å‚\næ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­çš„ ReqInfoContextï¼Œå°±æ˜¯æŠŠå½“å‰è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œåç»­ Service å±‚æƒ³è·å– â€œå½“å‰ç™»å½•ç”¨æˆ· IDâ€ï¼Œç›´æ¥ ReqInfoContext.getReqInfo().getUserId() å°±èƒ½æ‹¿åˆ°ï¼Œ**ä¸ç”¨åœ¨æ¯ä¸ª Service æ–¹æ³•é‡Œéƒ½åŠ ä¸ª userId å‚æ•°**\n2. çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼šå› ä¸ºwebæœåŠ¡å™¨æ˜¯å¤šçº¿ç¨‹çš„ï¼ˆæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰ï¼Œæ‰€ä»¥è¯·æ±‚ä¸Šä¸‹æ–‡å¿…é¡»æ˜¯çº¿ç¨‹éš”ç¦»çš„\nç”¨ThreadLocalå­˜å‚¨ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ï¼Œä¸ä¼šäº’ç›¸å¹²æ‰°\n\nå…¸å‹ä¾‹å­ï¼š\n\nReqInfoContextï¼šç”¨ ThreadLocal å­˜å½“å‰**è¯·æ±‚**çš„ä¿¡æ¯\nMdcUtilï¼šç”¨ ThreadLocal å­˜å½“å‰è¯·æ±‚çš„**traceId**ï¼Œä¿è¯æ¯ä¸ªçº¿ç¨‹çš„æ—¥å¿—éƒ½å¸¦è‡ªå·±çš„ traceId\n\nğŸŒŸä¸Šä¸‹æ–‡é”€æ¯ï¼šè¯·æ±‚ç»“æŸåï¼Œåœ¨ finally å—é‡Œè°ƒç”¨ ReqInfoContext.clear()ï¼Œæ¸…ç©ºå½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œé¿å…çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´æ•°æ®æ±¡æŸ“\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["webç»„ä»¶"]},{"title":"WEBä¸‰å¤§ç»„ä»¶ä¹‹servlet","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/WEB%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6%E4%B9%8Bservlet/","content":"åŸºæœ¬å®šä¹‰Servlet æ˜¯Java EEè§„èŒƒä¸­å®šä¹‰çš„è¯·æ±‚å¤„ç†åŸºç¡€ç»„ä»¶ï¼Œæ ¸å¿ƒä½œç”¨åªæœ‰ä¸€ä¸ªï¼š\næ¥æ”¶å‰ç«¯ HTTP è¯·æ±‚ï¼ˆå¦‚ GET&#x2F;POSTï¼‰ï¼Œè°ƒç”¨åç«¯ä¸šåŠ¡é€»è¾‘ï¼Œå†æŠŠå¤„ç†ç»“æœè¿”å›ç»™å‰ç«¯ã€‚\nå®ƒæ˜¯å‰ç«¯å’Œåç«¯ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ â€œä¸­è½¬ç«™â€ï¼Œæ˜¯ Web é¡¹ç›®çš„ â€œå…¥å£å±‚â€ã€‚\n\n\nServletï¼ˆLoginServletï¼‰ï¼šåªåš â€œè¯·æ±‚æ¥æ”¶â€ å’Œ â€œå“åº”è¿”å›â€ï¼Œä¸å…³å¿ƒ â€œæ€ä¹ˆæ ¡éªŒå¯†ç â€ï¼›\n\nä¸šåŠ¡é€»è¾‘ï¼ˆUserServiceï¼‰ï¼šåªåš â€œå¯†ç åŠ å¯†æ ¡éªŒã€ç”¨æˆ·çŠ¶æ€åˆ¤æ–­â€ï¼Œä¸å…³å¿ƒ â€œè¯·æ±‚ä»å“ªæ¥ã€å“åº”æ€ä¹ˆå›â€ï¼›\n\n\nä¸¤è€…åˆ†å·¥æ˜ç¡®ï¼šServlet ç®¡ â€œå’Œå‰ç«¯äº¤äº’â€ï¼Œä¸šåŠ¡é€»è¾‘ç®¡ â€œå®ç°å…·ä½“åŠŸèƒ½â€ã€‚\n\nä½¿ç”¨ä¸€èˆ¬æ˜¯ç»§æ‰¿HttpServletï¼Œç„¶åè¦†ç›–doGetã€doPostç­‰æ–¹æ³•\nè¯†åˆ«1. @WebServletåœ¨è‡ªå®šä¹‰çš„servletç±»ä¸Šæ·»åŠ @WebServlet\n// æ³¨è§£æŒ‡å®šè¿™ä¸ª Servlet å¤„ç†çš„ URL è·¯å¾„@WebServlet(urlPatterns = &quot;/annotation&quot;)public class AnnotationServlet extends HttpServlet &#123;    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;        String name = req.getParameter(&quot;name&quot;);        PrintWriter writer = resp.getWriter();        writer.write(&quot;[AnnotationServlet] welcome &quot; + name);        writer.flush();        writer.close();    &#125;&#125;\n\nurlPatterns = &quot;/annotation&quot;ï¼šè¡¨ç¤ºå½“ç”¨æˆ·è®¿é—® http://localhost:8080/annotation æ—¶ï¼Œè¿™ä¸ª Servlet ä¼šå¤„ç†è¯·æ±‚  &#x3D;&#x3D;&gt;  è¿™ä¸€æ­¥ç›¸å½“äºå‘Šè¯‰å®¹å™¨ï¼šâ€œè¿™ä¸ªç±»æ˜¯ Servletï¼Œè´Ÿè´£ /annotation è·¯å¾„çš„è¯·æ±‚â€\nç„¶ååœ¨springbootå¯åŠ¨ç±»ä¸Šæ·»åŠ @SpringBootApplication\n@SpringBootApplication// æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ @WebServletã€@WebFilterã€@WebListener æ³¨è§£@ServletComponentScanpublic class PaicodingApplication &#123;    public static void main(String[] args) &#123;        SpringApplication.run(PaicodingApplication.class, args);    &#125;&#125;\n\nSpring Boot é»˜è®¤ä¸ä¼šæ‰«æ @WebServlet æ³¨è§£ï¼Œå¿…é¡»åŠ è¿™ä¸ªæ³¨è§£ï¼ŒSpring æ‰ä¼šå»æ‰«æå¹¶æŠŠä½ çš„ AnnotationServlet æ³¨å†Œåˆ°å®¹å™¨é‡Œ &#x3D;&#x3D;&gt; ç›¸å½“äºå‘Šè¯‰ Springï¼šâ€œå¸®æˆ‘æŠŠæ‰€æœ‰å¸¦ @WebServlet çš„ç±»éƒ½æ³¨å†Œæˆ Servletâ€\n2. ServletRegistrationBeanå½“ä½ çš„ Servlet ç±»æ²¡æœ‰ä»»ä½•æ³¨è§£ï¼ˆæ¯”å¦‚ @WebServletï¼‰æ—¶ï¼ŒSpring Boot æ— æ³•è‡ªåŠ¨æ‰«æåˆ°å®ƒï¼Œè¿™æ—¶å°±éœ€è¦ç”¨ ServletRegistrationBean æ‰‹åŠ¨æŠŠå®ƒæ³¨å†Œåˆ°å®¹å™¨é‡Œ\nå…ˆå®šä¹‰æ— æ³¨è§£çš„Servletç±»\npublic class RegisterBeanServlet extends HttpServlet &#123;    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;        String name = req.getParameter(&quot;name&quot;);        PrintWriter writer = resp.getWriter();        writer.write(&quot;[RegisterBeanServlet] welcome &quot; + name);        writer.flush();        writer.close();    &#125;&#125;\n\nç„¶åç”¨ServletRegistrationBeanæ³¨å†Œservlet\n@Beanpublic ServletRegistrationBean servletBean() &#123;    // 1. åˆ›å»º Servlet æ³¨å†Œå¯¹è±¡    ServletRegistrationBean registrationBean = new ServletRegistrationBean();    // 2. é…ç½®è¯¥ Servlet å¤„ç†çš„ URL è·¯å¾„    registrationBean.addUrlMappings(&quot;/register&quot;);     // 3. ç»‘å®šè¦æ³¨å†Œçš„ Servlet å®ä¾‹    registrationBean.setServlet(new RegisterBeanServlet());    // 4. è¿”å›æ³¨å†Œå¯¹è±¡ï¼ŒSpring ä¼šè‡ªåŠ¨å®Œæˆæ³¨å†Œ    return registrationBean;&#125;\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["webç»„ä»¶"]},{"title":"MapStruct","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/MapStruct/","content":"åŸºæœ¬å®šä¹‰åœ¨xxxStructMapperæ¥å£ä¸­å®šä¹‰å¥½æ–¹æ³•åï¼ŒMapStructã€æ˜ å°„å™¨ã€‘å¯ä»¥åœ¨**ç¼–è¯‘**çš„æ—¶å€™ç”Ÿæˆç›¸åº”çš„å®ç°ç±»\n&#x3D;&#x3D;&gt; ä¸»è¦é’ˆå¯¹DOå¯¹è±¡è½¬æ¢æˆDTOå¯¹è±¡\nå¦‚æœæ²¡æœ‰MapStructï¼š\npublic static ArticleDTO toDto(ArticleDO articleDO) &#123;    if (articleDO == null) &#123;        return null;    &#125;    ArticleDTO articleDTO = new ArticleDTO();    articleDTO.setAuthor(articleDO.getUserId());    articleDTO.setArticleId(articleDO.getId());    articleDTO.setArticleType(articleDO.getArticleType());\t\t...    // è®¾ç½®ç±»ç›®id    articleDTO.setCategory(new CategoryDTO(articleDO.getCategoryId(), null));    return articleDTO;&#125;\n\nä½¿ç”¨MapStructå¯ä»¥ï¼š\n// MapStructçš„æ ¸å¿ƒæ³¨è§£ï¼Œæ ‡è®°è¿™ä¸ªæ¥å£ä¸ºä¸€ä¸ªæ˜ å°„å™¨ï¼Œè®©MapStructæ³¨è§£å¤„ç†å™¨ç¼–è¯‘æ—¶ä¸ºæ­¤æ¥å£ç”Ÿæˆå®ç°@Mapperpublic interface ArticleStructMapper &#123;  // Mappers.getMapperæ˜¯MapStructæä¾›çš„å·¥å…·æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸ä½¿ç”¨springå’Œå…¶ä»–ä¾èµ–æ³¨å…¥æ¡†æ¶æƒ…å†µä¸‹è·å–æ˜ å°„å™¨çš„å®ä¾‹ï¼ˆé™æ€å®ä¾‹ï¼‰  ArticleStructMapper INSTANCE = Mappers.getMapper æ˜¯(ArticleStructMapper.class);  ArticleDTO toDTO(ArticleDO do);&#125;\n\nè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ¥å£ArticleStructMapperï¼Œå°†DOå¯¹è±¡ ArticleDOè½¬æ¢æˆDTOå¯¹è±¡ ArticleDTO\nç”¨æ³•\nåœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ \nå®šä¹‰æ˜ å°„å™¨æ¥å£ï¼šä½¿ç”¨ @Mapping åšè½¬æ¢\n\n// ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„å®ç°@Mapperpublic interface ColumnStructMapper &#123;    ColumnStructMapper INSTANCE = Mappers.getMapper(ColumnStructMapper.class);    /**     * ColumnInfoDO to ColumnDTO     * @param columnInfoDO     * @return     */    // ä¸€äº›åç§°è½¬æ¢ï¼šsources æ˜¯å‚æ•°ï¼ˆæºï¼‰, target æ˜¯ç›®æ ‡    @Mapping(source = &quot;id&quot;, target = &quot;columnId&quot;)    @Mapping(source = &quot;columnName&quot;, target = &quot;column&quot;)    @Mapping(source = &quot;userId&quot;, target = &quot;author&quot;)    // ä¸€äº›ç±»å‹è½¬æ¢ï¼šDate è½¬ Longï¼ˆDateå¯¹è±¡è½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼‰  \t\t// - ç”¨expressionåšæ›´å¤æ‚çš„è½¬æ¢    @Mapping(target = &quot;publishTime&quot;, expression = &quot;java(columnInfoDO.getPublishTime().getTime())&quot;)    @Mapping(target = &quot;freeStartTime&quot;, expression = &quot;java(columnInfoDO.getFreeStartTime().getTime())&quot;)    @Mapping(target = &quot;freeEndTime&quot;, expression = &quot;java(columnInfoDO.getFreeEndTime().getTime())&quot;)    ColumnDTO infotoDto(ColumnInfoDO columnInfoDO);\t\t\t// - infotoDtosè½¬æ¢å¯¹è±¡åˆ—è¡¨    List&lt;ColumnDTO&gt; infotoDtos(List&lt;ColumnInfoDO&gt; columnInfoDOs);    @Mapping(source = &quot;column&quot;, target = &quot;columnName&quot;)    @Mapping(source = &quot;author&quot;, target = &quot;userId&quot;)    // Long è½¬ Date    @Mapping(target = &quot;freeStartTime&quot;, expression = &quot;java(new java.util.Date(req.getFreeStartTime()))&quot;)    @Mapping(target = &quot;freeEndTime&quot;, expression = &quot;java(new java.util.Date(req.getFreeEndTime()))&quot;)    ColumnInfoDO toDo(ColumnReq req);&#125;\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["ä¼˜é›…ç¼–ç¨‹"]},{"title":"WEBä¸‰å¤§ç»„ä»¶ä¹‹Listener","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/WEB%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6%E4%B9%8BListener/","content":"åŸºæœ¬å®šä¹‰Listeneræ˜¯webä¸­çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œèƒ½ç›‘å¬webåº”ç”¨ä¸­ç‰¹å®šäº‹ä»¶çš„å‘ç”Ÿï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨æ‰§è¡Œé¢„è®¾çš„é€»è¾‘ï¼Œå¹¶ä¸”ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç \næ¯”å¦‚ï¼š\n\nåº”ç”¨å¯åŠ¨çš„çš„æ—¶å€™åŠ è½½å…¨å±€é…ç½®ã€åˆå§‹åŒ–ç¼“å­˜\nç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™åˆå§‹åŒ–session\nè¯·æ±‚ç»“æŸçš„æ—¶å€™è®°å½•è®¿é—®æ—¥å¿—\n\nç‰¹ç‚¹ï¼š\n\nä¸ä¼šä¸»åŠ¨æ‰§è¡Œï¼Œåªæœ‰å½“å¯¹åº”äº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šè¢«å®¹å™¨è°ƒç”¨\nå¯ä»¥ç›‘å¬æ•´ä¸ªåº”ç”¨ã€ç”¨æˆ·ä¼šè¯æˆ–å•ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€‚åˆåšå…¨å±€ç›‘æ§å’Œåˆå§‹åŒ–\n\nå¸¸è§çš„Listenerç±»å‹Java Web è§„èŒƒå®šä¹‰äº†å¤šç§æ ‡å‡†ç›‘å¬å™¨ï¼ŒæŒ‰ç›‘å¬å¯¹è±¡å¯åˆ†ä¸ºå››ç±»ï¼š\n\n\n\nç±»å‹\nä½œç”¨\nå…¸å‹åœºæ™¯\n\n\n\nServletContextListener\nç›‘å¬ ServletContextï¼ˆåº”ç”¨å…¨å±€ä¸Šä¸‹æ–‡ï¼‰çš„åˆ›å»ºä¸é”€æ¯\nåº”ç”¨å¯åŠ¨æ—¶åŠ è½½é…ç½®ã€åˆå§‹åŒ–è¿æ¥æ± ï¼›åº”ç”¨å…³é—­æ—¶é‡Šæ”¾èµ„æº\n\n\nHttpSessionListener\nç›‘å¬ HttpSessionï¼ˆç”¨æˆ·ä¼šè¯ï¼‰çš„åˆ›å»ºä¸é”€æ¯\n**ç»Ÿè®¡åœ¨çº¿ç”¨æˆ·æ•°**ï¼›ç”¨æˆ·ç™»å½• &#x2F; é€€å‡ºæ—¶æ›´æ–°çŠ¶æ€\n\n\nServletRequestListener\nç›‘å¬ ServletRequestï¼ˆè¯·æ±‚ï¼‰çš„åˆ›å»ºä¸é”€æ¯\n**è®°å½•è¯·æ±‚è€—æ—¶**ï¼›ç»Ÿä¸€å¤„ç†è¯·æ±‚æ—¥å¿—\n\n\nAttributeListener\nç›‘å¬ ServletContext&#x2F;Session&#x2F;Request ä¸­å±æ€§çš„å¢åˆ æ”¹\nç›‘æ§å…¨å±€å±æ€§å˜åŒ–ï¼›å®ç°å±æ€§ç¼“å­˜åˆ·æ–°\n\n\nä½¿ç”¨ä½¿ç”¨@WebListeneræ ‡è®°æ˜¯ä¸€ä¸ªwebç›‘å¬å™¨\n// 1. å®šä¹‰ç›‘å¬å™¨ç±»@WebListener // æ ‡è®°è¿™æ˜¯ä¸€ä¸ª Web ç›‘å¬å™¨public class OnlineCountListener implements HttpSessionListener &#123;    // åœ¨çº¿äººæ•°è®¡æ•°å™¨    private int onlineCount = 0;    // 2. ç›‘å¬ Session åˆ›å»ºäº‹ä»¶ï¼ˆç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æ—¶è§¦å‘ï¼‰    @Override    public void sessionCreated(HttpSessionEvent se) &#123;        onlineCount++;        // æŠŠåœ¨çº¿äººæ•°å­˜å…¥å…¨å±€ä¸Šä¸‹æ–‡ï¼Œä¾›é¡µé¢æ˜¾ç¤º        se.getSession().getServletContext().setAttribute(&quot;onlineCount&quot;, onlineCount);        System.out.println(&quot;ç”¨æˆ·ä¸Šçº¿ï¼Œå½“å‰åœ¨çº¿äººæ•°ï¼š&quot; + onlineCount);    &#125;    // 3. ç›‘å¬ Session é”€æ¯äº‹ä»¶ï¼ˆç”¨æˆ·é€€å‡º/è¶…æ—¶åè§¦å‘ï¼‰    @Override    public void sessionDestroyed(HttpSessionEvent se) &#123;        onlineCount--;        se.getSession().getServletContext().setAttribute(&quot;onlineCount&quot;, onlineCount);        System.out.println(&quot;ç”¨æˆ·ä¸‹çº¿ï¼Œå½“å‰åœ¨çº¿äººæ•°ï¼š&quot; + onlineCount);    &#125;&#125;\n\nå¦‚æœä½¿ç”¨äº†@WebListeneræ³¨è§£ï¼Œè¦åœ¨springbootå¯åŠ¨ç±»ä¸Šæ·»åŠ  @ServletComponentScanï¼Œè®© Spring è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œç›‘å¬å™¨\n@SpringBootApplication@ServletComponentScan // æ‰«æ @WebListenerã€@WebServletã€@WebFilterpublic class Application &#123;    public static void main(String[] args) &#123;        SpringApplication.run(Application.class, args);    &#125;&#125;\n\nå¦‚æœç›‘å¬å™¨ç±»æ²¡æœ‰æ³¨è§£ï¼Œå¯ä»¥ç”¨ServletListenerRegistrationBeanæ‰‹åŠ¨æ³¨å†Œ\n@Beanpublic ServletListenerRegistrationBean&lt;OnlineCountListener&gt; onlineCountListener() &#123;    ServletListenerRegistrationBean&lt;OnlineCountListener&gt; registrationBean = new ServletListenerRegistrationBean&lt;&gt;();    registrationBean.setListener(new OnlineCountListener());    return registrationBean;&#125;\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["webç»„ä»¶"]},{"title":"Hello World","url":"/uncategorized/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n"},{"title":"redis å®ä¾‹","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/redis-%E5%AE%9E%E4%BE%8B/","content":"æ•´åˆredis\nåœ¨pom.xmlä¸­æ·»åŠ redisä¾èµ–\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œspringbootä½¿ç”¨lettuceä½œä¸ºredisè¿æ¥æ± ï¼Œå¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºoré”€æ¯è¿æ¥\n\nRedis è¿æ¥çš„å»ºç«‹å’Œé”€æ¯æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œã€‚è¿æ¥æ± çš„ä½œç”¨æ˜¯é¢„å…ˆåˆ›å»ºå¹¶ç®¡ç†ä¸€æ‰¹ Redis è¿æ¥ï¼Œéœ€è¦æ—¶ç›´æ¥ä»æ± é‡Œæ‹¿ï¼Œç”¨å®Œæ”¾å›ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯è¿æ¥ï¼Œä»è€Œå¤§å¹…æå‡æ€§èƒ½\n\n&lt;dependency&gt;    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;    &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;&lt;/dependency&gt;\n\nğŸŒŸ æ·»åŠ ä¾èµ–ï¼šLettuce çš„è¿æ¥æ± åŠŸèƒ½ä¾èµ–äº Apache Commons Pool2 è¿™ä¸ªå·¥å…·åº“å¦‚æœä¸æ·»åŠ è¿™ä¸ªä¾èµ–ï¼Œå³ä½¿åœ¨é…ç½®æ–‡ä»¶é‡Œå†™äº† lettuce.pool.enabled: trueï¼Œè¿æ¥æ± ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼ŒSpring Boot ä¼šç›´æ¥å¿½ç•¥ä½ çš„è¿æ¥æ± é…ç½®\n\nåœ¨application.yamlä¸­æ·»åŠ redisé…ç½®\n\nredis:  host: localhost  # Redis æœåŠ¡å™¨åœ°å€  port: 6379       # Redis ç«¯å£  password:        # Redis å¯†ç ï¼ˆå¦‚æœæ²¡æœ‰å¯ä»¥ç•™ç©ºï¼‰  lettuce: ## å¯é€‰    pool:      enabled: true      # å¼€å¯è¿æ¥æ±       max-active: 32     # è¿æ¥æ± æœ€å¤§æ´»è·ƒè¿æ¥æ•°ï¼ˆæœ€å¤šåŒæ—¶ç”¨32ä¸ªè¿æ¥ï¼‰      max-wait: 300ms    # å½“è¿æ¥æ± æ»¡äº†ï¼Œè·å–è¿æ¥çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆè¶…è¿‡300mså°±æŠ¥é”™ï¼‰      max-idle: 16       # è¿æ¥æ± æœ€å¤§ç©ºé—²è¿æ¥æ•°ï¼ˆæœ€å¤šä¿ç•™16ä¸ªç©ºé—²è¿æ¥ï¼‰      min-idle: 8        # è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°ï¼ˆè‡³å°‘ä¿ç•™8ä¸ªç©ºé—²è¿æ¥ï¼Œé¿å…é¢‘ç¹åˆ›å»ºï¼‰\n\n\nå¯åŠ¨redisæœåŠ¡\n\nredis-cli ping ## æ£€æŸ¥redisæœåŠ¡æ˜¯å¦æ­£ç¡®å®‰è£…å’Œè¿è¡Œredis-server ## å¯åŠ¨redisæœåŠ¡\n\né»˜è®¤ç«¯å£6379\n\nç¼–å†™redisæµ‹è¯•ç±»\n\n/** * RedisTemplate æ“ä½œ Redis çš„ç¤ºä¾‹æµ‹è¯•ç±» */@SpringBootTest(classes = QuickForumApplication.class) // å¯åŠ¨ Spring Boot æµ‹è¯•å®¹å™¨ï¼ŒæŒ‡å®šé¡¹ç›®å¯åŠ¨ç±»public class RedisTemplateDemo &#123;    // è‡ªåŠ¨æ³¨å…¥ Spring å®¹å™¨ä¸­çš„ é€šç”¨ å‹ RedisTemplateï¼ˆIoC ä¾èµ–æ³¨å…¥ï¼‰    // Key å’Œ Value éƒ½æ˜¯ Object ç±»å‹ï¼Œåº•å±‚ä¼šç”¨ JdkSerializationRedisSerializer åºåˆ—åŒ–    @Autowired    private RedisTemplate&lt;Object, Object&gt; redisTemplate;    // è‡ªåŠ¨æ³¨å…¥ Spring å®¹å™¨ä¸­çš„ å­—ç¬¦ä¸² ä¸“ç”¨ RedisTemplate    // Key å’Œ Value éƒ½æ˜¯ String ç±»å‹ï¼Œåº•å±‚ç”¨ StringRedisSerializerï¼ˆæ¨èæ“ä½œå­—ç¬¦ä¸²/åŸºæœ¬ç±»å‹æ—¶ä½¿ç”¨ï¼‰    @Autowired    private StringRedisTemplate stringRedisTemplate;    /**     * æµ‹è¯•å‘ Redis ä¸­å­˜å…¥æ•°æ®     * æ¶µç›– String ç±»å‹å’Œ List ç±»å‹çš„å†™å…¥æ“ä½œ     */    @Test    public void testPut() &#123;        // 1. æ“ä½œ Redis String ç±»å‹ï¼škey=&quot;itwanger&quot;ï¼Œvalue=&quot;æ²‰é»˜ç‹äºŒ&quot;        // opsForValue()ï¼šè·å– String ç±»å‹çš„æ“ä½œå™¨ï¼ˆRedis çš„ set å‘½ä»¤ï¼‰        redisTemplate.opsForValue().set(&quot;itwanger&quot;, &quot;æ²‰é»˜ç‹äºŒ&quot;);        // 2. æ“ä½œ Redis List ç±»å‹ï¼šå‘ key=&quot;girl&quot; çš„åˆ—è¡¨å³ä¾§ï¼ˆå°¾éƒ¨ï¼‰æ·»åŠ å…ƒç´         // opsForList()ï¼šè·å– List ç±»å‹çš„æ“ä½œå™¨        // rightPush()ï¼šRedis çš„ rpush å‘½ä»¤ï¼Œå‘åˆ—è¡¨å°¾éƒ¨æ·»åŠ å…ƒç´         stringRedisTemplate.opsForList().rightPush(&quot;girl&quot;, &quot;é™ˆæ¸…æ‰¬&quot;);        stringRedisTemplate.opsForList().rightPush(&quot;girl&quot;, &quot;å°è½¬ç²&quot;);        stringRedisTemplate.opsForList().rightPush(&quot;girl&quot;, &quot;èŒ¶èŠ±å¥³&quot;);    &#125;    /**     * æµ‹è¯•ä» Redis ä¸­è¯»å–æ•°æ®     * å¯¹åº” testPut() å­˜å…¥çš„æ•°æ®ï¼Œæ¼”ç¤º String å’Œ List ç±»å‹çš„è¯»å–     */    @Test    public void testGet() &#123;        // 1. è¯»å– String ç±»å‹æ•°æ®ï¼šæ ¹æ® key=&quot;itwanger&quot; è·å– value        // get()ï¼šRedis çš„ get å‘½ä»¤        Object value = redisTemplate.opsForValue().get(&quot;itwanger&quot;);        // è¾“å‡ºç»“æœï¼šæ²‰é»˜ç‹äºŒ        System.out.println(value);        // 2. è¯»å– List ç±»å‹æ•°æ®ï¼šè·å– key=&quot;girl&quot; çš„åˆ—è¡¨æ‰€æœ‰å…ƒç´         // range(key, start, end)ï¼šRedis çš„ lrange å‘½ä»¤ï¼Œ0 è¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ-1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼ˆå³æ‰€æœ‰å…ƒç´ ï¼‰        List&lt;String&gt; girls = stringRedisTemplate.opsForList().range(&quot;girl&quot;, 0, -1);        // è¾“å‡ºç»“æœï¼š[é™ˆæ¸…æ‰¬, å°è½¬ç², èŒ¶èŠ±å¥³]        System.out.println(girls);    &#125;&#125;\n\nRedisTemplateå’ŒStringRedisTemplateæ˜¯springbooté¢„å…ˆåˆå§‹åŒ–å¥½çš„redisè¿æ¥å·¥å‚ï¼Œå¯ä»¥å¿«é€Ÿå¯¹redisæ“ä½œã€‚\n\nRedisTemplateï¼šæ³›å‹ç±»ï¼Œå¯ä»¥æ“ä½œä»»æ„ç±»å‹æ•°æ®\nStringRedisTemplateï¼šåªèƒ½æ“ä½œå­—ç¬¦ä¸²ç±»å‹æ•°æ®\n\næ“ä½œrediså¦‚ä½•ä½¿ç”¨RedisTemplateå’ŒStringRedisTemplateæ“ä½œredisçš„å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å“ˆå¸Œã€é›†åˆã€æœ‰åºåˆ—è¡¨\n1. å­—ç¬¦ä¸²å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®\n@Autowiredprivate RedisTemplate&lt;String, Object&gt; redisTemplate;public void set(String key, Object value) &#123;    redisTemplate.opsForValue().set(key, value);&#125;public Object get(String key) &#123;    return redisTemplate.opsForValue().get(key);&#125;\n\nå…¶ä¸­opsForValue()è·å–rediså­—ç¬¦ä¸²æ“ä½œå¯¹è±¡\n\nset()ï¼šè®¾ç½®é”®å€¼å¯¹\nget()ï¼šè·å–é”®å¯¹åº”çš„å€¼\n\n\nredisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œç›®æ ‡æ˜¯å—ï¼Œé”®å€¼å¯¹æ˜¯å®ç°é«˜æ€§èƒ½çš„æœ‰æ•ˆé€‰æ‹©\n\nå¯ä»¥é€šè¿‡keyç›´æ¥å®šä½value\nä¸éœ€è¦ç»´æŠ¤è¡¨ç»“æ„ã€ç´¢å¼•ã€äº‹åŠ¡æ—¥å¿—ç­‰\n\nè¿™ä¸ªé”®å€¼å¯¹æ˜¯å¹¿ä¹‰çš„\n\nkeyæ°¸è¿œæ˜¯å­—ç¬¦ä¸²\nvalueå¯ä»¥æ˜¯stringã€Hashã€Listã€Setã€Zsetç­‰ç»“æ„\n\nå¯¹äºstringç±»å‹ä¸¾ä¾‹ï¼šæ¥å£ç¼“å­˜ï¼š\n\nkeyï¼šapi:user:info:123\nvalueï¼š&#123;&quot;id&quot;:123,&quot;name&quot;:&quot;å¼ ä¸‰&quot;&#125;\n\n2. åˆ—è¡¨ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²\n@Autowiredprivate StringRedisTemplate stringRedisTemplate;public void push(String key, String value) &#123;    stringRedisTemplate.opsForList().rightPush(key, value);&#125;public List&lt;String&gt; range(String key, int start, int end) &#123;    return stringRedisTemplate.opsForList().range(key, start, end);&#125;\n\nä½¿ç”¨opsForList()æ–¹æ³•è·å–redisåˆ—è¡¨æ“ä½œå¯¹è±¡\n\nrightPush()ï¼šå‘åˆ—è¡¨å³ä¾§æ·»åŠ å…ƒç´ \nrange()ï¼šè·å–åˆ—è¡¨æŒ‡å®šä¸‹è¡¨èŒƒå›´å†…çš„å…ƒç´ \n\n3. å“ˆå¸Œå¯ä»¥å­˜å‚¨å¤šä¸ªå­—æ®µå’Œå¯¹åº”çš„å€¼\n@Autowiredprivate RedisTemplate&lt;String, Object&gt; redisTemplate;public void hset(String key, String field, Object value) &#123;    redisTemplate.opsForHash().put(key, field, value);&#125;public Object hget(String key, String field) &#123;    return redisTemplate.opsForHash().get(key, field);&#125;\n\nä½¿ç”¨opsForHash()æ–¹æ³•è·å–rediså“ˆå¸Œæ“ä½œå¯¹è±¡\n\nput()ï¼šå‘å“ˆå¸Œä¸­æ·»åŠ å­—æ®µå’Œå¯¹åº”çš„å€¼\nget()ï¼šè·å–æŒ‡å®šå­—æ®µçš„å€¼\n\n4. é›†åˆæ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²\n@Autowiredprivate StringRedisTemplate stringRedisTemplate;public void sadd(String key, String value) &#123;    stringRedisTemplate.opsForSet().add(key, value);&#125;public Set&lt;String&gt; smembers(String key) &#123;    return stringRedisTemplate.opsForSet().members(key);&#125;\n\nä½¿ç”¨opsForSet()æ–¹æ³•è·å–rediså“ˆå¸Œæ“ä½œå¯¹è±¡\n\nadd()ï¼šå‘é›†åˆä¸­æ·»åŠ å…ƒç´ \nmembers()ï¼šè·å–é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ \n\n5. æœ‰åºé›†åˆæœ‰åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ªåˆ†å€¼ï¼Œå¯ä»¥æ ¹æ®åˆ†å€¼æ’åº\n@Autowiredprivate RedisTemplate&lt;String, Object&gt; redisTemplate;public void zadd(String key, String value, double score) &#123;    redisTemplate.opsForZSet().add(key, value, score);&#125;public Set&lt;Object&gt; zrange(String key, long start, long end) &#123;    return redisTemplate.opsForZSet().range(key, start, end);&#125;\n\nä½¿ç”¨opsForZset()æ–¹æ³•è·å–rediså“ˆå¸Œæ“ä½œå¯¹è±¡\n\nadd()ï¼šå‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ å’Œåˆ†å€¼\nrange()ï¼šè·å–åˆ—è¡¨æŒ‡å®šä¸‹æ ‡èŒƒå›´å†…çš„å…ƒç´ \n\næ³¨å…¥redisTemplate\næ ¸å¿ƒçŸ›ç›¾ï¼šé™æ€å·¥å…·ç±» vs Spring Bean\n\n\nRedisClient æ˜¯ä¸€ä¸ªé™æ€å·¥å…·ç±»ï¼ˆé‡Œé¢å…¨æ˜¯é™æ€æ–¹æ³•ï¼Œæ¯”å¦‚ hIncrã€hGetï¼‰\næ–¹ä¾¿åœ¨ä»»ä½•åœ°æ–¹ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦ä¾èµ–æ³¨å…¥\n\n\nRedisTemplate æ˜¯ Spring å®¹å™¨ç®¡ç†çš„ Bean\néœ€è¦é€šè¿‡ @Autowired ç­‰æ–¹å¼æ³¨å…¥ï¼Œä¸èƒ½ç›´æ¥åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨ã€‚\n\n\n\nå¦‚æœç›´æ¥åœ¨é™æ€æ–¹æ³•é‡Œ new RedisTemplate()ï¼Œä¼šä¸¢å¤± Spring è‡ªåŠ¨é…ç½®çš„è¿æ¥æ± ã€åºåˆ—åŒ–æ–¹å¼ç­‰ç‰¹æ€§ï¼Œæ‰€ä»¥å¿…é¡»æŠŠ Spring ç®¡ç†çš„ RedisTemplate äº¤ç»™é™æ€å·¥å…·ç±»ä½¿ç”¨\nå› æ­¤åšä¸€ä¸ªRedisClientç±»ï¼š\n// RedisClient ç±»private static RedisTemplate&lt;String, String&gt; template;public static void register(RedisTemplate&lt;String, String&gt; template) &#123;    RedisClient.template = template;&#125;\n\n// ForumCoreAutoConfig é…ç½®ç±»@Configuration@ComponentScan(basePackages = &quot;com.github.paicoding.forum.core&quot;)public class ForumCoreAutoConfig &#123;    public ForumCoreAutoConfig(RedisTemplate&lt;String, String&gt; redisTemplate) &#123;        RedisClient.register(redisTemplate);    &#125;&#125;\n\n\né™æ€å˜é‡æ¥æ”¶ Beanï¼šRedisClient ä¸­å®šä¹‰ä¸€ä¸ªé™æ€å˜é‡ templateï¼Œç”¨æ¥ä¿å­˜ Spring ç®¡ç†çš„ RedisTemplate å®ä¾‹ã€‚\né™æ€æ–¹æ³•æ³¨å†Œ Beanï¼šé€šè¿‡ register é™æ€æ–¹æ³•ï¼Œå°† Spring æ³¨å…¥çš„ RedisTemplate èµ‹å€¼ç»™é™æ€å˜é‡ã€‚\né…ç½®ç±»è§¦å‘æ³¨å†Œï¼šForumCoreAutoConfig ä½œä¸º Spring é…ç½®ç±»ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ Spring è‡ªåŠ¨æ³¨å…¥çš„ RedisTemplateï¼Œå¹¶è°ƒç”¨ RedisClient.register() å®Œæˆé™æ€æ³¨å†Œ\n\nå¥½å¤„ï¼š\n\nä¿æŒå·¥å…·ç±»çš„æ˜“ç”¨æ€§ï¼šä¸šåŠ¡ä»£ç å¯ä»¥ç›´æ¥ RedisClient.hIncr(...) è°ƒç”¨ï¼Œæ— éœ€ä¾èµ–æ³¨å…¥ï¼Œé™ä½äº†ä½¿ç”¨é—¨æ§›\nå¤ç”¨ Spring è‡ªåŠ¨é…ç½®ï¼šRedisTemplate ç”± Spring è‡ªåŠ¨åˆå§‹åŒ–å¹¶é…ç½®è¿æ¥æ± ã€åºåˆ—åŒ–æ–¹å¼ï¼Œé¿å…äº†é‡å¤é€ è½®å­\nå…¨å±€å”¯ä¸€å®ä¾‹ï¼šæ•´ä¸ªé¡¹ç›®åªæœ‰ä¸€ä¸ª RedisTemplate å®ä¾‹è¢«æ³¨å†Œåˆ° RedisClientï¼Œé¿å…äº†å¤šå®ä¾‹å¯¼è‡´çš„è¿æ¥æ± èµ„æºæµªè´¹\nè§£è€¦é…ç½®ä¸ä½¿ç”¨ï¼šForumCoreAutoConfig è´Ÿè´£æ³¨å†Œï¼ŒRedisClient è´Ÿè´£æä¾›æ“ä½œæ–¹æ³•ï¼ŒèŒè´£æ¸…æ™°ï¼Œç¬¦åˆã€Œå•ä¸€èŒè´£åŸåˆ™ã€\n\nä½¿ç”¨ï¼š\n/** * å°†å­—ç¬¦ä¸²ç±»å‹çš„å€¼ value å…³è”åˆ° keyï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ expireï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚ * @param key é”® * @param value å€¼ * @param expire è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ * @return å¦‚æœ SET æ“ä½œæˆåŠŸï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚ */public static Boolean setStrWithExpire(String key, String value, Long expire) &#123;    // ä½¿ç”¨ RedisTemplate å®ä¾‹æ‰§è¡Œ Redis å‘½ä»¤    return template.execute(new RedisCallback&lt;Boolean&gt;() &#123;        @Override        public Boolean doInRedis(RedisConnection redisConnection) throws DataAccessException &#123;            // è°ƒç”¨ RedisConnection å®ä¾‹çš„ setEx æ–¹æ³•ï¼Œå°† key-value å¯¹å­˜å‚¨åˆ° Redis ä¸­ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´            return redisConnection.setEx(keyBytes(key), expire, valBytes(value));        &#125;    &#125;);&#125;\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å®ä¾‹"]},{"title":"é‡æ–°å‘å¸ƒé—®é¢˜","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E2%80%9C%E9%87%8D%E6%96%B0%E5%8F%91%E5%B8%83%E2%80%9D%E9%97%AE%E9%A2%98/","content":"ä½¿ç”¨å…¨å±€å­—å…¸ä¸ºä»€ä¹ˆè¦ç”¨å…¨å±€å­—å…¸ï¼Ÿ\nå‡è®¾ä½ çš„æ–‡ç« è¡¨é‡Œé¢æœ‰ä¸ªstatuså­—æ®µç”¨æ¥è¡¨ç¤ºæ–‡ç« çŠ¶æ€ï¼Œ&#x3D;1è¡¨ç¤ºå·²å‘å¸ƒï¼Œ&#x3D;2è¡¨ç¤ºè‰ç¨¿ï¼Œ&#x3D;3è¡¨ç¤ºå·²åˆ é™¤\næ²¡æœ‰å…¨å±€å­—å…¸çš„è¯ï¼Œä½ è¦åœ¨ä»£ç é‡Œå†™æ­»æ˜ å°„å…³ç³»ï¼š\n// ç¡¬ç¼–ç ï¼š1=å·²å‘å¸ƒif (article.getStatus() == 1) &#123;    return &quot;å·²å‘å¸ƒ&quot;;&#125; else if (article.getStatus() == 2) &#123;    return &quot;è‰ç¨¿&quot;;&#125;\n\nå¦‚æœæ–°å¢ä¸€ä¸ªçŠ¶æ€4&#x3D;å®¡æ ¸ä¸­ï¼Œä½ å°±è¦ä¿®æ”¹ä»£ç ï¼Œé‡æ–°å‘å¸ƒæ‰èƒ½ç”Ÿæ•ˆï¼Œå¾ˆéº»çƒ¦\nä½†æ˜¯å¦‚æœæœ‰å…¨å±€å­—å…¸çš„è¯ï¼Œä»£ç å¯ä»¥ä»å­—å…¸è¡¨ä¸­åŠ¨æ€æŸ¥è¯¢æ˜ å°„å…³ç³»ï¼Œä¸éœ€è¦ç¡¬ç¼–ç \n// åŠ¨æ€ä»å­—å…¸è¡¨æŸ¥è¯¢çŠ¶æ€æè¿°public String getStatusDesc(Integer status) &#123;    return dictCommonMapper.getDescByTypeAndCode(&quot;article_status&quot;, status.toString());&#125;\n\nå› æ­¤ä¼˜ç‚¹ï¼š\n\nå‡å°‘ç¡¬ç¼–ç ï¼šæŠŠä¸šåŠ¡ä»£ç ï¼ˆçŠ¶æ€ã€ç±»å‹ã€æ€§åˆ«ç­‰ï¼‰ä»ä»£ç ä¸­å‰¥ç¦»ï¼Œè®©ä»£ç æ›´æ˜“äºç»´æŠ¤\né…ç½®çµæ´»ï¼šæ–°å¢ä¸šåŠ¡çš„æ—¶å€™åªéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç å’Œé‡å¯æœåŠ¡ &#x3D;&#x3D;&gt; åœ¨é¢‘ç¹å˜åŠ¨çš„ä¸šåŠ¡åœºæ™¯å¾ˆæœ‰ç”¨\nç»Ÿä¸€ç®¡ç†ï¼šä¸šåŠ¡ä»£ç éƒ½åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œæ–¹ä¾¿é…ç½®\nå¤šç«¯ä¸€è‡´ï¼šå‰åç«¯ã€appéƒ½åœ¨è¡¨ä¸­å–æè¿°ï¼Œé¿å…äº†å„ç«¯ç¡¬ç¼–ç å¯¼è‡´çš„å±•ç¤ºä¸ä¸€è‡´\n\nåº“è¡¨è®¾è®¡dict_commonid - ä¸»é”®type_code - å­—å…¸ç±»å‹dict_code - å­—å…¸ç±»å‹çš„å€¼ç¼–ç dict_desc - å­—å…¸ç±»å‹çš„å€¼æè¿°sort_no - æ’åºç¼–å·remark - å¤‡æ³¨create_time - åˆ›å»ºæ—¶é—´update_time - æ›´æ–°æ—¶é—´\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å¼€å‘","é¢å‘å®é™…"]},{"title":"ä¸ªäººåšå®¢æ­å»º","url":"/%E4%BB%93%E5%BA%93/%E9%A1%B9%E7%9B%AE/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/","content":"ä½¿ç”¨hexoï¼ˆnode.jså·¥å…·ï¼‰+GitHub pagesé™æ€ç½‘é¡µï¼Œæ”¯æŒmarkdown\nç½‘é¡µé“¾æ¥ï¼šhttps://chuyunnn.github.io/\nå¸¸ç”¨æŒ‡ä»¤æ–°å»ºæ–‡ä»¶ï¼šï¼ˆæ–‡ä»¶åˆ†ç±»éœ€æ±‚ï¼‰\nhexo new post &quot;xx/xx&quot; ## eg:&quot;papers/æˆ‘çš„æ–°è®ºæ–‡&quot;\n\nå‘å¸ƒæ–‡ç« ï¼š\nhexo clean ## æ¸…ç†ç¼“å­˜hexo g  ## generateç”Ÿæˆé™æ€ç½‘é¡µhexo d ## deployéƒ¨ç½²åˆ°githubä¸­ï¼ˆæ¨é€åˆ°githubä»“åº“ï¼‰\n\næœ‰å»¶è¿Ÿï¼Œæœ‰çš„æ–°å»ºæ–‡ç« ã€æ›´æ–°å†…å®¹ä¸ä¼šä¸€æ¬¡åŒæ­¥ä¸Šå»\næœ¬åœ°é¢„è§ˆï¼š\nhexo cleanhexo s\n\nåˆ·æ–° localhost:4000ï¼Œç¡®è®¤æ’ç‰ˆã€å›¾ç‰‡éƒ½æ²¡æœ‰é—®é¢˜ã€‚\nåŸŸåæƒ³è¦ä¸ªäººåŸŸåå¯ä»¥ï¼š\n\nä¹°åŸŸåï¼šå»é˜¿é‡Œã€è…¾è®¯æˆ– Namecheap ä¹°ä¸€ä¸ª\nè®¾ç½® DNSï¼šåœ¨åŸŸååå°è®¾ç½®ä¸€æ¡ CNAME è®°å½•ï¼ŒæŒ‡å‘ ä½ çš„ç”¨æˆ·å.github.io\nGitHub è®¾ç½®ï¼šåœ¨ä»“åº“çš„ Settings -&gt; Pages é‡Œï¼Œå¡«å†™ä½ çš„ Custom Domain\n\nå›¾ç‰‡å¤„ç†","categories":["ä»“åº“","é¡¹ç›®"],"tags":["åšå®¢","é¡¹ç›®","æ­å»º"]},{"title":"äº‹åŠ¡åŠä½¿ç”¨å®ä¾‹","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E4%BA%8B%E5%8A%A1%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B/","content":"ACIDç‰¹æ€§\nåŸå­æ€§ Atomicityï¼šäº‹åŠ¡åŒ…å«çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»š\nä¸€è‡´æ€§ Consistencyï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®åº“çš„çŠ¶æ€ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚åº“å­˜ã€é‡‘é¢æ€»é¢ä¸€è‡´\néš”ç¦»å‹ Isolationï¼šå¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œäº‹åŠ¡ç›´æ¥ä¸ä¼šäº’ç›¸å¹²æ‰°\næŒä¹…æ€§ Durabilityï¼šäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œæ•°æ®åº“ä¸­æ•°æ®æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“æ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±äº‹åŠ¡æ“ä½œ\n\næ•°æ®åº“äº‹åŠ¡çš„å®ç°åŸç†MySQLçš„InnoDBå¼•æ“ï¼š\n\nä½¿ç”¨redo logï¼ˆé‡åšæ—¥å¿—ï¼‰ä¿è¯æŒä¹…æ€§\nä½¿ç”¨undo logï¼ˆå›æ»šæ—¥å¿—ï¼‰ä¿è¯åŸå­æ€§\nä½¿ç”¨é”æœºåˆ¶ã€MVCCä¿è¯éš”ç¦»æ€§\n\n&#x3D;&#x3D;&gt; éš”ç¦»çº§åˆ«ï¼šrepeatable read å¯é‡å¤è¯»\næ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«\nè¯»æœªæäº¤ read uncommittedï¼šåˆ«äººæ”¹äº†ä¸€åŠä¹Ÿèƒ½çœ‹åˆ° &#x3D;&#x3D;&gt; è„è¯»\nè¯»å·²æäº¤ read committedï¼šè¯»å·²ç»å‘å¸ƒçš„å†…å®¹ &#x3D;&#x3D;&gt; ä¸å¯é‡å¤è¯»ï¼ˆä¸å¯ç”¨äºè¦æ±‚æ•°æ®ä¸€è‡´æ€§åœºæ™¯ è¡Œé”ï¼‰\nå¯é‡å¤è¯» repeatable readï¼ˆSQLé»˜è®¤ï¼‰ï¼šè¯»åˆ°ä»»åŠ¡å¼€å§‹æ—¶è¯»å¿«ç…§ &#x3D;&#x3D;&gt; å¹»è¯»ï¼ˆé—´éš™é”ï¼‰\nä¸²è¡ŒåŒ– serializableï¼šç‹¬å é”ï¼Œå…¶ä½™äº‹åŠ¡ä¸å¯è¯»ä¸å¯å†™ï¼Œæ’é˜Ÿç­‰å¾…å½“å‰é£Ÿç‰©ç»“æŸï¼ˆè¡¨é”ï¼Œé¿å…æ‰€æœ‰å¹¶å‘é—®é¢˜ï¼Œæ€§èƒ½å·®ï¼‰\n\nredisäº‹åŠ¡å°†å¤šä¸ªå‘½ä»¤è¯·æ±‚æ‰“åŒ…ï¼Œé¡ºåºæ‰§è¡Œæ‰“åŒ…çš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸è¢«æ‰“æ–­\nMULTI --&gt; (æ”¾æŒ‡ä»¤) ... --&gt; EXEC(å¼€å§‹æ‰§è¡Œ)\n\n\nä¸æ”¯æŒåŸå­æ€§ï¼šredisäº‹åŠ¡ä¸æ”¯æŒå›æ»šï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡ä¸­çš„æŒ‡ä»¤å¦‚æœæ²¡æœ‰å‡ºé”™çš„è¯æ˜¯ä¼šæ­£å¸¸æ‰§è¡Œæ‰çš„\n\nä¸æ”¯æŒæŒä¹…æ€§ï¼šredisçš„æŒä¹…åŒ–æ–¹å¼ä¸ºï¼šå¿«ç…§RDB+AOFã€‚å…¶ä¸­AOFæ¯”RDBçš„å®æ—¶æ€§æ›´å¥½ï¼Œæœ‰ä¸‰ç§æ¨¡å¼\n\nalwaysï¼šæ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹éƒ½åŒæ­¥AOF\n\neverysecï¼šæ¯ç§’åŒæ­¥ä¸€æ¬¡\n\nnoï¼šè®©æ“ä½œç³»ç»Ÿå†³å®šå¤šé•¿æ—¶é—´åŒæ­¥ä¸€æ¬¡ï¼ˆä¸€èˆ¬ä¸º30ç§’ï¼‰\nè¿™é‡Œeverysecã€noéƒ½å­˜åœ¨æ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸æ”¯æŒæŒä¹…æ€§\n\n\n\n\nè§£å†³redisäº‹åŠ¡çš„ç¼ºé™·æ–¹æ³•ï¼šä½¿ç”¨Luaè„šæœ¬ &#x3D;&#x3D;&gt; å®ƒæ˜¯åŸå­æ“ä½œï¼Œä¹Ÿå°±æ˜¯æ‰¹é‡æ‰§è¡Œå¤šæ¡rediså‘½ä»¤ï¼Œä¸€æ®µLuaè„šæœ¬æ‰§è¡Œæ—¶ä¸ä¼šæœ‰å…¶ä½™è„šæœ¬&#x2F;rediså‘½ä»¤åŒæ—¶æ‰§è¡Œã€‚ä½†æ˜¯Luaè„šæœ¬ä¹Ÿä¸èƒ½å›æ»šï¼ˆåŸå­æ“ä½œ !&#x3D; åŸå­æ€§ï¼‰\nä½¿ç”¨å£°æ˜å¼äº‹åŠ¡ï¼šä½¿ç”¨@Transactional/** * ä¿å­˜æ–‡ç« ï¼Œå½“articleIdå­˜åœ¨æ—¶ï¼Œè¡¨ç¤ºæ›´æ–°è®°å½•ï¼›ä¸å­˜åœ¨æ—¶ï¼Œè¡¨ç¤ºæ’å…¥ */// æŒ‡å®šæ‰€æœ‰å¼‚å¸¸ï¼ˆåŒ…æ‹¬è¿è¡Œæ—¶å¼‚å¸¸å’Œæ£€æŸ¥å‹å¼‚å¸¸ï¼‰éƒ½ä¼šè§¦å‘å›æ»š@Transactional(rollbackFor = Exception.class)@Overridepublic Long saveArticle(ArticlePostReq req, Long author) &#123;    ArticleDO article = ArticleConverter.toArticleDo(req, author);    String content = imageService.mdImgReplace(req.getContent());    if (NumUtil.nullOrZero(req.getArticleId())) &#123;        return insertArticle(article, content, req.getTagIds());    &#125; else &#123;        return updateArticle(article, content, req.getTagIds());    &#125;&#125;\n\n1. ä¿®é¥°ä½ç½®\næ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£\nç±»ä¸Šæ·»åŠ æ³¨è§£ï¼šç±»ä¸­æ‰€æœ‰**å…¬å…±æ–¹æ³•**éƒ½æ”¯æŒäº‹åŠ¡\n\n2. å‚æ•°\n\n\nå±æ€§å\nç±»å‹\næ ¸å¿ƒä½œç”¨\né»˜è®¤å€¼\nå¸¸ç”¨åœºæ™¯\n\n\n\nvalue&#x2F;transactionManager\nString\næŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨\nå®¹å™¨é»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨\nå¤šæ•°æ®æº &#x2F; å¤šäº‹åŠ¡ç®¡ç†å™¨åœºæ™¯\n\n\npropagation\nPropagation\näº‹åŠ¡ä¼ æ’­è¡Œä¸º &#x3D;&#x3D;&gt;  å½“ä¸€ä¸ªæœ‰äº‹åŠ¡çš„æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œäº‹åŠ¡è¯¥å¦‚ä½•ä¼ é€’\nREQUIRED\nåµŒå¥—è°ƒç”¨æ—¶æ§åˆ¶äº‹åŠ¡åˆ›å»ºè§„åˆ™\n\n\nisolation\nIsolation\näº‹åŠ¡éš”ç¦»çº§åˆ«\nDEFAULTï¼ˆæ•°æ®åº“é»˜è®¤ï¼‰\nè§£å†³è„è¯» &#x2F; ä¸å¯é‡å¤è¯» &#x2F; å¹»è¯»\n\n\ntimeout\nint\näº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰\n-1ï¼ˆæ°¸ä¸è¶…æ—¶ï¼‰\né˜²æ­¢é•¿äº‹åŠ¡å ç”¨èµ„æº\n\n\nreadOnly\nboolean\næ˜¯å¦åªè¯»äº‹åŠ¡\nfalse\nçº¯æŸ¥è¯¢æ“ä½œï¼Œä¼˜åŒ–æ€§èƒ½\n\n\nrollbackFor\nClass&lt;? extends Throwable&gt;[]\næŒ‡å®šè§¦å‘å›æ»šçš„å¼‚å¸¸ç±»å‹\nä»…è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰\néœ€è¦æ•è·æ£€æŸ¥å‹å¼‚å¸¸å¹¶å›æ»š\n\n\nrollbackForClassName\nString[]\nåŒä¸Šï¼ˆå¼‚å¸¸ç±»åï¼‰\n-\nä¸æƒ³å¼•å…¥å¼‚å¸¸ç±»æ—¶ä½¿ç”¨\n\n\nnoRollbackFor\nClass&lt;? extends Throwable&gt;[]\næŒ‡å®šä¸å›æ»šçš„å¼‚å¸¸ç±»å‹\n-\nç‰¹å®šå¼‚å¸¸ä¸å¸Œæœ›å›æ»š\n\n\nnoRollbackForClassName\nString[]\nåŒä¸Šï¼ˆå¼‚å¸¸ç±»åï¼‰\n-\n-\n\n\nğŸŒŸæ³¨æ„rollbackForï¼šä¸æŒ‡å®šå…·ä½“å¼‚å¸¸æ—¶ï¼Œé»˜è®¤åªæœ‰**è¿è¡Œæ—¶å¼‚å¸¸**æ‰ä¼šè§¦å‘äº‹åŠ¡å›æ»š\n\n\nè¿è¡Œæ—¶å¼‚å¸¸ï¼šä»£ç é€»è¾‘é—®é¢˜ï¼Œä¸éœ€è¦try-catchæ˜¾ç¤ºæ•è·\n\næ£€æŸ¥å‹å¼‚å¸¸ï¼šå¤–éƒ¨èµ„æºå¼‚å¸¸ï¼ˆIOã€ç½‘ç»œã€æ•°æ®åº“è¿æ¥ï¼‰ï¼Œéœ€è¦try-catchæ˜¾ç¤ºæ•è·æˆ–å£°æ˜æŠ›å‡ºthrows\n\n\n\nç¼–ç¨‹å¼äº‹åŠ¡å£°æ˜å¼äº‹åŠ¡çš„çº¦æŸï¼šæœ€å°ç²’åº¦ä¸ºæ–¹æ³•çº§åˆ«ï¼Œå¦‚æœæƒ³åœ¨**æ–¹æ³•å†…éƒ¨åˆ†ä»£ç å—**è¿›è¡Œäº‹åŠ¡çº¦æŸï¼Œå¯ç”¨ç¼–ç¨‹å¼äº‹åŠ¡\n&#x3D;&#x3D;&gt; æ¯”å¦‚è¦ä¸‹è½½å›¾ç‰‡å¹¶ä¸Šä¼ è¿™ç§è€—æ—¶æ“ä½œä¸éœ€è¦åŠ å…¥äº‹åŠ¡\nğŸŒŸ ä½¿ç”¨äº‹åŠ¡æ—¶ç‰¢è®°ï¼šæœ€å°èŒƒå›´ä½¿ç”¨åŸåˆ™\n1. æ³¨å…¥ TransactionTemplate@Autowiredprivate TransactionTemplate transactionTemplate;\n\n\nTransactionTemplate æ˜¯Springæä¾›çš„ç¼–ç¨‹å¼äº‹åŠ¡å·¥å…·ç±»ï¼Œå°è£…äº†äº‹åŠ¡çš„å¼€å¯ã€æäº¤ã€å›æ»šç­‰æ“ä½œ\n\nå®ƒä¼šè‡ªåŠ¨ä½¿ç”¨ Spring å®¹å™¨ä¸­çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®\n\n\n2. ç”¨ transactionTemplate.execute() åŒ…è£¹ä¸šåŠ¡é€»è¾‘// 2. å°†é€»è¾‘æ”¹é€ ä¸ºç¼–ç¨‹å¼äº‹åŠ¡@Overridepublic Long saveArticle(ArticlePostReq req, Long author) &#123;    ArticleDO article = ArticleConverter.toArticleDo(req, author);    String content = imageService.mdImgReplace(req.getContent());    return transactionTemplate.execute(new TransactionCallback&lt;Long&gt;() &#123;        @Override        public Long doInTransaction(TransactionStatus status) &#123;            if (NumUtil.nullOrZero(req.getArticleId())) &#123;                return insertArticle(article, content, req.getTagIds());            &#125; else &#123;                return updateArticle(article, content, req.getTagIds());            &#125;        &#125;    &#125;);&#125;\n\n\nexecute() æ–¹æ³•æ¥æ”¶ä¸€ä¸ª TransactionCallback å›è°ƒï¼Œå›è°ƒä¸­çš„ doInTransaction() æ–¹æ³•ä¼šåœ¨äº‹åŠ¡å†…æ‰§è¡Œ\n\nå¦‚æœ doInTransaction() æ­£å¸¸è¿”å›ï¼ŒSpring ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼›å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œä¼šè‡ªåŠ¨å›æ»šäº‹åŠ¡\n\nTransactionStatus å¯¹è±¡å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡ï¼ˆæ¯”å¦‚ status.setRollbackOnly() å¼ºåˆ¶å›æ»šï¼‰\n\n\nğŸ“‹ ä½¿ç”¨æ³¨æ„äº‹é¡¹\nä½¿ç”¨åœºæ™¯\n\né¦–å…ˆç¡®å®šäº‹åŠ¡çš„ä½¿ç”¨åœºæ™¯ï¼Œä»€ä¹ˆæ—¶å€™è¦ç”¨äº‹åŠ¡ï¼Œä¸è¦çç”¨ï¼Œå°±æ¯”å¦‚éå¸¸ç®€å•çš„åªè¯»åœºæ™¯ï¼Œé‚£ä¹ˆä»€ä¹ˆåœºæ™¯éœ€è¦ç”¨å‘¢ï¼Ÿ\n\nå½“ä¸€ä¸ªåŸºç¡€çš„ä¸šåŠ¡å•å…ƒ (å¦‚å¯¹å¤–æä¾›çš„ http æ¥å£ï¼Œservice æ–¹æ³•)ï¼Œå­˜åœ¨ &gt;&#x3D;2 çš„æ•°æ®å˜æ›´æ—¶ï¼Œå°±éœ€è¦è€ƒè™‘ï¼Œéƒ¨åˆ†æ›´æ–°æˆåŠŸï¼Œéƒ¨åˆ†æ›´æ–°å¤±è´¥æ˜¯å¦ä¼šå‡ºç°è„æ•°æ®ï¼Œæ˜¯å¦ä¼šæœ‰å½±å“ã€‚\nè‹¥æ˜¯ï¼šåˆ™å¯ä»¥è€ƒè™‘å¼•å…¥äº‹åŠ¡\nè‹¥å¦ï¼šä¸å»ºè®®åŠ å…¥äº‹åŠ¡\n\n\nåªæœ‰ä¸€ä¸ªæ•°æ®å˜æ›´ï¼Œä½†æ˜¯åç»­æœ‰å¼ºä¾èµ–è¿™ä¸ªæ•°æ®çš„é€»è¾‘ï¼Œä¹Ÿéœ€è¦åŠ å…¥äº‹åŠ¡\næ¯”å¦‚æ¥åˆ°æ”¯ä»˜æˆåŠŸæ¶ˆæ¯ï¼Œæˆ‘è¦åšä¸€ä¸ªæ ¡å¯¹çš„åå°ä»»åŠ¡\næˆ‘çš„ä¸šåŠ¡é€»è¾‘æ˜¯ï¼šå…ˆè°ƒç”¨ç¬¬ä¸‰æ–¹æ ¡éªŒæ˜¯å¦å±å®ï¼Œç„¶åæ›´æ–°æœ¬åœ°çŠ¶æ€ä¸ºæˆåŠŸï¼Œæœ€å MQ æ–¹å¼é€šçŸ¥è®¢å•çŠ¶æ€å˜æ›´\næ­¤æ—¶æˆ‘ä»¬éœ€è¦å°†ç¬¬äºŒæ­¥æ•°æ®å˜æ›´ä¸ç¬¬ä¸‰æ­¥æ¶ˆæ¯é€šçŸ¥æ”¾åœ¨äº‹åŠ¡ä¸­ï¼Œåªè¦é€šçŸ¥å¤±è´¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸æ›´æ–°æœ¬åœ°çŠ¶æ€ï¼Œé¿å…å‡ºç°æˆ‘ä»¬æ ¡éªŒæˆåŠŸäº†ï¼Œä½†æ˜¯è®¢å•è¿˜æ˜¯æœªæ”¯ä»˜\n\n\n\n\nä½¿ç”¨å»ºè®®\n\n\né¿å…å¤§äº‹åŠ¡ï¼Œåªåœ¨éœ€è¦çš„åœ°æ–¹åŠ äº‹åŠ¡\næ³¨æ„åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯\næ‰€æœ‰çš„æ“ä½œï¼Œèµ°ç´¢å¼•ï¼Œé¿å…å‡ºç°é”è¡¨\nå‡å°‘èŒƒå›´ã€å¤§æ‰¹é‡çš„æ•°æ®å¤„ç†åœºæ™¯\nå¦‚æœä¸šåŠ¡æ”¯æ’‘ï¼Œå¯ä»¥é™ä½éš”ç¦»çº§åˆ«ï¼Œä¸€æ˜¯å‡å°‘éš”ç¦»çº§åˆ«å¸¦æ¥çš„é™„åŠ æˆæœ¬ï¼ŒäºŒåˆ™æ˜¯å¯ä»¥é¿å…æŸäº›åœºæ™¯ä¸‹çš„æ­»é”\n\nhttps://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/101-jdbctemplate-transaction\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å®ä¾‹"]},{"title":"ä¼˜é›…ç¼–ç¨‹ä¹‹Lombok","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E4%BC%98%E9%9B%85%E7%BC%96%E7%A8%8B%E4%B9%8BLombok/","content":"Lombokå¯ä»¥é€šè¿‡æ³¨è§£çš„å½¢å¼ç®€åŒ–javaä»£ç \næ¯”å¦‚ï¼šé€šè¿‡@Getterã€@Setteræ³¨è§£ï¼Œåœ¨**ç¼–è¯‘**ï¼ˆä¸åœ¨æºç ä¸­ï¼‰æ—¶è‡ªåŠ¨ä¸ºjavabeanå±æ€§ç”Ÿæˆgetterã€setteræ–¹æ³•ï¼Œè¿˜å¯ä»¥ç”Ÿæˆæ„é€ æ–¹æ³•ã€equalsæ–¹æ³•ã€hashCodeæ–¹æ³•ã€toStringæ–¹æ³•\né›†æˆSpringboot2.1xç‰ˆæœ¬åä¸éœ€è¦æ˜¾ç¤ºæ·»åŠ lombokä¾èµ–äº†ï¼Œæ–°ç‰ˆçš„intellijIDEAä¹Ÿå†…ç½®äº†lombokæ’ä»¶ï¼Œä¸ç”¨å®‰è£…\nå¸¸ç”¨æ³¨è§£@Getter &#x2F; @Setterclass CmowerLombok &#123;  @Getter @Setter private int age;  @Getter private String name;  @Setter private BigDecimal money;&#125;@Getter @Setterclass CmowerLombok &#123;  private int age;  private String name;  private BigDecimal money;&#125;\n\n@ToStringå¯ä»¥æ–¹ä¾¿çš„æ‰“å°æ—¥å¿—\n@ToStringclass CmowerLombok &#123;  private int age;  private String name;  private BigDecimal money;    /*  \tåç¼–è¯‘å†…å®¹ä¸ºï¼š\t\tpublic String toString() &#123;\t\treturn &quot;CmowerLombok(age=&quot; + this.age + &quot;, name=&quot; + this.name + &quot;, money=&quot; + this.money + &quot;)&quot;;\t\t&#125;  */&#125;\n\n@Dataæ­¤æ³¨è§£å¯ä»¥ç”Ÿæˆgetter/setterã€equalsã€hashCodeã€toStringï¼Œæ€»å’Œé€‰é¡¹\n@Dataclass CmowerLombok &#123;\tprivate int age;  private String name;  private BigDecimal money;&#125;\n\n/** * ä½œç”¨ï¼šåˆ¤æ–­å¦ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å½“å‰ç±»ï¼ˆæˆ–å…¶å­ç±»ï¼‰çš„å®ä¾‹ï¼Œé¿å…çˆ¶ç±»ä¸å­ç±»ä¹‹é—´çš„ equals é€»è¾‘æ··ä¹± */protected boolean canEqual(Object other) &#123;    // åˆ¤æ–­ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦æ˜¯ CmowerLombok ç±»çš„å®ä¾‹    return other instanceof CmowerLombok;&#125;/** * hashCode æ–¹æ³•ç”¨äºç”Ÿæˆå¯¹è±¡çš„å“ˆå¸Œç  * åœ¨ HashMapã€HashSet ç­‰é›†åˆä¸­ï¼Œå“ˆå¸Œç ç”¨äºå¿«é€Ÿå®šä½å¯¹è±¡ */public int hashCode() &#123;    // è¿™é‡Œçš„ PRIME å˜é‡åæ˜¯ Lombok ç”Ÿæˆæ—¶çš„å ä½ç¬¦ï¼Œå®é™…å€¼ä¸º 59ï¼ˆä»£ç ä¸­ç›´æ¥ç”¨ 59 è®¡ç®—ï¼‰    int PRIME = true;    // å“ˆå¸Œç åˆå§‹å€¼ä¸º 1    int result = 1;    // åŸºäº age å±æ€§è®¡ç®—å“ˆå¸Œç ï¼šæ¯æ¬¡ä¹˜ä»¥è´¨æ•° 59ï¼Œå†åŠ ä¸Šå±æ€§çš„å“ˆå¸Œå€¼    // è´¨æ•°å¯ä»¥å‡å°‘å“ˆå¸Œå†²çªçš„æ¦‚ç‡    int result = result * 59 + this.getAge();    // å¤„ç† name å±æ€§ï¼šå¦‚æœä¸º nullï¼Œç”¨ 43 ä½œä¸ºé»˜è®¤å“ˆå¸Œå€¼ï¼›å¦åˆ™ç”¨ name çš„å“ˆå¸Œå€¼    Object $name = this.getName();    result = result * 59 + ($name == null ? 43 : $name.hashCode());    // å¤„ç† money å±æ€§ï¼šåŒæ ·çš„é€»è¾‘ï¼Œnull æ—¶ç”¨ 43    Object $money = this.getMoney();    result = result * 59 + ($money == null ? 43 : $money.hashCode());    // è¿”å›æœ€ç»ˆè®¡ç®—çš„å“ˆå¸Œç     return result;&#125;\n\n@Slf4jè‡ªåŠ¨ç”Ÿæˆæ—¥å¿—å¯¹è±¡ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„æ—¥å¿—æ–¹å¼é€‰æ‹©ä¸åŒçš„æ³¨è§£\nSlf4jé€‚é…å¤šç§å®ç°\nimport lombok.extern.slf4j.Slf4j;@Slf4jpublic class Log4jDemo &#123;    public static void main(String[] args) &#123;      \t// ç›´æ¥ç”¨ log å¯¹è±¡å³å¯        log.info(&quot;level:&#123;&#125;&quot;, &quot;info&quot;);        log.warn(&quot;level:&#123;&#125;&quot;, &quot;warn&quot;);        log.error(&quot;level:&#123;&#125;&quot;, &quot;error&quot;);    &#125;&#125;  /*  \t æ‰‹åŠ¨åˆ›å»ºæ—¥å¿—å¯¹è±¡    private static final Logger log = LoggerFactory.getLogger(Log4jDemo.class);  */ \n\n@Builderä½¿ç”¨å»ºé€ è€…æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡**é“¾å¼è°ƒç”¨çš„æ–¹å¼æ¥å¯¹å¯¹è±¡èµ‹å€¼**äº†\n@Builder@ToStringpublic class BuilderDemo &#123;    private Long id;    private String name;    private Integer age;    public static void main(String[] args) &#123;        BuilderDemo demo = BuilderDemo.builder().age(18).name(&quot;æ²‰é»˜ç‹äºŒ&quot;).build();        System.out.println(demo);    &#125;&#125;\n\nå¤„ç†æµç¨‹\njavac å¯¹æºä»£ç è¿›è¡Œåˆ†æï¼Œç”Ÿæˆä¸€æ£µæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰\njavac ç¼–è¯‘è¿‡ç¨‹ä¸­è°ƒç”¨å®ç°äº† JSR 269 çš„ Lombok ç¨‹åº\nLombok å¯¹ AST è¿›è¡Œå¤„ç†ï¼Œæ‰¾åˆ° Lombok æ³¨è§£æ‰€åœ¨ç±»å¯¹åº”çš„è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥è¯­æ³•æ ‘ï¼Œå¢åŠ  Lombok æ³¨è§£å®šä¹‰çš„ç›¸åº”æ ‘èŠ‚ç‚¹\njavac ä½¿ç”¨ä¿®æ”¹åçš„æŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["ä¼˜é›…ç¼–ç¨‹","Lombok"]},{"title":"å…¨å±€å¼‚å¸¸å¤„ç†","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/","content":"ä½¿ç”¨HandlerExceptionResolver&#x2F;ControllerAdviceæ–¹æ¡ˆè¿›è¡Œå…¨å±€å¼‚å¸¸å¤„ç†å®ä¾‹\næ§åˆ¶å°è¾“å‡ºï¼š\nERROR ...ForumExceptionHandler.buildTastMsg(ForumExceptionHandler.java:xx)\n\nè¿™é‡ŒForumExceptionHandlerå°±æ˜¯ç”¨æ¥åšå…¨å±€å¼‚å¸¸å¤„ç†çš„ï¼Œæ˜¯HandlerExceptionResolveræ¥å£çš„å®ç°ç±»\nHandlerExceptionResolverspringæä¾›çš„ä¸€ç§å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†æ§åˆ¶å™¨å¼•å‘çš„å¼‚å¸¸\nä½¿ç”¨ï¼šåˆ›å»ºä¸€ä¸ªå®ç°æ¥å£çš„ç±»ï¼Œåœ¨ç±»ä¸­å®šä¹‰å¦‚ä½•å¤„ç†å¼‚å¸¸ï¼ˆForumExceptionHandlerï¼‰\nå®è·µä¸­ï¼Œé‡åˆ°å¼‚å¸¸æ—¶ä¼šæ ¹æ®è¯·æ±‚çš„ç±»å‹ï¼ˆæ¥å£è¿˜æ˜¯é¡µé¢ï¼‰è¿”å›ä¸åŒçš„ç»“æœ\nè¿™é‡Œåˆ†ä¸ºä¸¤ç§å¼‚å¸¸å¤„ç†åœºæ™¯ï¼šRESTæ¥å£è¯·æ±‚å¼‚å¸¸ã€æ™®é€šé¡µé¢è¯·æ±‚å¼‚å¸¸\n1. RESTæ¥å£è¯·æ±‚å¼‚å¸¸ï¼ˆå‰åç«¯åˆ†ç¦»æ¥å£ï¼‰å°±æ˜¯ç”¨æˆ·è°ƒç”¨ä¸€ä¸ªæ¥å£ï¼ˆå‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼‰ï¼Œåç«¯è¿”å›çš„æ˜¯JSONæ ¼å¼çš„é”™è¯¯ä¿¡æ¯ï¼Œä¸æ˜¯ç½‘é¡µï¼Œç”¨äºå‰ç«¯å¤„ç†\n\nå“åº”ï¼šåç«¯ç»™å‰ç«¯çš„å›ä¿¡ï¼ŒåŒ…å«\n\nçŠ¶æ€ç ï¼šæ¯”å¦‚200 - æˆåŠŸï¼Œ404 - æ‰¾ä¸åˆ°ï¼Œ500 - æœåŠ¡å™¨å‡ºé”™\nå“åº”å¤´ï¼šæ ¼å¼ï¼ˆJSONè¿˜æ˜¯HTMLï¼‰ã€ç¼–ç æ–¹å¼\nå“åº”ä½“ï¼šå®é™…å†…å®¹ï¼ˆJSONæ•°æ®ã€HTMLé¡µé¢ä»£ç ï¼‰\n\nè§†å›¾å¯¹è±¡ModelAndViewï¼šç”¨æ¥å‘Šè¯‰ Spring MVC è¦æ¸²æŸ“å“ªä¸ªé¡µé¢ï¼ˆè§†å›¾ï¼‰ï¼Œä»¥åŠå¾€é¡µé¢é‡Œå¡ä»€ä¹ˆæ•°æ®ï¼ˆæ¨¡å‹ï¼‰\n\nModelï¼šå°±æ˜¯è¦ä¼ ç»™é¡µé¢çš„æ•°æ®ï¼ˆæ¯”å¦‚é”™è¯¯ç ã€é”™è¯¯æç¤ºï¼‰\nViewï¼šå°±æ˜¯è¦æ˜¾ç¤ºçš„é¡µé¢æ¨¡æ¿ï¼ˆæ¯”å¦‚ error/404.htmlï¼‰\n\nåœ¨æ™®é€šé¡µé¢å¼‚å¸¸ä¸­éœ€è¦æ¸²æŸ“ä¸€ä¸ªé”™è¯¯é¡µé¢\n\næµç¨‹ï¼š\n\nåˆ¤æ–­å“åº”æ˜¯å¦å·²ç»æäº¤ï¼šå¦‚æœæ˜¯å°±è¿”å›ä¸€ä¸ªç©ºçš„ModelAndViewï¼Œä¸å†å¤„ç†\nå¦‚æœå“åº”æ²¡æœ‰æäº¤ï¼Œå°±æ¸…ç©ºä¹‹å‰çš„å“åº”å†…å®¹ï¼Œè®¾ç½®å“åº”ç±»å‹ä¸ºapplication&#x2F;json\næŠŠé”™è¯¯ä¿¡æ¯å†™æˆJSONè¾“å‡ºï¼šç”¨ response.getWriter() æŠŠé”™è¯¯çŠ¶æ€å¯¹è±¡ï¼ˆæ¯”å¦‚ errStatus é‡Œçš„é”™è¯¯ç ã€é”™è¯¯æç¤ºï¼‰è½¬æˆ JSON å­—ç¬¦ä¸²ï¼Œå†™ç»™å‰ç«¯\nè¿”å›ç©ºçš„ModelAndViewï¼šå› ä¸ºå·²ç»æ‰‹åŠ¨æŠŠJSONå†™å›å“åº”äº†ï¼Œæ‰€ä»¥è¿”å›ç©ºçš„è§†å›¾å¯¹è±¡ï¼Œå‘Šè¯‰Spring MVCä¸éœ€è¦å†æ¸²æŸ“é¡µé¢\n\n2. æ™®é€šé¡µé¢è¯·æ±‚å¼‚å¸¸ï¼ˆç›´æ¥è®¿é—®ç½‘é¡µï¼‰æä¾›å‹å¥½é”™è¯¯é¡µé¢è€Œä¸æ˜¯JSONä»£ç \næµç¨‹ï¼š\n\nè·å–é”™è¯¯é¡µé¢çš„è§†å›¾åç§°ï¼šæ ¹æ®é”™è¯¯çŠ¶æ€ï¼ˆ404&#x2F;500ï¼‰æ‰¾åˆ°å¯¹åº”çš„é”™è¯¯é¡µé¢æ¨¡æ¿ï¼ˆerror&#x2F;404.html)\nåˆ›å»ºModelAndViewå¯¹è±¡ï¼šè§†å›¾åç§°ä¸ºåˆšæ‰¾åˆ°çš„é”™è¯¯é¡µé¢æ¨¡æ¿\nè®¾ç½®å“åº”ç±»å‹ä¸ºHTML\nå¾€ ModelAndView é‡Œå¡é”™è¯¯ä¿¡æ¯ï¼šæŠŠ**é”™è¯¯ç ã€é”™è¯¯æç¤º**ç­‰ä¿¡æ¯æ”¾åˆ° ModelAndView é‡Œï¼Œè¿™æ ·é”™è¯¯é¡µé¢æ¨¡æ¿å°±èƒ½æ‹¿åˆ°è¿™äº›æ•°æ®å¹¶æ˜¾ç¤ºå‡ºæ¥\nè¿”å› ModelAndViewï¼šSpring MVC ä¼šæ ¹æ®è¿™ä¸ªå¯¹è±¡æ¸²æŸ“å‡ºé”™è¯¯é¡µé¢ï¼Œè¿”å›ç»™æµè§ˆå™¨ã€‚\n\n@ControllerAdviceæ˜¯springMVCæä¾›çš„å…¨å±€å¼‚å¸¸å¤„ç†æ³¨è§£ï¼Œå¯ä»¥æ‹¦æˆªæ‰€æœ‰**@Controller å’Œ @RestController æŠ›å‡ºçš„å¼‚å¸¸**ï¼Œå¹¶ç»Ÿä¸€å¤„ç†ï¼Œé¿å…åœ¨æ¯ä¸ªæ¥å£é‡Œé‡å¤å†™ try-catch\næ³¨æ„ï¼š\n\n**@ControllerAdvice**ï¼šæ ‡è®°è¿™æ˜¯ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œä¼šæ‹¦æˆªæ‰€æœ‰æ§åˆ¶å™¨çš„å¼‚å¸¸\n**@ExceptionHandler**ï¼šæŒ‡å®šè¦å¤„ç†çš„å¼‚å¸¸ç±»å‹ï¼ˆæ¯”å¦‚ ForumException.classã€RuntimeException.classï¼‰\n\n\nå…ˆå®šä¹‰åŸºç¡€ç±»ï¼šå¼‚å¸¸ç¾å‰§ã€è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ã€ç»Ÿä¸€å“åº”å¯¹è±¡\n\n// å¼‚å¸¸æšä¸¾ ==&gt; å¯ä»¥å®šä¹‰ä¸€äº›ä¸šåŠ¡å¼‚å¸¸ä»£ç public enum StatusEnum &#123;    SUCCESS(200, &quot;æ“ä½œæˆåŠŸ&quot;),    RECORDS_NOT_EXISTS(404, &quot;è®°å½•ä¸å­˜åœ¨&quot;),    UNEXPECT_ERROR(500, &quot;ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•&quot;);    private final int code;    private final String msg;    StatusEnum(int code, String msg) &#123;        this.code = code;        this.msg = msg;    &#125;    public int getCode() &#123; return code; &#125;    public String getMsg() &#123; return msg; &#125;&#125;// è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸public class ForumException extends RuntimeException &#123;    private final Status status;    public ForumException(StatusEnum statusEnum) &#123;        this.status = Status.newStatus(statusEnum, null);    &#125;    public ForumException(StatusEnum statusEnum, String detail) &#123;        this.status = Status.newStatus(statusEnum, detail);    &#125;    public Status getStatus() &#123; return status; &#125;&#125;// ç»Ÿä¸€å“åº”å¯¹è±¡public class Status &#123;    private int code;    private String msg;    public static Status newStatus(StatusEnum enumType, String detail) &#123;        Status status = new Status();        status.code = enumType.getCode();        status.msg = detail == null ? enumType.getMsg() : enumType.getMsg() + &quot;ï¼š&quot; + detail;        return status;    &#125;    // getter/setter    public int getCode() &#123; return code; &#125;    public void setCode(int code) &#123; this.code = code; &#125;    public String getMsg() &#123; return msg; &#125;    public void setMsg(String msg) &#123; this.msg = msg; &#125;&#125;\n\n\nå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼šå¯ä»¥ç”¨@ControllerAdviceæ³¨è§£æ ‡è®°ï¼Œé…åˆ@ExceptionHandlerå¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸\n\nimport org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletResponse;import java.io.IOException;// åªè¦åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç±»ä¸ŠåŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼ŒSpringå°±ä¼šè‡ªåŠ¨æ‰«æå¹¶æŠŠå®ƒæ³¨å†Œä¸ºå…¨å±€å¼‚å¸¸å¤„ç†çš„Bean@ControllerAdvicepublic class GlobalExceptionHandler &#123;    // å¤„ç† REST æ¥å£å¼‚å¸¸ï¼ˆè¿”å› JSONï¼‰    @ExceptionHandler(value = &#123;ForumException.class, RuntimeException.class&#125;)    public ModelAndView handleApiException(Exception ex, HttpServletResponse response) throws IOException &#123;        Status status = buildToastMsg(ex);        // åˆ¤æ–­æ˜¯å¦æ˜¯ AJAX/REST è¯·æ±‚ï¼ˆå¯ä»¥æ ¹æ®è¯·æ±‚å¤´æˆ– URL å‰ç¼€åˆ¤æ–­ï¼‰        if (isRestRequest(response)) &#123;            // é‡ç½®å“åº”ï¼Œè¿”å› JSON            response.reset();            response.setContentType(&quot;application/json;charset=UTF-8&quot;);            response.getWriter().write(&quot;&#123;\\&quot;code\\&quot;:&quot; + status.getCode() + &quot;,\\&quot;msg\\&quot;:\\&quot;&quot; + status.getMsg() + &quot;\\&quot;&#125;&quot;);            // è¿”å›ç©ºçš„ ModelAndViewï¼Œå‘Šè¯‰ Spring MVC ä¸éœ€è¦æ¸²æŸ“é¡µé¢            return new ModelAndView();        &#125; else &#123;            // æ™®é€šé¡µé¢è¯·æ±‚ï¼Œè¿”å›é”™è¯¯é¡µé¢            ModelAndView mv = new ModelAndView(&quot;error/error&quot;);            mv.addObject(&quot;status&quot;, status);            return mv;        &#125;    &#125;    // å¼‚å¸¸åˆ†ç±»å¤„ç†ï¼šä½¿ç”¨istanceofåˆ¤æ–­å±äºä»€ä¹ˆå¼‚å¸¸    private Status buildToastMsg(Exception ex) &#123;        if (ex instanceof ForumException) &#123;            return ((ForumException) ex).getStatus();        &#125; else &#123;            return Status.newStatus(StatusEnum.UNEXPECT_ERROR, ex.getMessage());        &#125;    &#125;    // åˆ¤æ–­æ˜¯å¦æ˜¯ REST æ¥å£è¯·æ±‚ï¼ˆè¿™é‡Œç®€åŒ–ä¸ºåˆ¤æ–­è¯·æ±‚å¤´é‡Œæ˜¯å¦æœ‰ Accept: application/jsonï¼‰    private boolean isRestRequest(HttpServletResponse response) &#123;        // å®é™…é¡¹ç›®ä¸­å¯ä»¥æ ¹æ®è¯·æ±‚å¤´ã€URL å‰ç¼€ï¼ˆå¦‚ /api/ï¼‰ç­‰åˆ¤æ–­        return response.getContentType() != null &amp;&amp; response.getContentType().contains(&quot;application/json&quot;);    &#125;&#125;\n\nä½¿ç”¨ï¼š\n@RestControllerpublic class TestController &#123;    // æµ‹è¯• REST æ¥å£å¼‚å¸¸    @GetMapping(&quot;/api/article/&#123;id&#125;&quot;)    public String getArticle(Long id) &#123;        if (id == 999) &#123;            // æ­£å¸¸æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸å³å¯ï¼Œ@ControllerAdviceä¼šè‡ªåŠ¨æ‹¦æˆªå¤„ç†            throw new ForumException(StatusEnum.RECORDS_NOT_EXISTS, &quot;æ–‡ç« ID=999ä¸å­˜åœ¨&quot;);        &#125;        return &quot;æ–‡ç« å†…å®¹&quot;;    &#125;    // æµ‹è¯•æ™®é€šé¡µé¢è¯·æ±‚å¼‚å¸¸    @GetMapping(&quot;/article/&#123;id&#125;&quot;)    public String getArticlePage(Long id) &#123;        if (id == 999) &#123;            throw new ForumException(StatusEnum.RECORDS_NOT_EXISTS, &quot;æ–‡ç« ID=999ä¸å­˜åœ¨&quot;);        &#125;        return &quot;article&quot;; // è¿”å›é¡µé¢è§†å›¾    &#125;&#125;\n\nåŒºåˆ«\nHandlerExceptionResolverï¼šç”¨æ¥å£å¤„ç†å¼‚å¸¸ï¼Œå¯ä»¥ç¼–å†™ä»»ä½•å¤„ç†é€»è¾‘ï¼Œä½†æ˜¯å’ŒSpring MVCç»„ä»¶é›†æˆä¸å¤Ÿç´§å¯†ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ é…ç½®\n@ControllerAdviceï¼šå®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»çš„æ³¨è§£ï¼Œå¯ä»¥ä½¿ç”¨@ExceptionHandleræ³¨è§£æ¥å¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼ˆéœ€è¦é…åˆä½¿ç”¨ï¼‰ã€‚è¿™ç§æ–¹æ³•æ›´å®¹æ˜“å³æˆï¼Œä½†æ˜¯é€»è¾‘å¯èƒ½æ²¡é‚£ä¹ˆçµæ´»\n\nå¯ä»¥å…±å­˜ï¼Œ@ControllerAdviceä¼˜å…ˆçº§æ›´é«˜ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å¼‚å¸¸å¤„ç†"]},{"title":"åç«¯æ˜¯å¦‚ä½•è¿”å›JSON/XMLçš„","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%94%E5%9B%9EJSON-XML%E7%9A%84/","content":"è¿”å›æ–‡æœ¬æ•°æ®\ncontrollerä¸Šæ·»åŠ @RestControlleræ³¨è§£ï¼šç›´æ¥è¿”å›json\nå¦‚æœcontrolleræ³¨è§£æ˜¯@Controllerï¼Œå¯ä»¥æ·»åŠ @ResponseBodyæ³¨è§£å®ç°è¿”å›json\né€šè¿‡HttpServletResponseæ–¹æ³•å°†è¿”å›æ•°æ®æ‰‹åŠ¨å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚æ¯”å¦‚å‰é¢å…¨å±€å¼‚å¸¸å¤„ç†åŒæ—¶æ”¯æŒè¿”å›é¡µé¢+jsonæ•°æ®ä¸¤ç§æ–¹å¼ï¼Œåœ¨å…¨å±€å¼‚å¸¸å¤„ç†ä¸­å¯ä»¥è¿›è¡Œåˆ†æ¡ä»¶è¾“å‡º\n\nè¿”å›ç½‘é¡µç½‘é¡µå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§æ–‡æœ¬ï¼Œè¿”å›ç½‘é¡µæ›´å‡†ç¡®çš„è¯´æ³•æ˜¯è¿”å›æ¸²æŸ“è§†å›¾ã€‚\næ¥å£å®ç°ï¼šControlleerä¸Šçš„æ³¨è§£æ˜¯@Controllerï¼Œæ²¡æœ‰@RestControllerï¼Œè¿”å›ä¸€ä¸ªç½‘é¡µæ¨¡æ¿çš„ç›¸å¯¹è·¯å¾„ï¼ˆstringï¼‰\n@Controller // è¡¨ç¤ºå¤„ç†é¡µé¢è¯·æ±‚public class IndexController extends BaseViewController &#123;    @Autowired    private IndexRecommendHelper indexRecommendHelper;    @GetMapping(path = &#123;&quot;/&quot;, &quot;&quot;, &quot;/index&quot;, &quot;/login&quot;&#125;)  \t// æ–¹æ³•å‚æ•°è¯´æ˜ï¼š    //    - Model modelï¼šç”¨äºå¾€é¡µé¢ä¼ é€’æ•°æ®ï¼ˆç›¸å½“äºå‰ç«¯çš„å˜é‡ï¼‰    //    - HttpServletRequest requestï¼šè·å–è¯·æ±‚ç›¸å…³ä¿¡æ¯ï¼ˆæ¯”å¦‚è¯·æ±‚å‚æ•°ï¼‰    public String index(Model model, HttpServletRequest request) &#123;        String activeTab = request.getParameter(&quot;category&quot;); // ä»è¯·æ±‚å‚æ•°ä¸­è·å– &quot;category&quot; å‚æ•°å€¼      \t//è°ƒç”¨åŠ©æ‰‹ç±»çš„æ–¹æ³•ï¼Œæ ¹æ®æ¿€æ´»æ ‡ç­¾é¡µæ„å»ºé¦–é¡µæ‰€éœ€çš„æ‰€æœ‰æ•°æ®ï¼ˆæ–‡ç« åˆ—è¡¨ã€åˆ†ç±»ã€æ¨èå†…å®¹ç­‰ï¼‰        //    IndexVo æ˜¯ä¸€ä¸ªæ•°æ®å°è£…ç±»ï¼Œé‡Œé¢åŒ…å«é¦–é¡µå±•ç¤ºéœ€è¦çš„æ‰€æœ‰å­—æ®µ        IndexVo vo = indexRecommendHelper.buildIndexVo(activeTab);      \t//å°†å°è£…å¥½çš„é¦–é¡µæ•°æ®å­˜å…¥Modelï¼Œé¡µé¢å¯ä»¥é€šè¿‡ &quot;vo&quot; è¿™ä¸ªå˜é‡è·å–æ•°æ®        //    æ¯”å¦‚é¡µé¢ä¸­å¯ä»¥ç”¨ $&#123;vo.articleList&#125; æ‹¿åˆ°æ–‡ç« åˆ—è¡¨        model.addAttribute(&quot;vo&quot;, vo);        return &quot;views/home/index&quot;; // Spring MVCä¼šæ¸²æŸ“è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™æµè§ˆå™¨    &#125;&#125;\n\nè¿”å›XMLå¯ä»¥å®ç°ä¸€ä¸ªrestæœåŠ¡\n@RestController@RequestMapping(path = &quot;xml&quot;)public class XmlParamsRest &#123;    @PostMapping(path = &quot;show&quot;, consumes = &#123;MediaType.APPLICATION_XML_VALUE&#125;,            produces = MediaType.APPLICATION_XML_VALUE)    public XmlRes show(@RequestBody XmlBean bean) &#123;        System.out.println(bean);        XmlRes res = new XmlRes();        res.setCode(0);        res.setMsg(&quot;success&quot;);        res.setData(bean.toString());        return res;    &#125;&#125;\n\n\n@RestControllerï¼šè¿”å›çš„ä¸æ˜¯è§†å›¾\n@PostMappingæ³¨è§£ä¸­çš„ consumes å’Œ produceså‚æ•°ï¼ŒæŒ‡å®šäº†â€application&#x2F;xmlâ€ï¼Œè¡¨ç¤ºæ¥æ”¶å’Œè¿”å›çš„éƒ½æ˜¯xmlæ–‡æ¡£\n@RequestBodyæ˜¯ç”¨æ¥å‘Šè¯‰ Spring MVCï¼šæŠŠæ•´ä¸ª HTTP è¯·æ±‚ä½“ï¼ˆBodyï¼‰çš„å†…å®¹ï¼Œè½¬æ¢æˆä½ æŒ‡å®šçš„ Java å¯¹è±¡ï¼ˆè¿™é‡Œæ˜¯ XmlBeanï¼‰ã€‚XML å‚æ•°æ˜¯æ”¾åœ¨è¯·æ±‚ä½“é‡Œçš„ï¼Œå¦‚æœä¸åŠ è¿™ä¸ªæ³¨è§£ï¼ŒSpring MVC æ ¹æœ¬ä¸ä¼šå»è§£æè¯·æ±‚ä½“é‡Œçš„ XML å†…å®¹ï¼Œè‡ªç„¶å°±æ— æ³•ç»™ XmlBean èµ‹å€¼ &#x3D;&#x3D;&gt; è¿™é‡Œæ˜¯æ¥æ”¶å‚æ•°\n\n\n@RestControllerï¼šç®¡å‡ºï¼Œä¹Ÿå°±æ˜¯è¿”å›å“åº”\n@RequestBodyï¼šç®¡è¿›ï¼Œä¹Ÿå°±æ˜¯æ¥å—å‚æ•°\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["è¿”å›","å‰åç«¯äº¤äº’","JSON","XML"]},{"title":"å®šæ—¶ä»»åŠ¡","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/","content":"å®šæ—¶ä»»åŠ¡å°±æ˜¯è®©ç³»ç»Ÿåœ¨æŒ‡å®šçš„æ—¶é—´æˆ–æŒ‰ç…§ä¸€å®šçš„å‘¨æœŸè‡ªåŠ¨æ‰§è¡ŒæŸä¸ªä»»åŠ¡ï¼Œä¸éœ€è¦äººå·¥è§¦å‘\n\næ¯”å¦‚æ¯å¤©å‡Œæ™¨è‡ªåŠ¨å¤‡ä»½æ•°æ®ã€æ¯éš” 10 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡è®¢å•çŠ¶æ€ç­‰\n\nå› ä¸ºæœ‰è¿™äº›ä»»åŠ¡ï¼š\n\nè‡ªåŠ¨æ‰§è¡Œï¼Œä¸éœ€è¦äººä¸€ç›´ç›¯ç€ã€‚\nåœ¨ç‰¹å®šæ—¶é—´æ‰§è¡Œï¼Œæ¯”å¦‚å‡Œæ™¨è®¿é—®é‡ä½æ—¶åšç»Ÿè®¡\nå‘¨æœŸæ€§æ‰§è¡Œï¼Œæ¯”å¦‚æ¯å°æ—¶åŒæ­¥ä¸€æ¬¡æ•°æ®\nä¿è¯ä»»åŠ¡æ‰§è¡Œçš„å‡†ç¡®æ€§å’ŒåŠæ—¶æ€§ï¼Œé¿å…äººå·¥æ“ä½œçš„é—æ¼æˆ–å»¶è¿Ÿ\n\næ‰€ä»¥éœ€è¦å¼•å…¥å®šæ—¶ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥ç”¨äºï¼š\n\næ•°æ®å¤‡ä»½ã€æ—¥å¿—æ¸…ç†ã€æ•°æ®åŒæ­¥ã€å®šæ—¶å‘é€ã€è¶…æ—¶å…³é—­ã€ç¼“å­˜åˆ·æ–°ã€ç³»ç»ŸçŠ¶æ€ç›‘æ§\n\nå®ä¾‹ï¼šä½¿ç”¨@Scheduledæ³¨è§£å®ç°å®šæ—¶ä»»åŠ¡/** * é‡‡ç”¨å®šæ—¶å™¨æ–¹æ¡ˆï¼Œæ¯å¤©5:15åˆ†åˆ·æ–°ç«™ç‚¹åœ°å›¾ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ */@Scheduled(cron = &quot;0 15 5 * * ?&quot;)public void autoRefreshCache() &#123;    log.info(&quot;å¼€å§‹åˆ·æ–°sitemap.xmlçš„urlåœ°å€ï¼Œé¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´é—®é¢˜!&quot;);    refreshSitemap();    log.info(&quot;åˆ·æ–°å®Œæˆï¼&quot;);&#125;\n\nğŸŒŸ éœ€è¦åœ¨å¯åŠ¨ç±»æ·»åŠ æ³¨è§£@EnableSchedulingæ¥å¼€å¯å®šæ—¶ä»»åŠ¡\nçŸ¥è¯†ç‚¹åˆ†æcronè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥5ä¸ªæˆ–6ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†ä¸º6ä¸ªæˆ–7ä¸ªåŸŸï¼Œæ¯ä¸ªåŸŸä»£è¡¨ä¸€ä¸ªå«ä¹‰\n1  Seconds Minutes Hours DayofMonth Month DayofWeek Year2  Seconds Minutes Hours DayofMonth Month DayofWeek\n\n\n\n\nç¬¦å·\nå«ä¹‰\né€‚ç”¨åŸŸ\nç¤ºä¾‹\n\n\n\n*\nåŒ¹é…ä»»æ„å€¼\næ‰€æœ‰\n0 * * * * ? â†’ æ¯åˆ†é’Ÿè§¦å‘\n\n\n?\nåŒ¹é…ä»»æ„å€¼ï¼ˆé¿å… DayOfMonth&#x2F;DayOfWeek å†²çªï¼‰\nDayOfMonth, DayOfWeek\n0 0 15 20 * ? â†’ æ¯æœˆ 20 æ—¥ 15 ç‚¹è§¦å‘ï¼Œä¸ç®¡æ˜ŸæœŸå‡ \n\n\n-\nèŒƒå›´åŒ¹é…\næ‰€æœ‰\n0 5-20 * * * ? â†’ 5-20 åˆ†æ¯åˆ†é’Ÿè§¦å‘\n\n\n/\né—´éš”è§¦å‘\næ‰€æœ‰\n0 5/20 * * * ? â†’ 5 åˆ†è§¦å‘ï¼Œä¹‹åæ¯ 20 åˆ†é’Ÿä¸€æ¬¡\n\n\n,\næšä¸¾å€¼\næ‰€æœ‰\n0 5,20 * * * ? â†’ 5 åˆ†å’Œ 20 åˆ†å„è§¦å‘ä¸€æ¬¡\n\n\nL\næœ€åä¸€ä¸ª\nDayOfMonth, DayOfWeek\n0 0 0 ? * 5L â†’ æ¯æœˆæœ€åä¸€ä¸ªå‘¨å››è§¦å‘\n\n\nW\næœ€è¿‘å·¥ä½œæ—¥\nDayOfMonth\n0 0 0 5W * ? â†’ 5 æ—¥é™„è¿‘çš„æœ€è¿‘å·¥ä½œæ—¥è§¦å‘\n\n\nLW\næœ€åä¸€ä¸ªå·¥ä½œæ—¥\nDayOfMonth\n0 0 0 LW * ? â†’ æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥è§¦å‘\n\n\n#\nç¬¬ N ä¸ªæ˜ŸæœŸå‡ \nDayOfWeek\n0 0 0 ? * 4#2 â†’ æ¯æœˆç¬¬ 2 ä¸ªå‘¨ä¸‰è§¦å‘\n\n\nè¡¨è¾¾å¼å¢å¼ºï¼ˆspring5.3ä¹‹åï¼‰\nå®æŒ‡ä»¤\n\næœ€ä¸»è¦çš„ç‰¹ç‚¹å°±æ˜¯å¢åŠ äº†ä¸€äº›å®æŒ‡ä»¤\n\n\n\nå®\nè¡¨è¾¾å¼\nè¯´æ˜\n\n\n\n@yearly\n0 0 0 1 1 *\næ¯å¹´çš„ 1 æœˆ 1 å· 0 ç‚¹æ‰§è¡Œä¸€æ¬¡\n\n\n@monthly\n0 0 0 1 * *\næ¯æœˆä¸€æ¬¡\n\n\n@weekly\n0 0 0 * * 0\næ¯å‘¨ä¸€æ¬¡\n\n\n@daily æˆ– @midnight\n0 0 0 * * *\næ¯å¤©ä¸€æ¬¡\n\n\n@hourly\n0 0 * * * *\næ¯å°æ—¶ä¸€æ¬¡\n\n\n\næœ€å X å¤©\n\n&quot;0 0 0 L * *&quot; æ¯æœˆçš„æœ€åä¸€å¤©é›¶ç‚¹&quot;0 0 0 L-3 * *&quot; æ¯æœˆçš„æœ€åä¸‰å¤©é›¶ç‚¹&quot;0 0 0 * * 5L&quot; æ¯æœˆæœ€åçš„å‘¨äº”é›¶ç‚¹&quot;0 0 0 * * THUL&quot; æ¯æœˆæœ€åçš„å‘¨ä¸‰é›¶ç‚¹\n\n\næ¯æœˆçš„ç¬¬å‡ å¤©æ”¯æŒå·¥ä½œæ—¥Wçš„å®šä¹‰\n\n&quot;0 0 0 1W * *&quot; æ¯æœˆçš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥é›¶æ—¶&quot;0 0 0 LW * *&quot; æ¯æœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥é›¶æ—¶\n\n\nç¬¬å‡ å‘¨çš„æ˜ŸæœŸå‡ \n\n&quot;0 0 0 ? * 5#2&quot; æ¯æœˆç¬¬äºŒå‘¨çš„æ˜ŸæœŸäº”é›¶æ—¶&quot;0 0 0 ? * MON#1&quot; æ¯æœˆç¬¬ä¸€å‘¨çš„æ˜ŸæœŸä¸€é›¶æ—¶\n\n\nMONï¼šè¡¨ç¤º Monday å‘¨ä¸€ï¼ˆTUE &#x3D; å‘¨äºŒã€WED &#x3D; å‘¨ä¸‰ã€THU &#x3D; å‘¨å››ã€FRI &#x3D; å‘¨äº”ã€SAT &#x3D; å‘¨å…­ã€SUN &#x3D; å‘¨æ—¥ï¼‰\n\n#1ï¼šæ˜¯å¢å¼ºç‰ˆ Cron çš„ç‰¹æ®Šè¯­æ³•ï¼Œ# åé¢è·Ÿæ•°å­—è¡¨ç¤ºã€Œç¬¬ N ä¸ªã€ï¼Œ #1 å°±æ˜¯ã€Œç¬¬ä¸€ä¸ªã€\n\n\nå¤šä¸ªå®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªå®šæ—¶ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œ\n\nä¸€ä¸ªä»»åŠ¡é˜»å¡ï¼Œå…¶ä»–ä»»åŠ¡éƒ½ä¼šå—åˆ°å½±å“\n\nå®šæ—¶ä»»åŠ¡çš„ä¼˜å…ˆçº§å®é™…å¹¶æ— æ˜æ˜¾çš„ä¼˜å…ˆçº§å…³ç³»\nå¹¶è¡Œè°ƒåº¦å®šæ—¶ä»»åŠ¡\nåœ¨å¯åŠ¨ç±»Applicationä¸Šæ·»åŠ æ³¨è§£@EnableAsyncå¼€å¯å¼‚æ­¥è°ƒç”¨\n\nåœ¨è®¡åˆ’ä»»åŠ¡ä¸­åŠ ä¸Š@Async\n\n\n@EnableAsync  // æ ¸å¿ƒå¼€å…³ï¼šå¼€å¯å¼‚æ­¥åŠŸèƒ½@EnableScheduling@SpringBootApplicationpublic class QuickMediaApplication &#123;    public static void main(String[] args) &#123;        SpringApplication.run(QuickMediaApplication.class, args);    &#125;&#125;\n\n@Scheduled(cron = &quot;0/1 * * * * ?&quot;)@Async  // æ ‡è®°è¯¥ä»»åŠ¡ä¸ºå¼‚æ­¥æ‰§è¡Œpublic void sc1() &#123;    System.out.println(Thread.currentThread().getName() + &quot; | sc1 &quot; + System.currentTimeMillis());&#125;\n\n\nğŸ’¡ ä½†æ˜¯ï¼è¿™ç§é»˜è®¤é…ç½®æ˜¯æœ‰é£é™©çš„\nSpring å¼‚æ­¥ä»»åŠ¡çš„é»˜è®¤çº¿ç¨‹æ± æ˜¯ SimpleAsyncTaskExecutorï¼Œå®ƒï¼š\n\næ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°çº¿ç¨‹ï¼Œä¸ä¼šå¤ç”¨çº¿ç¨‹\nå¦‚æœå®šæ—¶ä»»åŠ¡é‡Œå†™äº†æ­»å¾ªç¯ï¼Œæˆ–è€…ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿œå¤§äºè°ƒåº¦é—´éš”ï¼ˆæ¯”å¦‚æ¯ç§’è°ƒåº¦ä¸€æ¬¡ï¼Œä½†ä»»åŠ¡æ‰§è¡Œéœ€è¦10ç§’ï¼‰ï¼Œå°±ä¼šä¸æ–­åˆ›å»ºæ–°çº¿ç¨‹\nLinux å•è¿›ç¨‹çš„çº¿ç¨‹æ•°æ˜¯æœ‰ä¸Šé™çš„ï¼ˆç”¨ ulimit -u å¯ä»¥æŸ¥çœ‹ï¼‰ï¼Œå½“çº¿ç¨‹æ•°è¶…è¿‡ä¸Šé™æ—¶ï¼Œè¿›ç¨‹ä¼šå› ä¸ºæ— æ³•åˆ›å»ºæ–°çº¿ç¨‹è€Œå´©æºƒ\n\næ‰€ä»¥ï¼ï¼å¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹æ± æ¥è§„é¿é£é™©\nasyncTaskExecutor()çº¿ç¨‹æ± é…ç½®ï¼š\n@Beanpublic AsyncTaskExecutor asyncTaskExecutor() &#123;    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();    executor.setThreadNamePrefix(&quot;yhh-schedule-&quot;);    executor.setMaxPoolSize(10); // æœ€å¤§çº¿ç¨‹æ•°    executor.setCorePoolSize(3); // æ ¸å¿ƒçº¿ç¨‹æ•°    executor.setQueueCapacity(0); // ä»»åŠ¡é˜Ÿåˆ—å®¹é‡    executor.setRejectedExecutionHandler(new ThreadPoolExecutor.AbortPolicy());    return executor;&#125;@Scheduled(cron = &quot;0/1 * * * * ?&quot;)@Asyncpublic void sc1() throws InterruptedException &#123;    System.out.println(Thread.currentThread().getName() + &quot; | sc1 &quot; + System.currentTimeMillis());    while (true) &#123;        Thread.sleep(1000 * 5);    &#125;&#125;\n\n\n\næœ‰æ–°ä»»åŠ¡æ—¶ï¼Œå…ˆçœ‹æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦æœ‰ç©ºé—² â†’ æœ‰ç©ºå°±ç›´æ¥æ‰§è¡Œ\næ ¸å¿ƒçº¿ç¨‹éƒ½å¿™ â†’ æŠŠä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—é‡Œæ’é˜Ÿ\né˜Ÿåˆ—æ»¡äº† â†’ æ‰ä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ï¼ˆç›´åˆ°è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°ï¼‰\nçº¿ç¨‹æ•°åˆ°æœ€å¤§å€¼ + é˜Ÿåˆ—æ»¡ â†’ è§¦å‘æ‹’ç»ç­–ç•¥\n\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å®ä¾‹"]},{"title":"å·¥å…·å®‰è£…","url":"/%E4%BB%93%E5%BA%93/%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/","content":"åœ¨macOS arm64 Apple M2èŠ¯ç‰‡ä¸‹\nå¼€å‘å·¥å…·SQLç›´æ¥ä½¿ç”¨homebrewï¼Œè·³è¿‡å¤æ‚çš„æƒé™è®¤è¯\nbrew install mysql ## å®‰è£…brew services start mysql ## å¯åŠ¨\n\nredisbrew install redis ## å®‰è£…redis-server ## ä¸´æ—¶å¯åŠ¨sudo service redis-server start ## æœåŠ¡æ–¹å¼æŸ¥è¯¢redis-cli ## è¿æ¥redis\n\nmavenä¸‹è½½åœ°å€ï¼šhttps://maven.apache.org/download.cgi\nç¯å¢ƒé…ç½®ï¼š\nvim ~/.bashrc## åœ¨æ–‡ä»¶æœ€åæ·»åŠ mavençš„è§£å‹ç›®å½•export MAVEN_HOME=xxexport PATH=$&#123;MAVEN_HOME&#125;/bin:$&#123;PATH&#125;## ä¿å­˜å¹¶é€€å‡ºï¼Œè®©é…ç½®å˜æ›´ç”Ÿæ•ˆsource ~/.bashrc## éªŒè¯mvn --version\n\næœ¬æœºè¾“å‡ºï¼š\nApache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)Maven home: /opt/homebrew/Cellar/maven/3.9.9/libexecJava version: 23.0.2, vendor: Homebrew, runtime: /opt/homebrew/Cellar/openjdk/23.0.2/libexec/openjdk.jdk/Contents/HomeDefault locale: zh_CN_#Hans, platform encoding: UTF-8OS name: &quot;mac os x&quot;, version: &quot;14.5&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n\nè¾…åŠ©å·¥å…·warpå®˜ç½‘ï¼šhttps://www.warp.dev/\nå¼€æºï¼šhttps://github.com/warpdotdev/Warp\næš‚æ—¶æ²¡æœ‰æ¥ç€çœ‹æ•™ç¨‹ï¼Œå› ä¸ºè¯´æˆ‘ä¸èƒ½ç”¨aiç”Ÿæˆç›¸å…³å·¥å…·å¯¹è¯ï¼Œä½¿ç”¨å·¥ä½œæµè¿™äº›ã€‚ä½œä¸ºç»ˆç«¯æŒºå¥½ç”¨çš„ï¼Œæ”¯æŒtabå¡«å……è¿˜æœ‰#æŸ¥è¯¢æŒ‡ä»¤\nğŸŒŸ å…¶ä»–æœç´¢ä¸€ä¸‹è§£å†³åŠæ³•\n","categories":["ä»“åº“"],"tags":["æ•´ç†","å®‰è£…"]},{"title":"å®ä½“ç±»å‘½å VOã€DTOã€DOã€PO","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%91%BD%E5%90%8D-VO%E3%80%81DTO%E3%80%81DO%E3%80%81PO/","content":"æ€»ä½“æ¦‚å¿µ\nVOï¼ˆview objectï¼‰ï¼š\nè§†å›¾å¯¹è±¡ï¼Œç”¨äºå±•ç¤ºå±‚ï¼Œå°†æŸä¸ªæŒ‡å®šé¡µé¢orç»„ä»¶çš„æ‰€æœ‰æ•°æ®å°è£…èµ·æ¥ã€‚\nå°è£…è¿”å›ç»™å‰ç«¯çš„æ•°æ®å®ä½“ \nâ€‹\t&#x3D;&#x3D;&gt; å±•ç¤ºå±‚éœ€è¦æ˜¾ç¤ºçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯**åç«¯å’Œå‰ç«¯è¿›è¡Œäº¤äº’**çš„å¯¹è±¡ï¼Œè¿”å›vo\n\nDTOï¼ˆdata transfer objectï¼‰ï¼š\næ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œç”¨äºå±•ç¤ºå±‚ä¸æœåŠ¡å±‚ä¹‹é—´çš„æ•°æ®ä¼ è¾“å¯¹è±¡\nè¿”å›ç»™å‰ç«¯çš„æ•°æ®å®ä½“ \nâ€‹\t&#x3D;&#x3D;&gt; æœåŠ¡å±‚éœ€è¦æ¥å—çš„æ•°æ®å’Œè¿”å›çš„æ•°æ®ï¼Œ***åç«¯æœåŠ¡å’ŒæœåŠ¡ä¹‹é—´çš„äº¤äº’***å¯¹è±¡ï¼Œè¿”å›dto\n\nDOï¼ˆdomain objectï¼‰ï¼š\né¢†åŸŸå¯¹è±¡ï¼Œä»ç°å®ä¸–ç•ŒæŠ½è±¡å‡ºæ¥çš„æœ‰å½¢oræ— å½¢çš„ä¸šåŠ¡å®ä½“\n**æ•°æ®åº“å®ä½“**ï¼Œæˆ–è€…å«po&#x2F;entityï¼Œdoé€‚ç”¨äºå°å‹é¡¹ç›®ï¼Œå¤§å‹é¡¹ç›®éœ€è¦po&#x2F;entity\n\nPOï¼ˆpersistent objectï¼‰ï¼š\næŒä¹…åŒ–å¯¹è±¡ï¼Œè·ŸæŒä¹…å±‚ï¼ˆä¸€èˆ¬æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼‰çš„æ•°æ®ç»“æ„å½¢æˆä¸€ä¸€å¯¹åº”å…³ç³»ã€æ¯”å¦‚æ•°æ®åº“çš„ä¸€ä¸ªï¼ˆå¤šä¸ªï¼‰å­—æ®µå¯¹åº”POçš„ä¸€ä¸ªï¼ˆå¤šä¸ªï¼‰å±æ€§ã€‘\n\nreqï¼š\nå‰ç«¯ä¼ é€’ç»™åç«¯çš„è¯·æ±‚å‚æ•°\n\n\nå…³ç³»åˆ†æä¸ºä»€ä¹ˆä¸åœ¨serviceå±‚ç›´æ¥è¿”å›DO\nä¸ºäº†è§£è€¦å’Œçµæ´»æ€§ï¼š\n\nâ€‹\tDOå’Œæ•°æ®åº“æ·±åº¦ç»‘å®šï¼Œå¦‚æœåœ¨serviceå±‚ç›´æ¥è¿”å›DOä¼šå¯¼è‡´å‰ç«¯å’Œæ•°æ®åº“ç»‘å®š &#x3D;&#x3D;&gt; å¦‚æœä¿®æ”¹äº†æ•°æ®åº“å­—æ®µåï¼Œå¦‚æœä¸æ‰‹åŠ¨åœ¨controllerè½¬æ¢ï¼Œå‰ç«¯jsonå­—æ®µä¼šæ”¹å˜ï¼Œå¯¼è‡´å‰ç«¯é¡µé¢å´©æºƒ\nâ€‹\tæ•°æ®åº“å­—æ®µæ˜¯åŸå­åŒ–çš„ï¼Œä½†å‰ç«¯é¡µé¢å¯èƒ½éœ€è¦å±•ç¤ºâ€œæ ¼å¼åŒ–åçš„é‡‘é¢â€ã€â€œåŠ å¯†åçš„æ‰‹æœºå·â€æˆ–â€œåˆå¹¶åçš„åœ°å€â€ã€‚DO å¾ˆéš¾ç›´æ¥æ»¡è¶³è¿™äº›å±•ç¤ºé€»è¾‘\n\né˜²æ­¢æ•°æ®æ³„éœ²ï¼š\n\nâ€‹\tDO é€šå¸¸åŒ…å«è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µï¼ŒåŒ…æ‹¬ä¸€äº›æ•æ„Ÿå­—æ®µã€‚å¦‚æœç›´æ¥è¿”å› DOï¼Œè¿™äº›å­—æ®µä¼šè¢«åºåˆ—åŒ–æˆ JSON å‘ç»™å‰ç«¯ã€‚å³ä½¿å‰ç«¯é¡µé¢ä¸æ˜¾ç¤ºï¼Œé»‘å®¢é€šè¿‡ F12 è°ƒè¯•å·¥å…·ä¹Ÿèƒ½ç›´æ¥çœ‹åˆ°ä½ æ•°æ®åº“é‡Œçš„åº•ç‰Œ\n\né¿å…è„æ£€æŸ¥å’Œæ‡’åŠ è½½å‘ï¼š\n\nâ€‹\tå¦‚æœä½¿ç”¨çš„æ˜¯ Hibernate æˆ– JPA ç­‰ ORM æ¡†æ¶ï¼š\nâ€‹\t\tæ‡’åŠ è½½å¼‚å¸¸ï¼šDO å¯èƒ½åŒ…å«ä¸å…¶ä»–è¡¨çš„å…³è”å…³ç³»ï¼ˆå¦‚ User å¯¹è±¡åŒ…å« Order åˆ—è¡¨ï¼‰ã€‚å¦‚æœä½ åœ¨ Controller å±‚æ‰å»è®¿é—®è¿™äº›æœªåˆå§‹åŒ–çš„å…³è”å­—æ®µï¼Œä¼šæŠ¥ LazyInitializationException\nâ€‹\t\tæ— æ„è¯†çš„æ›´æ–°ï¼šåœ¨æŸäº›æ¡†æ¶ä¸­ï¼ŒDO å¤„äºâ€œæŒä¹…åŒ–çŠ¶æ€â€ã€‚å¦‚æœä½ åœ¨ Controller æˆ– View å±‚ä¸å°å¿ƒæ”¹äº† DO çš„æŸä¸ªå±æ€§ï¼Œæ¡†æ¶å¯èƒ½ä¼šåœ¨äº‹åŠ¡ç»“æŸæ—¶è‡ªåŠ¨å°†ä¿®æ”¹åŒæ­¥å›æ•°æ®åº“ï¼Œäº§ç”Ÿä¸å¯é¢„çŸ¥çš„è„æ•°æ®\nå› æ­¤æ­£ç¡®çš„æµç¨‹ï¼š\nserviceå±‚ï¼šè°ƒç”¨mapper&#x2F;DAOæ‹¿åˆ°**DO**\n\nserviceæˆ–controllerå±‚ï¼šå°†DOè½¬æ¢ä¸º**DTOæˆ–VO**\n\nè¿”å›ï¼šåªç»™å‰ç«¯è¿”å›éœ€è¦çš„ã€è„±æ•åçš„æ•°æ®\n\n\nDOå’ŒPOç®€å•æ¥è¯´ï¼šPO æ˜¯â€œæ•°æ®åº“çš„æ˜ å°„â€ï¼Œè€Œ DO æ˜¯â€œä¸šåŠ¡é€»è¾‘çš„è½½ä½“â€ã€‚\n1. PO (Persistent Object) ï¼šæŒä¹…åŒ–å¯¹è±¡ï¼Œæ˜¯å’Œæ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”çš„å¯¹è±¡æ¥æºï¼š**é€šå¸¸ç”± ORM æ¡†æ¶ï¼ˆå¦‚ Hibernate, MyBatisï¼‰ç”Ÿæˆæˆ–ä½¿ç”¨**\nç”Ÿå‘½å‘¨æœŸï¼šå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸æ•°æ®åº“äº‹åŠ¡æ¯æ¯ç›¸å…³ã€‚åœ¨ Hibernate ä¸­ï¼ŒPO æœ‰â€œç¬æ—¶ã€æŒä¹…ã€æ‰˜ç®¡â€ä¸‰ç§çŠ¶æ€\nç‰¹å¾ï¼š\n\nå­—æ®µåé€šå¸¸ä¸æ•°æ®åº“åˆ—åä¸€è‡´ï¼ˆæˆ–é€šè¿‡æ³¨è§£æ˜ å°„ï¼‰\nä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼ŒåªåŒ…å«ç®€å•çš„ Getter&#x2F;Setter\nä¸»è¦å­˜åœ¨äº DAO&#x2F;Repository å±‚ï¼ˆæŒä¹…å±‚ï¼‰\n\n2. DO (Data Object &#x2F; Domain Object)ï¼šæ•°æ®&#x2F;é¢†åŸŸå¯¹è±¡ã€‚DO çš„å®šä¹‰åœ¨ä¸åŒçš„è§„èŒƒï¼ˆå¦‚é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œï¼‰ä¸­å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†é€šå¸¸æŒ‡é¢†åŸŸæ¨¡å‹å¯¹è±¡æ¥æºï¼š**æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾è®¡**ï¼Œä¸ä¸€å®šå®Œå…¨å¯¹åº”å•å¼ æ•°æ®åº“è¡¨\nç‰¹å¾ï¼š\n\nå®ƒä»£è¡¨äº†ä¸šåŠ¡å®ä½“ï¼ˆå¦‚â€œè®¢å•â€ã€â€œç”¨æˆ·â€ï¼‰\nå¯ä»¥åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼ˆä¾‹å¦‚ï¼šè®¡ç®—è®¢å•æ€»ä»·çš„æ–¹æ³•ï¼‰\nä¸»è¦å­˜åœ¨äº Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰\n\næ³¨æ„ï¼šåœ¨å¾ˆå¤šå›½å†…äº’è”ç½‘å…¬å¸çš„è§„èŒƒä¸­ï¼ŒDO è¢«ç­‰åŒäº POï¼Œç»ŸæŒ‡ä»æ•°æ®åº“æŸ¥å‡ºæ¥çš„é‚£ä¸ªåŸå§‹å¯¹è±¡\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å®ä½“ç±»","å®ä½“ç±»å‘½å"]},{"title":"æ•°æ®é›†","url":"/radio-map-dataset/%E6%95%B0%E6%8D%AE%E9%9B%86/","content":"å®æµ‹æ•°æ®é›†1. æš‚æœªå‘å¸ƒçš„å®æµ‹æ•°æ®é›†åœ°å€ï¼šhttps://www.radiomaps.org/rm/resources\ngithubä»“åº“ï¼šhttps://github.com/fachu000/deep-autoencoders-cartography/tree/master\næ–‡ç« ï¼šhttps://arxiv.org/abs/2310.11036\n2. å®æµ‹æ•°æ®é›†  RSRPSetCell-Level RSRP Estimation With the Image-to-Image Wireless Propagation Model Based on Measured Data\ngithubä»“åº“ï¼ˆä»£ç ï¼‰ï¼šhttps://github.com/ZhengSaber/Cell-Level-RSRP-Estimation\næ•°æ®é›†åœ°å€ï¼šhttps://ieee-dataport.org/documents/rsrpseturban-radio-map-dense-urban\n\n[real-world dataset] Yi Zheng, March 9, 2022, â€œRSRPSet_urban: Radio map in dense urban â€œ, IEEE Dataport, doi:\n\nä½¿ç”¨ï¼ˆè®ºæ–‡ï¼‰ï¼š\n\nPhysics-Informed Neural Networks for Path Loss Estimation by Solving Electromagnetic Integral Equations\nhttps://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=11114848\nhttps://ieeexplore.ieee.org/document/11143592\n\nGAN_train.py # Running this code to training the Pix2Pix model on RSRPSet_urban for real-world RSRP estimation.GAN_inference.py # inferencing the Pix2Pix model in RSRPSet_urban.UNet_train.py # training the UNet model on RSRPSet_urban.UNet_inference.py # inferencing the UNet model on RSRPSet_urban.## simulation dataset ==&gt; radiomapseersim_RadioGAN_train.py # training the Pix2Pix model on simulation dataset.sim_RadioGAN_inference.py # inferencing the Pix2Pix model on simulation dataset.Note: before training the model, you may need to revise the dataset path and model save path in train code.\n\n\n\næ¨¡æ‹Ÿæ•°æ®é›†1. 3Dåœ°å›¾æ•°æ®é›†UAV-Aided Radio Map Construction Exploiting Environment Semantics\næ•°æ®é›†é“¾æ¥ï¼šhttps://github.com/6wj/radiomap-uav/tree/main\nä½¿ç”¨ï¼šè¿è¡Œmatlabæ–‡ä»¶\n2. å¤šåœ°å½¢åœºæ™¯ã€å¤šé«˜åº¦ã€å¤šé¢‘æ®µã€å¤šæ°”å€™æ•°æ®é›†Generative AI on SpectrumNet: An Open Benchmark of Multiband 3D Radio Maps\næ•°æ®é›†è¯´æ˜ï¼š\n\n3 ä¸ªç©ºé—´ç»´åº¦ã€5 ä¸ªé¢‘æ®µã€11 ä¸ªåœ°å½¢æƒ…æ™¯å’Œ 3 ä¸ªæ°”å€™æƒ…æ™¯çš„æ— çº¿ç”µåœ°å›¾\nä½¿ç”¨ç”Ÿæˆå¼AIçš„æ–¹æ³•\nåŒ…å«äº†11ç§ä¸åŒåœ°ç†ç‰¹å¾çš„åœ°å½¢åœºæ™¯ï¼šå¯†é›†åŸå¸‚ã€æ™®é€šåŸå¸‚ã€ä¹¡æ‘ã€éƒŠåŒºã€å±±åŒºã€æ£®æ—ã€æ²™æ¼ ã€è‰åŸã€å²›å±¿ã€æµ·æ´‹ã€æ¹–æ³Š \næ¯ä¸ªåŒºåŸŸæä¾›ä¸‰ä¸ªä¸åŒé«˜åº¦çš„æ— çº¿ç”µåœ°å›¾ï¼šè·åœ°é¢1.5mã€30må’Œ200mï¼Œåˆ†åˆ«åæ˜ åœ°é¢èŠ‚ç‚¹ã€å»ºç­‘é«˜åº¦èŠ‚ç‚¹å’Œç©ºä¸­èŠ‚ç‚¹çš„æ— çº¿ç”µåœ°å›¾ã€‚ ä¸ºäº†è¯´æ˜å…¨é¢‘æ®µæ— çº¿ç”µä¼ æ’­ï¼ŒåŒ…æ‹¬ä»150 MHzåˆ°22GHzçš„äº”ä¸ªä¸åŒé¢‘ç‡çš„æ— çº¿ç”µå›¾ï¼Œè¦†ç›–äº†æ— çº¿ç½‘ç»œçš„å¤§éƒ¨åˆ†å·¥ä½œé¢‘ç‡ã€‚ æ­¤å¤–ï¼Œåœºæ™¯çš„å˜åŒ–å¯¹åº”äºä¸åŒçš„æ°”å€™ã€å»ºç­‘ææ–™å’Œåœ°å½¢ææ–™ï¼Œè¿™ä¹Ÿä¼šå½±å“ç°å®ä¸–ç•Œä¸­çš„æ— çº¿ç”µä¼ æ’­ã€‚ å› æ­¤ï¼Œè¿™äº›å‚æ•°ä¹Ÿè¢«æ³¨é‡Šä»¥ç”¨äºç”Ÿæˆæ¯ä¸ªæ— çº¿ç”µåœ°å›¾ã€‚\n\næ–‡ä»¶å‘½åæ ¼å¼ï¼š\n\nnpzï¼šnpzæ ¼å¼çš„æ–‡ä»¶åŒ…å«ç‰¹å®šåŒºåŸŸçš„åœ°å½¢ä¸å»ºç­‘ä¿¡æ¯ã€‚npzæ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºâ€œT[xx]C[x]D[xxxx] n[xx] bdtrâ€\n\njpgï¼šjpgæ ¼å¼æ–‡ä»¶ä¸ºå•ä¸€é¢‘ç‡ä¸‹æŸåŒºåŸŸçš„æ— çº¿ç”µå›¾ä¸åœ°å½¢ä¿¡æ¯çš„å¯è§†åŒ–å›¾åƒã€‚jpgæ–‡ä»¶å‘½åè§„åˆ™ä¸ºâ€œT[xx]C[x]D[xxxx] n[xx] f[xx] visualâ€\n\n\n3. songyangæ•°æ®é›†  BARTLab-UCDè®ºæ–‡é“¾æ¥ï¼šhttps://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=10424680#page=6.48\næ•°æ®é›†é“¾æ¥ï¼šhttps://github.com/BRATLab-UCD/Radiomap-Data\ndropboxï¼šhttps://www.dropbox.com/scl/fo/kua86qnk1aukt8i4f2rma/h?rlkey=j82kiq4dgaw3l0bzbeyfvv4oi&amp;e=1&amp;dl=0\nè£å‰ªç‰ˆæœ¬ï¼š\nâ€‹\t18:\nâ€‹\t\t&#x2F;data&#x2F;home&#x2F;dcy&#x2F;SR&#x2F;change&#x2F;Supreme-master&#x2F;dataset&#x2F;train.npy\nâ€‹\t17:\nâ€‹\t\t&#x2F;data&#x2F;home&#x2F;dcy&#x2F;diffusion&#x2F;spilt_scene\nâ€‹\t\t&#x2F;data&#x2F;home&#x2F;dcy&#x2F;diffusion&#x2F;stations_v1\nâ€‹\t\t&#x2F;data&#x2F;home&#x2F;dcy&#x2F;diffusion&#x2F;buildings_v1\n4. å°è§„æ¨¡é«˜ä¿çœŸæ•°æ®é›†  JHU-Labè®ºæ–‡é“¾æ¥ï¼šhttps://ieeexplore.ieee.org/abstract/document/10424680\n5. radiomapseerRadioUNet: Fast Radio Map Estimation With Convolutional Neural Networks\næ•°æ®é›†è¯´æ˜ï¼š\nâ€‹\tRadioMapSeeræ•°æ®é›†ç”±700å¼ åœ°å›¾ç»„æˆï¼Œæ¯å¼ åœ°å›¾80ä¸ªå‘å°„æœºä½ç½®ï¼Œä»¥åŠç›¸åº”çš„ç²—ç•¥æ¨¡æ‹Ÿæ— çº¿ç”µåœ°å›¾ã€‚ ç²—ç•¥çš„æ¨¡æ‹Ÿæ˜¯ä½¿ç”¨ä¸»å¯¼è·¯å¾„æ¨¡å‹ï¼ˆDPMï¼‰æ–¹æ³•[26]å’Œæ™ºèƒ½å…‰çº¿è¿½è¸ªï¼ˆIRTï¼‰[53]ç”Ÿæˆçš„ï¼Œè¯¥æ–¹æ³•åŸºäºå…‰çº¿ä¸å‡ ä½•å½¢çŠ¶çš„2ç§ç›¸äº’ä½œç”¨ï¼Œè¿™é‡Œç§°ä¸ºIRT2ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹æ¯ä¸ªåœ°å›¾çš„å‰ä¸¤ä¸ªå‘å°„å™¨ä½¿ç”¨å…·æœ‰4ä¸ªç›¸äº’ä½œç”¨çš„IRT ï¼ˆIRT4ï¼‰ç”Ÿæˆäº†ç²¾ç»†æ¨¡æ‹Ÿã€‚ è¿™äº›åŸå¸‚åœ°å›¾å–è‡ªOpenStreetMap[54]ï¼Œåˆ†åˆ«ä½äºå®‰å¡æ‹‰ã€æŸæ—ã€æ ¼æ‹‰æ–¯å“¥ã€å¢å¸ƒå°”é›…é‚£ã€ä¼¦æ•¦å’Œç‰¹æ‹‰ç»´å¤«ã€‚ æˆ‘ä»¬å°†å‘å°„æœºã€æ¥æ”¶æœºå’Œå»ºç­‘ç‰©çš„é«˜åº¦åˆ†åˆ«è®¾ç½®ä¸º1.5mã€1.5må’Œ25mï¼Œè¿™ä¸è®¾å¤‡å¯¹è®¾å¤‡çš„åœºæ™¯æœ‰å…³ï¼ˆè¯¦è§III-BèŠ‚ï¼‰ã€‚ æ‰€æœ‰æ¨¡æ‹Ÿå‡ä½¿ç”¨WinProp[38]è½¯ä»¶è¿›è¡Œè®¡ç®—ã€‚ å¯¹äºä¸åŒçš„æƒ…å†µï¼ˆä¾‹å¦‚ï¼Œæ ¡å›­ç½‘ï¼Œèœ‚çªç½‘ç»œï¼‰ï¼Œåº”è¯¥ç›¸åº”åœ°ç”Ÿæˆæ–°çš„æ•°æ®é›†ã€‚ æ¥è‡ªæ•°æ®é›†çš„ä¸€äº›ç¤ºä¾‹æ— çº¿ç”µåœ°å›¾å¦‚å›¾1æ‰€ç¤ºã€‚ æ‰€æœ‰æ¨¡æ‹Ÿéƒ½ä¿å­˜ä¸º256 Ã— 256 m2äºŒç»´ç½‘æ ¼ä¸­æ— çº¿ç”µåœ°å›¾çš„å¯†é›†é‡‡æ ·ã€‚\n\nç²—ç•¥æ¨¡æ‹Ÿæ— çº¿ç”µå›¾ï¼šåˆ©ç”¨æ— çº¿ç½‘ç»œè§„åˆ’è½¯ä»¶WinProp[38]ï¼Œé‡‡ç”¨DPMå’ŒIRT2ç”Ÿæˆæ— çº¿ç”µå›¾ã€‚ æ¯ä¸ªæ¨¡æ‹Ÿæ— çº¿ç”µå›¾åœ¨æ¯ä¸ªåƒç´ ä¸Šå­˜å‚¨åƒç´ ä½ç½®å’Œå‘å°„æœºä½ç½®ä¹‹é—´çš„è·¯å¾„æŸè€—ï¼ˆä»¥dBä¸ºå•ä½ï¼‰ã€‚ä¸ºäº†è¡¨ç¤ºæ•°æ®é›†ä¸­çš„ä¸ç¡®å®šæ€§ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸¤ç§æƒ…å†µã€‚ é¦–å…ˆï¼Œä½¿ç”¨DPMå’ŒIRT2å¯¹åŒ…æ‹¬æ±½è½¦åœ¨å†…çš„æ‰€æœ‰åŸå¸‚åœ°å›¾è¿›è¡Œä¸€ç»„æ¨¡æ‹Ÿã€‚ è¿™äº›æ¨¡æ‹Ÿæ˜¯å¯¹ä»…åŸºäºåŸå¸‚åœ°å›¾çš„æ¨¡æ‹Ÿçš„æ‰°åŠ¨ï¼Œæ²¡æœ‰æ±½è½¦ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†å•ç‹¬çš„æ‰°åŠ¨åŸå¸‚åœ°å›¾æ•°æ®é›†ï¼Œå…¶ä¸­åŸå§‹æ•°æ®é›†çš„æ¯å¼ åœ°å›¾ä¸­éƒ½ç¼ºå°‘mä¸ªå»ºç­‘ç‰©ã€‚ æˆ‘ä»¬æä¾›äº†å››ä¸ªè¿™æ ·çš„æ•°æ®é›†ï¼Œm &#x3D;1ï¼Œâ€¦ 4ã€‚\n\næ›´é«˜ç²¾åº¦çš„æ¨¡æ‹Ÿï¼šä½¿ç”¨IRT4ä¸ç›¸åŒçš„WinPropæ— çº¿ç½‘ç»œè§„åˆ’è½¯ä»¶æä¾›äº†é¢å¤–çš„æ›´å°çš„æ›´é«˜ç²¾åº¦æ¨¡æ‹Ÿæ•°æ®é›†ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸º700å¼ åœ°å›¾ä¸­çš„æ¯å¼ åœ°å›¾è€ƒè™‘äº†ä¸¤ä¸ªå‘å°„æœºä½ç½®ã€‚ æ›´é«˜ç²¾åº¦æ¨¡æ‹Ÿçš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ–¹æ³•æ¥æµ‹è¯•ç»è¿‡æ¨¡æ‹Ÿè®­ç»ƒçš„ç½‘ç»œæ˜¯å¦åœ¨è·¯å¾„æŸå¤±å‡½æ•°çš„ç²¾ç»†è¡¨ç¤ºä¸­è¡¨ç°è‰¯å¥½ã€‚ å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé‡ç”³ï¼Œé«˜ç²¾åº¦æ¨¡æ‹Ÿå¯ä»¥æ›¿ä»£ç°å®ç”Ÿæ´»ä¸­çš„ç‰©ç†ç°è±¡ï¼Œå®ƒæœ‰åŠ©äºè¯æ˜æˆ‘ä»¬æ–¹æ¡ˆçš„å¯è½¬ç§»æ€§ã€‚\n\nè·¯å¾„æŸè€—å°ºåº¦ï¼šå°†è·¯å¾„æŸè€—å€¼PLè½¬æ¢ä¸º0 ~ 1ä¹‹é—´çš„ç°åº¦åƒç´ å€¼ï¼ˆè§ç¬¬III-CèŠ‚ï¼‰ã€‚ å› æ­¤ï¼Œæ¯ä¸ªæ— çº¿ç”µåœ°å›¾éƒ½æ˜¯ä¸€ä¸ªå¤§å°ä¸º256 Ã— 256çš„ç°åº¦çº§å›¾åƒã€‚\n\n\n\nå‚æ•°è¯´æ˜ï¼š\nâ€‹\tæœ¬ç ”ç©¶æœ€åˆæ˜¯ç”±æ™ºèƒ½äº¤é€šç³»ç»Ÿï¼ˆITSï¼‰èƒŒæ™¯ä¸‹çš„è®¾å¤‡å¯¹è®¾å¤‡å®‰å…¨é€šä¿¡é©±åŠ¨çš„ï¼Œç›®å‰åŸºäºIEEE 802.11pæ ‡å‡†ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸º5.9GHzé¢‘æ®µçš„ä¿¡å·å¸¦å®½Wä¸º10MHzã€‚ æˆ‘ä»¬é€‰æ‹©å‘å°„æœºåŠŸç‡å’Œçƒ­å™ªå£°åŠŸç‡è°±å¯†åº¦åˆ†åˆ«ä¸ºï¼ˆPTxï¼‰dB &#x3D; 23dBmå’Œï¼ˆN0ï¼‰dB &#x3D; - 174dBm&#x2F;Hzï¼Œç¬¦åˆIEEE 802.11pæ ‡å‡†ï¼Œå¹¶å‡è®¾æ¥æ”¶æœºçš„ç†æƒ³å™ªå£°ç³»æ•°ä¸º0dBï¼ˆå‚è§å›¾1(e)ç»™å‡ºäº†ç³»ç»Ÿå‚æ•°çš„æ€»ç»“ï¼‰ã€‚\n","categories":["radio map dataset"],"tags":["dataset"]},{"title":"diffusionæ–‡ç« æ€»ç»“","url":"/papers/conclusion/%E6%96%87%E7%AB%A0%E6%80%BB%E7%BB%93/","content":"radiodiffä¸åŸºäºæµ‹é‡å€¼ï¼Œä»…è¾“å…¥ç¯å¢ƒä¿¡æ¯ã€å‘å°„æœºä½ç½®ä¿¡æ¯\nåˆ©ç”¨radiomapseerä¸­çš„è½¦è¾†æ•°æ®é›†æ¨¡æ‹ŸåŠ¨æ€å˜åŒ–\nä½¿ç”¨æ¡ä»¶ç”Ÿæˆçš„è§£è€¦æ‰©æ•£æ¨¡å‹ï¼ˆDDMï¼‰ï¼ŒVAEå¯¹å›¾åƒè¿›è¡Œç¼–ç ï¼Œunetè§£ç å™ªå£°\n\n3D radiodiffå…³æ³¨ä¸åŒé«˜åº¦å’Œç¯å¢ƒå½±å“ï¼Œåˆ†åˆ«å®éªŒäº†æœ‰é‡‡æ ·å’Œæ— é‡‡æ ·çš„æƒ…å†µ\né«˜åº¦æ¡ä»¶çš„RMç”Ÿæˆï¼Œä½¿ç”¨DDPM\n\nWIFI-Diffusionæä½é‡‡æ ·åœºæ™¯é—®é¢˜ï¼š1%åˆ°10%\næ ¹æ®ç¯å¢ƒä¿¡æ¯ã€ä¼ æ’­è§„å¾‹ä¿¡æ¯ã€æ”¶é›†çš„æ— çº¿ç”µæ ·æœ¬ç”ŸæˆRM\nboost blockï¼šè¾“å…¥ éšœç¢ç‰©å¸ƒå±€ã€æ— çº¿ç”µä¼ æ’­è§„å¾‹ã€æ”¶é›†å¾—åˆ°çš„æ— çº¿ç”µæ ·æœ¬ åˆ°self-attention UNet  &#x3D;&#x3D;&gt; ä¼˜åŒ–diffusionç”Ÿæˆæ•ˆæœï¼ˆé‡‡æ ·ç‚¹ã€é¢„æµ‹å€¼ã€ä¸´ç•Œç‚¹ï¼‰\ngeneration blockï¼šDDPMåŠ å™ªå£°ï¼ŒDDIMå»å™ªï¼ˆè¾“å‡ºä¸€ç»„ç”Ÿæˆå›¾åƒï¼‰\nelection blockï¼šä½¿ç”¨æ•°å­¦æ— çº¿ç”µä¼ æ’­æ¨¡å‹ä½œä¸ºæŒ‡å¯¼é€‰æ‹©radio map\n\n\nDDPMåˆ‡æ¢ä¸ºDDIMæ— éœ€å†è®­ç»ƒ\n\n\nResNet[16]åœ¨è¿‡å»å‡ å¹´ä¸­è¢«å¹¿æ³›åº”ç”¨äºç‰¹å¾æå–åº”ç”¨ã€‚ åœ¨WiFi-Diffusionä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥é¢„æµ‹resã€‚æˆ‘ä»¬é€šè¿‡å‘ResNetæä¾›xaã€xziã€å¤„ç†ä¿¡æ¯ï¼ˆè¾¹ç¼˜æ£€æµ‹ï¼‰çš„æ‹‰æ™®æ‹‰æ–¯é«˜æ–¯ç®—å­ï¼ˆLoGï¼‰å’Œxziçš„é«˜åŠŸç‡å›¾ï¼ˆå›¾8æ‰€ç¤ºçš„ç¤ºä¾‹ï¼‰æ¥å­¦ä¹ æ ¡æ­£å› å­resã€‚\nå…¶ä»–æ–¹æ³•MFFGCNå…³æ³¨ç©ºç™½åŒºåŸŸï¼ˆè§‚æµ‹å€¼åˆ†å¸ƒä¸å‡åŒ€ï¼‰\nå®ç°ç¨€ç–è§‚æµ‹ï¼ˆ10-300ï¼‰å’Œç¯å¢ƒåœ°å›¾çš„å¤šæ¨¡æ€ç‰¹å¾èåˆ\nåŒç¼–ç å™¨unetï¼Œè¡¥ä¸çº§å›¾å·ç§¯ä¼˜åŒ–ç½‘ç»œ\nç²—ä¼°è®¡ &#x3D;&#x3D;&gt;  ä¼˜åŒ–\nä»ç¯å¢ƒä¿¡æ¯ä¸­è·å–æ›´å¤šçš„ä¿¡å·ä¼ æ’­ç‰¹å¾ï¼Œè¦ä¹ˆå¿…é¡»åŸºäºæ— çº¦æŸåŒºåŸŸçš„ç»éªŒæ¥æŒ‡å¯¼è§‚æµ‹çº¦æŸåŒºåŸŸçš„é‡å»ºã€‚\n\n\n\n\nTiRE-GAN: Task-Incentivized Generative Learning for Radiomap Estimationåˆ©ç”¨æ— çº¿ç”µä¼ æ’­æ¨¡å‹çš„ç‰©ç†åŸç†å’Œæ¥è‡ªç¨€ç–è§‚æµ‹çš„æ•°æ®ç»Ÿè®¡ &#x3D;&#x3D;&gt; ä»»åŠ¡æ¿€åŠ±ç”Ÿæˆå­¦ä¹ æ¨¡å‹TiREGAN\n\nå¼•å…¥æ— çº¿ç”µæ·±åº¦å›¾æ¥æ•æ‰æ— çº¿ç”µä¼ æ’­å’Œé˜´å½±æ•ˆåº”çš„æ€»ä½“æ¨¡å¼\nä½¿ç”¨ä»»åŠ¡æ¿€åŠ±ç½‘ç»œçš„ç‰©ç†æ¡ä»¶cGANï¼Œæ ¹æ®ä¸‹æ¸¸ä»»åŠ¡ä¸ºæ— çº¿ç”µæ·±åº¦å›¾è¡¥å¿æä¾›åé¦ˆ\n\n\nå›¾1æ‰€ç¤ºã€‚ TiRE-GANæ€»ä½“ç»“æ„ç”±4éƒ¨åˆ†ç»„æˆï¼š\n1)åŸºäºæ¨¡å‹çš„æ•°æ®é¢„å¤„ç†æ¨¡å—åˆ©ç”¨è¾“å…¥çš„è§‚æµ‹ä¿¡æ¯ï¼ˆå³å»ºç­‘ç‰©å›¾å’Œå‘å°„æœºä½ç½®ï¼‰ç”Ÿæˆæ— çº¿ç”µæ·±åº¦å›¾ï¼Œç„¶åå°†å››å±‚å åŠ åœ¨ä¸€èµ·ä½œä¸ºè¾“å…¥ï¼› \n2)æ— çº¿ç”µåœ°å›¾ç”Ÿæˆæ¨¡å—é‡‡ç”¨cGANå‘ç”Ÿå™¨ç»“æ„ï¼Œå­¦ä¹ å¹¶ç”Ÿæˆæ— çº¿ç”µåœ°å›¾é¢„æµ‹ï¼› \n3)åé¦ˆæ¨¡å—ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šcGANé‰´åˆ«å™¨å’Œä»»åŠ¡æ¿€åŠ±ç½‘ç»œã€‚ ä¸¤ä¸ªæ¨¡å—éƒ½äº§ç”Ÿä¸€ä¸ªæŸå¤±é¡¹ä½œä¸ºåé¦ˆï¼Œä»¥æ”¹è¿›ç”Ÿæˆå™¨ï¼› \n4)ä¸ºåŸ¹è®­æŒ‡å¯¼æä¾›é¢å¤–æŸå¤±æœŸçš„ä¸‹æ¸¸ä»»åŠ¡ã€‚\nRadioGAT: A Joint Model-Based and Data-Driven Framework for Multi-Band Radiomap Reconstruction via Graph Attention NetworksOpenStreetMap\nå…³æ³¨ ç©ºé—´ã€æ—¶é—´ã€é¢‘å¸¦ç¨€ç–æ ·æœ¬ï¼Œå¤šé¢‘æ®µRMé‡å»º\nå›¾å½¢æ³¨æ„åŠ›ç½‘ç»œï¼ˆGATï¼‰\nä¸ä¾èµ– æ¨¡æ‹Ÿæ•°æ® æˆ– å®Œæ•´çš„ç»“æ„åŒ–åœ°é¢äº‹å® &#x3D;&#x3D;&gt; ä½¿ç”¨masked GATï¼Œä¸åŸºäºå®Œæ•´çš„åœ°é¢æ•°æ®\nåˆ©ç”¨æ— çº¿ç”µä¼ æ’­æ¨¡å‹æ¥æ•è·ç›¸å…³æ€§ &#x3D;&#x3D;&gt; radio depth map\nï¼š1)åŸºäºæ¨¡å‹çš„ç©ºé—´-è°±ç›¸å…³ç¼–ç ï¼› 2)æ•°æ®é©±åŠ¨çš„è·¨å¸¦æ³›åŒ–\nåŸºäºé¢‘ç‡çš„å°„é¢‘æ·±åº¦å›¾ &#x3D;&#x3D;&gt; ä¸åŒé¢‘ç‡æœ‰ä¸åŒçš„æ·±åº¦å›¾ï¼Œç”¨äºæ„é€ é‚»æ¥çŸ©é˜µ\n\nè®¾è®¡ç¼–ç ç­–ç•¥ï¼Œå°†ç¨€ç–çš„å¤šæ³¢æ®µæ•°æ®è½¬æ¢ä¸ºå›¾å½¢ç»“æ„ï¼Œè¯¥ç¼–ç ç­–ç•¥åˆ©ç”¨æ— çº¿ç”µä¼ æ’­æ¨¡å‹æ¥æ•è·æ•°æ®ä¸­å›ºæœ‰çš„ç©ºé—´-é¢‘è°±ç›¸å…³æ€§ã€‚\né›†ä¸­åœ¨ä¸åŒåŒºåŸŸçš„ç©ºé—´ç›¸å…³æ€§ä¸Šã€‚ MB-RMRæ–¹æ³•ä¸ä»…å¯ä»¥åˆ©ç”¨å¸¦å†…ç©ºé—´ç›¸å…³æ€§ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ç›¸åŒç©ºé—´åæ ‡ä¸‹çš„å¸¦é—´ç›¸å…³æ€§ã€‚\n\nå¸¦å†…ç©ºé—´ç›¸å…³æ€§ï¼šåŒä¸€â€œé¢‘å¸¦â€æˆ–è€…â€œé€šé“â€é‡Œçš„æ•°æ®ï¼Œä¸åŒç©ºé—´ä½ç½®ä¹‹é—´å¯èƒ½å­˜åœ¨è§„å¾‹æ€§\nå¸¦é—´ç›¸å…³æ€§ï¼šä¸åŒâ€œé¢‘å¸¦â€æˆ–è€…â€œé€šé“â€åœ¨åŒä¸€ç©ºé—´ä½ç½®ä¸Šä¹Ÿå¯èƒ½ç›¸å…³\nå¸¦ &#x3D;&#x3D;&gt; é¢‘å¸¦\n\nä½¿ç”¨ä¸€ä¸ªé¢‘å¸¦å»é¢„æµ‹åˆ«çš„é¢‘å¸¦çš„å›¾åƒ\n\nè¯·æ³¨æ„ï¼ŒåŸºäºå›¾çš„æ— çº¿åœ°å›¾ä¼°è®¡å¯ä»¥è¢«è¡¨è¿°ä¸ºåŠç›‘ç£å­¦ä¹ [38]ï¼Œå…¶ä¸­RSSå¯ä»¥è¢«è§†ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„æ³¨é‡Šï¼ˆæ ‡ç­¾ labelï¼‰ï¼Œè€Œç¯å¢ƒå’Œå‡ ä½•ä¿¡æ¯å¯ä»¥è¢«è§†ä¸ºç‰¹å¾ã€‚ \næ ‡æ³¨èŠ‚ç‚¹å’Œæœªæ ‡æ³¨èŠ‚ç‚¹éƒ½è¦å‚ä¸å›¾çš„å­¦ä¹ ï¼Œå›¾çš„è¾¹æ˜¯æ ¹æ®ç‰¹å¾æ„é€ çš„ã€‚ ä»¥E(k) bçš„æ„å»ºä¸ºé‡ç‚¹ï¼Œä»‹ç»äº†ç°æœ‰çš„åŸºäºé‚»æ¥æ€§ã€ç¯å¢ƒä¿¡æ¯å’Œå‘å°„æœºä¿¡æ¯çš„ä¸‰ç§ç¼–ç æ–¹æ³•ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæå‡ºäº†åŸºäºæ¨¡å‹çš„ç›¸å…³ç¼–ç æ–¹æ³•ã€‚\n\nåŸºäºå›¾çš„æ— çº¿åœ°å›¾ä¼°è®¡\n\n\nä½ å¯ä»¥æŠŠâ€œæ— çº¿åœ°å›¾â€ç†è§£ä¸ºä¸€ä¸ªäºŒç»´&#x2F;ä¸‰ç»´ç©ºé—´é‡Œä¿¡å·å¼ºåº¦çš„åˆ†å¸ƒå›¾ã€‚\nâ€œåŸºäºå›¾â€æ„å‘³ç€æˆ‘ä»¬æŠŠç©ºé—´ä¸­çš„æ¥æ”¶ç‚¹æˆ–è€…ä½ç½®æŠ½è±¡æˆå›¾é‡Œçš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹é—´æœ‰è¾¹ã€‚\n\n\nåŠç›‘ç£å­¦ä¹ \n\n\næœ‰äº›èŠ‚ç‚¹æœ‰æµ‹é‡å€¼ï¼ˆRSSï¼ŒReceived Signal Strengthï¼Œä¿¡å·å¼ºåº¦ï¼‰â€”â€”è¿™å°±æ˜¯â€œæ ‡æ³¨èŠ‚ç‚¹â€ã€‚\næœ‰äº›èŠ‚ç‚¹æ²¡æœ‰æµ‹é‡å€¼ï¼Œåªèƒ½ç”¨å‘¨å›´ä¿¡æ¯å»æ¨æ–­â€”â€”è¿™å°±æ˜¯â€œæœªæ ‡æ³¨èŠ‚ç‚¹â€ã€‚\nåŠç›‘ç£å­¦ä¹ å°±æ˜¯åŒæ—¶åˆ©ç”¨â€œæœ‰æ ‡æ³¨â€å’Œâ€œæ— æ ‡æ³¨â€æ•°æ®è¿›è¡Œå­¦ä¹ ã€‚\n\n\nRSSæ˜¯èŠ‚ç‚¹çš„æ³¨é‡Šï¼Œç¯å¢ƒå’Œå‡ ä½•ä¿¡æ¯æ˜¯ç‰¹å¾\n\n\nèŠ‚ç‚¹çš„â€œæ ‡ç­¾â€ï¼ˆannotationï¼‰å°±æ˜¯ä¿¡å·å¼ºåº¦RSSã€‚\nèŠ‚ç‚¹çš„â€œç‰¹å¾â€æ˜¯ä¸ç¯å¢ƒå’Œä½ç½®ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å»ºç­‘ç‰©ä½ç½®ã€éšœç¢ç‰©ã€å‘å°„æœºä½ç½®ç­‰ç­‰ã€‚\n\næ— æ ‡æ³¨çš„èŠ‚ç‚¹å‚ä¸å­¦ä¹ çš„æ–¹æ³•ï¼š\n\næ ‡ç­¾ä¼ æ’­ï¼ˆLabel Propagationï¼‰ï¼šå‡è®¾èŠ‚ç‚¹Aæœ‰RSSæ ‡ç­¾ï¼ŒèŠ‚ç‚¹Bæ²¡æœ‰ã€‚\n\nèŠ‚ç‚¹Bé€šè¿‡å›¾ä¸Šçš„è¾¹â€œçœ‹é‚»å±…â€ï¼Œç”¨é‚»å±…èŠ‚ç‚¹çš„æ ‡ç­¾ä¿¡æ¯æ¥æ›´æ–°è‡ªå·±çš„ä¼°è®¡å€¼ã€‚\n\nåŠç›‘ç£å›¾ç¥ç»ç½‘ç»œï¼ˆGNNï¼‰\n\nGNNä¼šæŠŠæ¯ä¸ªèŠ‚ç‚¹çš„ç‰¹å¾ï¼ˆä½ç½®ã€ç¯å¢ƒä¿¡æ¯ã€å‘å°„æœºä¿¡æ¯ï¼‰å’Œé‚»å±…èŠ‚ç‚¹çš„ä¿¡æ¯æ··åˆï¼Œç”ŸæˆèŠ‚ç‚¹è¡¨ç¤ºã€‚è®­ç»ƒæ—¶åªç”¨æ ‡æ³¨èŠ‚ç‚¹çš„æŸå¤±ï¼ˆä¾‹å¦‚RSSé¢„æµ‹è¯¯å·®ï¼‰æ¥åå‘ä¼ æ’­ï¼Œä½†å› ä¸ºç½‘ç»œæ˜¯å…¨å›¾çš„ï¼Œæ— æ ‡æ³¨èŠ‚ç‚¹çš„è¡¨ç¤ºä¹Ÿä¼šè¢«æ›´æ–°ã€‚\næ¢å¥è¯è¯´ï¼Œæ— æ ‡æ³¨èŠ‚ç‚¹å‚ä¸â€œä¿¡æ¯ä¼ é€’â€ï¼Œå¸®åŠ©æ¨¡å‹å­¦ä¹ æ›´å¹³æ»‘ã€ç¬¦åˆå›¾ç»“æ„çš„è¡¨ç¤ºã€‚\n&#x3D;&#x3D;&gt; æ— æ ‡æ³¨èŠ‚ç‚¹ä¸å‚ä¸åå‘ä¼ æ’­ï¼Œæœ€åï¼ˆæµ‹è¯•ï¼‰æ˜¯é¢„æµ‹æ— æ ‡ç­¾èŠ‚ç‚¹çš„å€¼ã€‚å…¶ä½™æ—¶åˆ»å‡åªå…³æ³¨æœ‰æ ‡ç­¾èŠ‚ç‚¹çš„loss\nGAT VS GNNï¼š\n\nä¼ ç»ŸGNNï¼ˆæ¯”å¦‚GCNï¼‰åœ¨æ›´æ–°èŠ‚ç‚¹è¡¨ç¤ºæ—¶ï¼Œä¼šæŠŠé‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾å¹³å‡æˆ–åŠ æƒå¹³å‡åä¼ é€’ç»™è‡ªå·±ã€‚\nGATçš„åˆ›æ–°ç‚¹ï¼šä¸æ˜¯ç®€å•å¹³å‡ï¼Œè€Œæ˜¯ç”¨æ³¨æ„åŠ›æœºåˆ¶ç»™ä¸åŒé‚»å±…åˆ†é…ä¸åŒæƒé‡ã€‚\n\næ¢å¥è¯è¯´ï¼Œå®ƒä¼šè‡ªå·±å­¦ï¼šâ€œå“ªä¸ªé‚»å±…çš„ä¿¡æ¯å¯¹æˆ‘æœ€é‡è¦ï¼Œæˆ‘å°±ç»™å®ƒæ›´é«˜çš„æƒé‡ã€‚â€\n\n","categories":["papers","conclusion"],"tags":["notes","conclusion"]},{"title":"æ–‡ç« æ•´ç†","url":"/%E4%BB%93%E5%BA%93/%E6%96%87%E7%AB%A0%E6%95%B4%E7%90%86/","content":"IEEE Communications Surveys &amp; Tutorials è°ƒç ” â€“ RM\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nA Tutorial on Environment-Aware Communications via Channel Knowledge Map for 6G\nIEEE Communications Surveys &amp; Tutorials\n2024\n\n\næ›¾å‹‡è€å¸ˆçš„æ–‡ç« \n\n\nç¯å¢ƒæ„ŸçŸ¥çš„CKM\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2\nSurvey on Near-Space Information Networks: Channel Modeling, Transmission, and Networking Perspectives\nIEEE Communications Surveys &amp; Tutorials ( Early Access )\n2025\n\n\nåˆ†æäº†é«˜ç©ºï¼ˆæ— äººæœºï¼‰å’Œè¿‘åœ°ç©ºé—´çš„ä¿¡é“å»ºæ¨¡æ–¹æ³•åŒºåˆ«\n\n\n\n\n\n3\nTerahertz Channel Propagation Phenomena, Measurement Techniques and Modeling for 6G Wireless Communication Applications: A Survey, Open Challenges and Future Research Directions\nIEEE Communications Surveys &amp; Tutorials\n2022\n\n\nå¤ªèµ«å…¹ä¿¡é“å»ºæ¨¡\n\n\n\n\n\n4\nA Tutorial on NYUSIM: Sub-Terahertz and Millimeter-Wave Channel Simulator for 5G, 6G, and Beyond\nIEEE Communications Surveys &amp; Tutorials\n2024\n\n\nå…³æ³¨æŸä¸€ç§ä¿¡é“å»ºæ¨¡æ–¹æ³•ï¼ˆç»Ÿè®¡å‹ä¿¡é“å»ºæ¨¡æ–¹æ³•ï¼‰\n\n\n\n\n\nå…¶ä»–\n\n\n\n\n\n\n\n\n\n\n\n\nA Survey on Channel Estimation and Practical Passive Beamforming Design for Intelligent Reflecting Surface Aided Wireless Communications\nIEEE Communications Surveys &amp; Tutorials\n2022\n\n\nä½¿ç”¨æŸç§æ–¹æ³•è®¾è®¡IRSå…ƒä»¶é…ç½®ï¼Œé€šè¿‡æµ‹CSIï¼Œç„¶åæ§åˆ¶åå°„ï¼Œæå‡é€šä¿¡è´¨é‡\n\n\n\n\n\n\nA Survey of Indoor Localization Systems and Technologies\nIEEE Communications Surveys &amp; Tutorials\n2019\n\n\nå®¤å†…å®šä½æŠ€æœ¯è°ƒæŸ¥\n\n\n\n\n\n\nLarge Language Model (LLM) for Telecommunications: A Comprehensive Survey on Principles, Key Techniques, and Opportunities\nIEEE Communications Surveys &amp; Tutorials\n2025\n\n\nåº”ç”¨åœ¨é€šä¿¡é¢†åŸŸçš„å¤§æ¨¡å‹æ–¹æ³•\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç†è®ºå‹æ–‡ç« \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nRadio Map Estimation Based on Generative Artificial Intelligence: Evolution from Point-Level to Cell-Level Prediction\nIEEE Communications Magazine\n2025\n\n\n\n\n\n\n\n\n2\nAdvancing Ubiquitous Wireless Connectivity Through Channel Twinning\nIEEE Communications Magazine\n2025\n\n\n\n\n\n\n\n\n3\nTheoretical Analysis of the Radio Map Estimation Problem\nTWC\n2024\n\n\n\n\n\n\n\n\nSheet3\n\n\nå¤šæ¨¡æ€å¤§æ¨¡å‹æ–‡ç« \n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nBLIP: Bootstrapping Language-Image Pre-training for Unified Vision-Language Understanding and Generation\nPMLR\n2022\n\n\n\nhttps://github.com/salesforce/BLIP\n\n\n\n\n\n\nDiffusion\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\n\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nDenoising Diffusion Probabilistic Models\nNIPS\n2020\n\n\nDDPM\nhttps://github.com/hojonathanho/diffusion\nï¼ˆåº”è¯¥æ˜¯ï¼‰DDPMçš„åŸå§‹è®ºæ–‡\n\n\n\n\n\n2\nHigh-Resolution Image Synthesis with Latent Diffusion Models\nCVPR\n2022\n\n\nåœ¨æ½œåœ¨ç©ºé—´VAEå†…åšdiffusion\nhttps://github.com/CompVis/latent-diffusion\n\n\n\n\n\n\n3\nScalable Diffusion Models with Transformers\nICCV\n2023\n\n\nunetæ¢æˆtransformer\næ— \n\n\n\n\n\n\n4\nAdaptive Latent Diffusion Model for 3D Medical Image to Image Translation: Multi-modal Magnetic Resonance Imaging Study\nWACV\n2024\n\n\n\nhttps://github.com/jongdory/ALDM/\n\n\n\n\n\n\n\nradiomapè°ƒç ”\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nWiFi-Diffusion: Achieving Fine-Grained WiFi Radio Map Estimation with Ultra-Low Sampling Rate by Diffusion Models\nJSAC\n2025\nZhiyuan Liu, Shuhang Zhang , Qingyu Liu, Hongliang Zhang , Lingyang Song\n\n\nåªæœ‰æ•°æ®é›†é“¾æ¥\n\n\n\n\n\n\n2\nTiRE-GAN: Task-Incentivized Generative Learning for Radiomap Estimation\nWCL\n2025\n\n\n\næ— \n\n\n\n\n\n\n3\nMFFGCN: Multimodal Feature Fusion Graph Convolution Network for Radio Map Estimation with Uneven Spatial Sampling\nTMC\n2025\n\n\n\næ— \nå¤šæ¨¡æ€ç‰¹å¾èåˆå›¾å·ç§¯ç½‘ç»œçš„\n\n\n\n\n\néå‡åŒ€ç©ºé—´é‡‡æ ·\n\n\n\n\n\n\n\n\n\n\n\n\n\n4\nLightweight and Self-Evolving Channel Twinning: An Ensemble DMD-Assisted Approach\nTWC\n2025\n\n\n\næ— \nè½»é‡çº§å’Œè‡ªè¿›åŒ–ä¿¡é“å­ªç”Ÿ\n\n\n\n\n\né›†æˆdmdè¾…åŠ©æ–¹æ³•\n\n\n\n\n\n\n\n\n\n\n\n\n\n5\nHigh-Efficiency Urban 3D Radio Map Estimation Based on Sparse Measurements\nTVT\n2025\n\n\n\næ— \n\n\n\n\n\n\n6\nGPRT: A Gaussian Process Regression-Based Radio Map Construction Method for Rugged Terrain\nIoTJ\n2025\n\n\n\n\né«˜æ–¯å›å½’è¿‡ç¨‹\n\n\n\n\n\n7\nGEO2SIGMAP: High-Fidelity RF Signal Mapping Using Geographic Databases\nDySPAN\n2024\n\n\n\nhttps://github.com/functions-lab/geo2sigmap\nä¸æ˜¯é‚£ç§ä»£ç åæ­£\n\n\n\n\n\n8\nGeo2ComMap: Deep Learning-Based MIMO Throughput Prediction Using Geographic Data\nWCL\n2025\n\n\n\nhttps://github.com/geo2commap/Geo2ComMap\nå’Œä¸Šé¢ä¸€ä¸ªç³»åˆ—çš„\n\n\n\n\n\n9\nRadioGAT: A Joint Model-Based and Data-Driven Framework for Multi-Band Radiomap Reconstruction via Graph Attention Networks\nTWC\n2024\n\n\nå›¾ç¥ç»ç½‘ç»œ\n\nsongyang zhang\n\n\n\n\n\n10\nRadioMamba: Breaking the Accuracy-Efficiency\n\n\n\n\n\n\n\n\n\n\n\n\nTrade-off in Radio Map Construction via a Hybrid\n\n\n\n\n\n\n\n\n\n\n\n\n\nMamba-UNet\narxiv\n2025\nHonggang Jia, Nan Cheng, Xiucheng Wang, Conghao Zhou, Ruijin Sun, Xuemin (Sherman) Shen\n\nmamba\næ— \n\n\n\n\n\n\n\n11\n3D-RadioDiff: An Altitude-Conditioned Diffusion Model\n\n\n\n\n\n\n\n\n\n\n\n\nfor 3D Radio Map Construction\nWCL\n2025\nLe Zhao , Zesong Fei, Xinyi Wang, Jihao Luo , and Zhong Zheng\n\n\næ— \nÃ¥\n\n\n\n\n\n\n12\nRadioDiff: An Effective Generative Diffusion\n\n\n\n\n\n\n\n\n\n\n\n\nModel for Sampling-Free Dynamic Radio\n\n\n\n\n\n\n\n\n\n\n\n\n\nMap Construction\nTCCN\n2025\nXiucheng Wang, Keda Tao, Nan Cheng , Zhisheng Yin ,Zan Li , Yuan Zhang ,and Xuemin Shen\n\n\nhttps://github.com/UNIC-Lab/RadioDiff\n\n\n\n\n\n\n\n13\nRMDM: Radio Map Diffusion Model with Physics Informed\narxiv\n2025\nHaozhe Jia , Wenshuo Chen , Zhihui Huang , Hongru Xiao, Nanqian Jia , Keming Wu, Songning Lai , Yutao Yue\n\ndiffusion + PINN\nhttps://github.com/Hxxxz0/RMDM\n\n\n\n\n\n\n14\nPhysics-informed neural network (pinn) evolution and be-\n\n\n\n\n\n\n\n\n\n\n\n\nyond: A systematic literature review and bibliometric\n\n\n\n\n\n\n\n\n\n\n\n\n\nanalysis\n\n2022\nZaharaddeen Karami Lawal, Hayati\n\n\n\n\n\n\n\n\n\n\nYassin, Daphne Teck Ching Lai, and Azam Che Idris\n\nPINN\n\n\n\n\n\n\n\n\n\n\n\n15\nTHE SAMPLING-ASSISTED PATHLOSS RADIO MAP PREDICTION COMPETITION\n\n\n\n\n\n\nä¸€ç¯‡ç«èµ›æ–‡ç« \n\n\n\n\n\n1\nUpdating radio maps without pain: An enhanced transfer learning approach\nJIOT\n2021\n\n\n\næ— \nè¿ç§»å­¦ä¹ \n\n\n\n\n\n2\nCell-level rsrp estimation with the image-to-image wireless propagation model based on measured data\nTCCN\n2023\n\n\n\nhttps://github.com/ZhengSaber/Cell-Level-RSRP-Estimation\nPix2pix\n\n\n\n\n\n3\nDeep completion autoencoders for radio map estimation\nTWC\n2021\n\n\n\nhttps://github.com/yvestegnya2/deepautoencoders-cartography\nAE\n\n\n\n\n\n\nä¸­æ–‡æ–‡çŒ®\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nAIä½¿èƒ½çš„ä¿¡é“çŸ¥è¯†åœ°å›¾é«˜æ•ˆæ„å»ºä¸åº”ç”¨\nç§»åŠ¨é€šä¿¡\n2024å¹´8æœˆç¬¬8æœŸ\nå´è¿ª 1ï¼Œæ›¾å‹‡ 1,2**\n1.ä¸œå—å¤§å­¦ç§»åŠ¨é€šä¿¡å…¨å›½é‡ç‚¹å®éªŒå®¤, æ±Ÿè‹ å—äº¬ 210096ï¼›2.ç´«é‡‘å±±å®éªŒå®¤ï¼Œæ±Ÿè‹ å—äº¬ 211111\n\n\n\n\n\n\n\n\n2\nåŸºäºæ™ºèƒ½å°„çº¿è¿½è¸ªçš„ä¿¡é“è®¡ç®—ä¸åŠå®ç‰©ä»¿çœŸ\nç”µæ³¢ç§‘å­¦æŠ¥\n45289\nåˆ˜ç…œé‘« 1,2 ä½•ä¸¹è 2* å•é¦¨æ¼ª 1,2 è´¹ä¸¹ 1,2å®˜ç§‘ 1,2éƒ­å…°å›¾ 3\nï¼ˆ1. åŒ—äº¬äº¤é€šå¤§å­¦ å…ˆè¿›è½¨é“äº¤é€šè‡ªä¸»è¿è¡Œå…¨å›½é‡ç‚¹å®éªŒå®¤ï¼ŒåŒ—äº¬ 100044ï¼›2. åŒ—äº¬äº¤é€šå¤§å­¦ç”µå­ä¿¡æ¯å·¥ç¨‹å­¦é™¢ï¼ŒåŒ—äº¬100044ï¼›3. ä¸­å›½ç”µæ³¢ä¼ æ’­ç ”ç©¶æ‰€ï¼Œé’å²› 266107\n\n\n\n\n\n\n\n\n3\nåŸºäºä¸ç¡®å®šæ€§æ„ŸçŸ¥çš„å¤šæ™ºèƒ½ä½“ä¸»åŠ¨å¼æ— çº¿ç”µåœ°å›¾ä¼°è®¡\nç”µå­ç§‘æŠ€å¤§å­¦å­¦æŠ¥\n45901\nå¼ è•´éœ–ï¼Œé‚µæ™‹æ¢*ï¼Œé™ˆ    å‡¯ï¼Œç¨‹ç‰åï¼Œæé“å±±\nç”µå­ç§‘æŠ€å¤§å­¦\n\n\né‡‡æ ·è½¨è¿¹ä¼˜åŒ–\n\n\n\n\n\n4\nåŸºäºå·®åˆ†å·ç§¯å’Œæ³¨æ„åŠ›æœºåˆ¶çš„æ— çº¿ç”µåœ°å›¾æ„å»ºæ–¹æ³•ç ”ç©¶\nç”µæ³¢ç§‘å­¦å­¦æŠ¥\n45689\nè°­æµ·ä¸œï¼Œæ¨æ™¶æ™¶ï¼Œé»„é“­\n1. äº‘å—å¤§å­¦ ä¿¡æ¯å­¦é™¢ï¼Œæ˜†æ˜ 650091ï¼›2. äº‘å—å¤§å­¦æ— çº¿åˆ›æ–°å®éªŒå®¤ï¼Œæ˜†æ˜ 650091\n\n\n\n\n\n\n\n\ncontrolnet\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nAdding Conditional Control to Text-to-Image Diffusion Models\nICCV\n2023\nLvmin Zhang, Anyi Rao, and Maneesh Agrawala\n\n\n\n\n\n\n\n\n\nStanford University\n\n\nhttps://github.com/lllyasviel/ControlNet/tree/main\ncontrolnet æå‡º\n\n\n\n\n\n\n\n\n\n2\nCRS-Diff: Controllable Remote Sensing Image Generation with Diffusion Model\nTGRS\n2024\nDatao Tang; Xiangyong Cao; Xingsong Hou; Zhongyuan Jiang; Junmin Liu; Deyu Meng\n\n\nhttps://github.com/Sonettoo/CRS-Diff\ncontrolnet åº”ç”¨\n\n\n\n\n\nç”Ÿæˆå¤šå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n3\nGenerate Your Own Scotland: Satellite Image Generation Conditioned on Maps\narxiv\n2023\n\n\n\nhttps://github.com/toastyfrosty/map-sat\ncontrolnet åº”ç”¨\n\n\n\n\n\nç”Ÿæˆå¤šå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\nmamba\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nRadioMamba: Breaking the Accuracy-Efficiency\n\n\n\n\n\n\n\n\n\n\n\n\nTrade-off in Radio Map Construction via a Hybrid\n\n\n\n\n\n\n\n\n\n\n\n\n\nMamba-UNet\narxiv\n2025\nHonggang Jia, Nan Cheng, Xiucheng Wang, Conghao Zhou, Ruijin Sun, Xuemin (Sherman) Shen\n\nmamba\næ— \n\n\n\n\n\n\n\n2\nVision Mamba: Efficient Visual Representation Learning with Bidirectional State Space Model\nICML\n2024\n\n\nè§†è§‰ mamba\nhttps://github.com/hustvl/Vim\n\n\n\n\n\n\n3\nDiM: Diffusion Mamba for\n\n\n\n\n\n\n\n\n\n\n\n\nEfficient High-Resolution Image Synthesis\narxiv\n2024\n\n\nmamba + diffusion\nhttp://github.com/tyshiwo1/DiM-DiffusionMamba/\n\n\n\n\n\n\n\n4\nDimba: Transformer-Mamba Diffusion Models\narxiv\n2024\n\n\n\nhttps://github.com/feizc/Dimba\n\n\n\n\n\n\n5\nA Mamba-Diffusion Framework for Multimodal Remote Sensing\n\n\n\n\n\n\n\n\n\n\n\n\nImage Semantic Segmentation\nä¸€ä¸ªletter\n2024\n\n\n\nhttps://github.com/WenliangDu/MambaDiffusion\n\n\n\n\n\n\n\n6\nU-shaped Vision Mamba for Single Image\n\n\n\n\n\n\n\n\n\n\n\n\nDehazing\narxiv\n2024\n\n\nunet + mamba\nhttps://github.com/zzr-idam\næ–‡ç« ï¼šç‰©ç†ä¿¡æ¯å¼•å¯¼-8-å¤šè·¯å¾„xxè¿™ç¯‡æ–‡ç« ç”¨ä½œå¯¹æ¯”å®éªŒ\n\n\n\n\n\n\nç‰©ç†ä¿¡æ¯å¼•å¯¼\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nRMDM: Radio Map Diffusion Model with Physics Informed\narxiv\n2025\nHaozhe Jia , Wenshuo Chen , Zhihui Huang , Hongru Xiao, Nanqian Jia , Keming Wu, Songning Lai , Yutao Yue\n\ndiffusion + PINN\nhttps://github.com/Hxxxz0/RMDM\n\n\n\n\n\n\n2\nPhysics-informed neural network (pinn) evolution and be-yond: A systematic literature review and bibliometric\n\n\n\n\n\n\n\n\n\n\n\n\nanalysis\n\n2022\nZaharaddeen Karami Lawal, Hayati\n\n\n\n\n\n\n\n\n\n\nYassin, Daphne Teck Ching Lai, and Azam Che Idris\n\nPINN\n\n\n\n\n\n\n\n\n\n\n\n3\nPhysics-Informed Neural Networks for Path Loss Estimation by Solving Electromagnetic Integral Equations\nTWC\n2024\nFenyu Jiang , Tong Li , Xingzai Lv , Hua Rui, and Depeng Jin\nDepartment of Electronic Engineering\n\n\n\n\n\n\n\n\nTsinghua University\nä½“ç§¯åˆ†æ–¹ç¨‹\næ— \n\n\n\n\n\n\n\n\n\n\n\n4\nPhysics-Informed Representation Alignment for Sparse Radio-Map Reconstruction\n&#x2F;&#x2F;\n&#x2F;&#x2F;\n&#x2F;&#x2F;\n\nå’ŒRMDMæ˜¯åŒä¸€ä¸ªå·¥ä½œ\n\n\n\n\n\n\n\n5\nRadioDUN: A Physics-Inspired Deep Unfolding Network for Radio Map\n\n\n\n\n\n\n\n\n\n\n\n\nEstimation\narxiv\n2025\nTaiqin Chen, Zikun Zhou, Zheng Fang, Wenzhen Zou, Kangjun Liu, Ke Chen, Yongbing Zhang, Yaowei Wang\n\n\n\n\n\n\n\n\n\n\n6\nPINN and GNN-based RF Map Construction for Wireless Communication Systems\narxiv\n2025\nLizhou Liu, Xiaohui Chen, Zihan Tang, Mengyao Ma, Wenyi Zhang\n1Department of Electronic Engineering and Information Science,\n\n\n\n\n\n\n\n\nUniversity of Science and Technology of China, Hefei, Anhui 230027, China2Wireless Technology Lab, Huawei, Shenzhen 518129, China\n\n\n\n\n\n\n\n\n\n\n\n\n\n7\nReVeal: A Physics-Informed Neural Network for High-Fidelity Radio Environment Mapping\nDySPAN\n2025\nMukaram Shahid; Kunal Das; Hadia Ushaq; Hongwei Zhang; Jiming Song; Daji Qiao\nIowa State University\n\n\n\n\n\n\n\n\nAmes, IA, USA\n\n\n\n\n\n\n\n\n\n\n\n\n\n8\nMulti-Path Aware Radio Map Construction for 6G Environment-Aware Communication: A Helmholtz Equation-Informed Approach\nICCC\n2025\nXiucheng Wang; Peilin Zheng; Nan Cheng; Conghao Zhou; Ruijin Sun; Guiyang Luo\nState Key Laboratory of ISN and School of Telecommunications Engineering, Xidian University, Xiâ€™an, 710071, China\n\n\n\n\n\n\n\n\nâ€ School of Computer Science and Technology, Beijing University of Posts and Telecommunications, Beijing, China\n\n\n\n\n\n\n\n\n\n\n\n\n\nâ€¡ Department of Electrical and Computer Engineering, University of Waterloo, Waterloo, ON N2L 3G1, Canada\n\n\n\n\n\n\n\n\n\n\n\n\n\n9\nPhysics-Informed Neural Networks for Pathloss Prediction\nMLSP\n2023\nSteffen Limmer, Alberto Martinez Alba, Nicola Michailow\nSiemens AG, Technology, Otto-Hahn-Ring 6, 81739 Munich, Germany\nè®©ç¥ç»ç½‘ç»œè¾“å‡ºæ‹Ÿåˆç‰©ç†å‡½æ•°\n\n\n\n\n\n\n\n10\nA More General Electromagnetic Inverse Scattering Method Based on Physics-Informed Neural Network\nTGRS\n2023\nYi-Di Hu, Xiao-Hua Wang, Hui Zhou , Lei Wang, Bing-Zhong Wang\n\nä¸æ˜¯ä½œä¸ºæŸå¤±å‡½æ•°å¼•å¯¼\n\n\n\n\n\n\n\n11\nRADIOLUNADIFF: ESTIMATION OF WIRELESS NETWORK SIGNAL STRENGTH IN LUNAR TERRAIN\narxiv\n2025\nPaolo Torrado1, Anders Pearson1, Jason Klein2, Alexander Moscibroda3 and Joshua Smith1\n1University of Washington, 2Cornell University, 3The Bear Creek School\nç½‘ç»œé¢„æµ‹k2å›¾\n\n\n\n\n\n\n\nå®¡ç¨¿æ„è§\n\n\n\n\n\n\n\n\n\n\n\n\n\nåºå·\nåç§°\næœŸåˆŠ&#x2F;ä¼šè®®\nå¹´ä»½\nä½œè€…\nå•ä½\nç½‘ç»œç»“æ„\nä»£ç åœ°å€\nè¡¥å……\nå‚æ•°é‡\nå¼•ç”¨é‡\nnotes\n\n\n1\nREM-U-Net_Deep_Learning_Based_Agile_REM_Prediction_With_Energy-Efficient_Cell-Free_Use_Case\nIEEE Open Journal of Signal Processing\n2024\nHAZEM SALLOUHA 1,2 (Member, IEEE), SHAMIK SARKAR 2 (Member, IEEE), ENES KRIJESTORAC 2, AND DANIJELA CABRIC 2 (Fellow, IEEE)\n1Department of Electrical Engineering, KU Leuven, 3000 Leuven, Belgium 2Department of Electrical and Computer Engineering, University of California, Los Angeles, Los Angeles, CA 90095 USA\n\n\n\n\n\n\n\n\n2\nQuantized Radio Map Estimation Using Tensor and Deep Generative Models\nIEEE TRANSACTIONS ON SIGNAL PROCESSING\n2024\nSubash Timilsina , Sagar Shrestha ,and Xiao Fu\n\n\n\n\n\n\n\n\n\n1\nTransformer based Radio Map Prediction Model for Dense Urban Environments\n2021 13th International Symposium on Antennas, Propagation and EM Theory (ISAPE)\n2021\nYu Tian; Shuai Yuan; Weisheng Chen; Naijin Liu\nä¸­å›½ç©ºé—´æŠ€æœ¯ç ”ç©¶é™¢\nTransformer\nhttps://github.com/QXSLAB/RadioTrans_Official\n\n\n\n\n\n\ndiffusion å…¨å®¶æ¡¶\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRadioDiff-Inverse: Diffusion Enhanced Bayesian Inverse Estimation for ISAC Radio Map Construction\narxiv\n2025\nXiucheng Wang, Zhongsheng Fang, Nan Cheng, Ruijin Sun, Zan Li, Xuemin (Sherman)Shen\n\nhttps://arxiv.org/pdf/2504.14298\nhttps://github.com/UNIC-Lab/iRadioDiff\n\n\n\n\n\n\n\niRadioDiff: Physics-Informed Diffusion Model for Indoor Radio Map Construction and Localization\narxiv\n2025\nXiucheng Wang, Tingwei Yuan, Yang Cao, Nan Cheng, Ruijin Sun, Weihua Zhuang\n\nhttps://arxiv.org/abs/2511.20015\n\n\n\n\n\n\n\n\nRadioDiff-Turbo: Lightweight Generative Large Electromagnetic Model for Wireless Digital Twin Construction\nINFOCOM WKSHPS\n2025\nXiucheng Wang; Peilin Zheng; Nan Cheng; Ruijin Sun; Junting Chen; Keda Tao\n\nhttps://ieeexplore.ieee.org/abstract/document/11152929\n\n\n\n\n\n\n\n\nDenoising Diffusion Probabilistic Model for Radio Map Estimation in Generative Wireless Networks\nTCCN\n2025\nXuanhao Luo; Zhizhen Li; Zhiyuan Peng; Mingzhe Chen; Yuchen Liu\n\nhttps://ieeexplore.ieee.org/abstract/document/10843401\n\n\n\n\n\n\n\n\nHigh-Efficiency Urban 3D Radio Map Estimation Based on Sparse Measurements\nTVT\n2025\nXinwei Chen; Xiaofeng Zhong; Zijian Zhang; Linglong Dai; Shidong Zhou\n\nhttps://ieeexplore.ieee.org/abstract/document/11015096\n\n\n\n\n\n\n\n\nRadio Map Estimation Based on Generative Artificial Intelligence: Evolution from Point-Level to Cell-Level Prediction\nMCOM\n2025\nYi Zheng; Ji Wang; Wenwu Xie; Xingwang Li; Shahid Mumtaz; Anwer Al-Dulaimi\n\nhttps://ieeexplore.ieee.org/abstract/document/10974726\n\n\n\n\n\n\n\n\nLeveraging Transfer Learning for Radio Map Estimation via Mixture of Experts\nTCCN\n2025\nRahul Kumar Jaiswal; Mohamed Elnourani; Siddharth Deshmukh; Baltasar Beferull-Lozano\n\nhttps://ieeexplore.ieee.org/abstract/document/11005396\n\n\n\n\n\n\n\n","categories":["ä»“åº“"],"tags":["æ•´ç†","èµ„æº"]},{"title":"æ·±åº¦å­¦ä¹ ç›¸å…³ç¬”è®°","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/","content":"ä¼˜åŒ–å™¨Adam : Adaptive Moment Estimationç‰¹ç‚¹ï¼š\n\nè‡ªé€‚åº”å­¦ä¹ ç‡ï¼šæ¯ä¸ªå‚æ•°éƒ½æœ‰è‡ªå·±çš„å­¦ä¹ ç‡\nå¸¦åå·®ä¿®æ­£ï¼šåˆæœŸæ”¶æ•›æ›´ç¨³å®š\n\nç¼ºç‚¹ï¼šæ­£åˆ™åŒ–æ•ˆæœä¸å¥½ï¼ŒL2 weight decay å®é™…ä¸Šæ˜¯â€œå¯¹æ¢¯åº¦åŠ è¡°å‡â€ï¼Œä¸æ˜¯çœŸæ­£æ­£åˆ™åŒ–å‚æ•°\nAdamW : Adam + æ­£ç¡®çš„ Weight DecayAdam é‡Œ L2 weight decay æ˜¯å’Œæ¢¯åº¦æ··åˆçš„ â†’ å®é™…ä¸Šæ˜¯â€œä¿®æ”¹æ¢¯åº¦â€ï¼Œå®¹æ˜“å½±å“åŠ¨é‡\n&#x3D;&#x3D;&gt; AdamW æŠŠ weight decay ç‹¬ç«‹åº”ç”¨åœ¨å‚æ•°æ›´æ–°ä¸Š\nä¼˜ç‚¹ï¼š\n\næ­£åˆ™åŒ–æ›´çº¯ç²¹ â†’ æé«˜æ³›åŒ–èƒ½åŠ›\nè®­ç»ƒæ›´ç¨³å®š â†’ å¸¸ç”¨äº Transformer å’Œå¤§æ¨¡å‹\n\nğŸ’¡ æ€»ç»“ä¸€å¥è¯ï¼šAdamW å°±æ˜¯å¸¦æ­£ç¡® L2 æ­£åˆ™çš„ Adam\nLAMB : Layer-wise Adaptive Moments optimizer for Batch training &#x3D;&#x3D;&gt; ä¸ºå¤§ batch &#x2F; å¤§æ¨¡å‹è®­ç»ƒè®¾è®¡çš„ AdamW å˜ä½“\nLayer-wise è‡ªé€‚åº”ç¼©æ”¾: æ¯ä¸€å±‚çš„å‚æ•°æ›´æ–° \\Delta \\theta æŒ‰æ¯”ä¾‹ç¼©æ”¾\n\n&#x3D;&#x3D;&gt; è§£å†³å¤§ batch æ—¶å­¦ä¹ ç‡ä¸å‡è¡¡çš„é—®é¢˜\n\nä¿ç•™ AdamW çš„ä¼˜ç‚¹ï¼šåå·®ä¿®æ­£ + weight decay ç‹¬ç«‹\n\nç‰¹ç‚¹ï¼š\n\né€‚åˆå¤§ batch è®­ç»ƒï¼ˆæ¯”å¦‚ BERT æˆ– GPT å¤§æ¨¡å‹è®­ç»ƒï¼‰\nå­¦ä¹ ç‡å¯ä»¥æ›´å¤§ï¼Œæ”¶æ•›ç¨³å®š\nå¯¹å°æ¨¡å‹ã€å° batch ä¸ä¸€å®šæ¯” AdamW æœ‰ä¼˜åŠ¿\n\nAdam&#x2F;SGD çš„é—®é¢˜ï¼šåœ¨å¤§ batch è®­ç»ƒæ—¶ï¼Œç›´æ¥æ”¾å¤§å­¦ä¹ ç‡ä¼šå¯¼è‡´éœ‡è¡ç”šè‡³ä¸æ”¶æ•›ã€‚\nLAMB çš„æ”¹è¿›ï¼š\n\nå®ƒä¸ä»…åƒ Adam ä¸€æ ·å¯¹æ¢¯åº¦åšè‡ªé€‚åº”ç¼©æ”¾ï¼Œè¿˜å¯¹ å‚æ•°æœ¬èº«çš„èŒƒæ•° åšå½’ä¸€åŒ–ã€‚\næ¢å¥è¯è¯´ï¼Œå®ƒç¡®ä¿â€œæ›´æ–°æ­¥é•¿â€å’Œâ€œå‚æ•°å¤§å°â€æ˜¯æˆæ¯”ä¾‹çš„ï¼Œé¿å…æŸäº›å‚æ•°æ›´æ–°è¿‡å¤§&#x2F;è¿‡å°ã€‚\n\nè¿™è®© å¤§ batch è®­ç»ƒæ—¶ä¾ç„¶èƒ½ç¨³å®šæ”¶æ•›ï¼Œå¹¶ä¸”å…è®¸ç”¨æ›´å¤§å­¦ä¹ ç‡ï¼ŒåŠ é€Ÿè®­ç»ƒ\næ€»ç»“ï¼š\nä¼˜åŒ–å™¨ä¼šåŠ¨æ€è°ƒæ•´ æ­¥é•¿ï¼ˆå­¦ä¹ ç‡ï¼‰ï¼š\n\nSGDï¼šå›ºå®šå­¦ä¹ ç‡ï¼Œå•çº¯å¾€æ¢¯åº¦æ–¹å‘èµ°ã€‚\nAdamï¼šç”¨ä¸€é˜¶ï¼ˆå‡å€¼ï¼‰å’ŒäºŒé˜¶ï¼ˆæ–¹å·®ï¼‰çŸ©ä¼°è®¡ï¼Œå¯¹æ¯ä¸ªå‚æ•°è‡ªé€‚åº”è°ƒèŠ‚å­¦ä¹ ç‡ï¼ˆå¤§æ¢¯åº¦ â†’ ç¼©å°æ­¥é•¿ï¼Œå°æ¢¯åº¦ â†’ æ”¾å¤§å­¦ä¹ ç‡ï¼‰ã€‚\nAdamWï¼šåœ¨ Adam åŸºç¡€ä¸Šä¿®æ­£ weight decay é€»è¾‘ï¼Œè®©æ­£åˆ™åŒ–æ•ˆæœæ›´çº¯ç²¹ã€‚\nå­¦ä¹ ç‡è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼šé¢å¤–å®šä¹‰éšè®­ç»ƒè¿‡ç¨‹å˜åŒ–çš„å­¦ä¹ ç‡ï¼ˆwarmupã€cosine decay ç­‰ï¼‰ã€‚\n\næ­£åˆ™åŒ–å®šä¹‰ï¼šåœ¨æ¨¡å‹è®­ç»ƒæ—¶ï¼ŒåŠ ä¸Šä¸€ä¸ªçº¦æŸï¼Œè®©å®ƒä¸è¦éšæ„æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œä»è€Œæé«˜æ³›åŒ–èƒ½åŠ›ã€‚\n\næ²¡æ­£åˆ™åŒ– â†’ æ¨¡å‹å¯èƒ½è¿‡æ‹Ÿåˆ â†’ åœ¨è®­ç»ƒé›†ä¸Šå¾ˆå¥½ï¼Œä½†æµ‹è¯•é›†ä¸Šè¡¨ç°å·®\næ­£åˆ™åŒ– â†’ ç»™æ¨¡å‹â€œç©¿ä¸Šæ·é”â€ï¼Œè®©å®ƒå­¦åˆ°æ›´å¹³æ»‘ã€æ›´ç®€å•çš„è§„å¾‹\n\næ•°å­¦è§£é‡Šï¼šåœ¨åŸæœ¬çš„æŸå¤±å‡½æ•°ä¸Šæ·»åŠ ä¸€ä¸ªæƒ©ç½šé¡¹\nL2 æ­£åˆ™ï¼ˆRidge &#x2F; Weight Decayï¼‰å…¬å¼ï¼š\n\nç‰¹ç‚¹ï¼š\n\næƒ©ç½šå‚æ•°çš„å¹³æ–¹ â†’ å¤§å‚æ•°ä¼šè¢«å‹å°\nå¯¹æ‰€æœ‰å‚æ•°å¹³æ»‘åœ°ç¼©å° â†’ æ¨¡å‹å‚æ•°åˆ†å¸ƒæ›´å‡åŒ€\nåœ¨ä¼˜åŒ–å™¨é‡Œå¯¹åº” weight decay\n\nç›´è§‚ç†è§£ï¼š\n\næƒ³è±¡æ¯ä¸ªå‚æ•°æ˜¯ä¸€æ ¹å¼¹ç°§ï¼ŒL2 æƒ©ç½šè®©å¼¹ç°§å°½é‡ä¸è¦ä¼¸å¾—å¤ªé•¿\næ¨¡å‹ä¸æ•¢è¿‡åº¦ä¾èµ–æŸä¸ªç‰¹å¾ â†’ æ³›åŒ–èƒ½åŠ›å¼º\n\nä¸ºä»€ä¹ˆå¤§å‚æ•°è¢«å‹ç¼©ï¼Œæ¨¡å‹ä¸ä¾èµ–å•ä¸ªç‰¹å¾ï¼Ÿ\n\nå‡è®¾æŸä¸ªç‰¹å¾çš„æƒé‡å¤§ â†’ å®ƒåœ¨é¢„æµ‹ä¸­èµ·å†³å®šæ€§ä½œç”¨\nL2 æ­£åˆ™ä¼šæŠŠæ‰€æœ‰æƒé‡éƒ½ç¼©å° â†’ å¤§æƒé‡è¢«æ‹‰å° â†’ æ¨¡å‹ä¸èƒ½åªä¾èµ–å®ƒ\n\nç»“æœï¼š\n\næ¨¡å‹åˆ†å¸ƒåœ¨æ›´å¤šå‚æ•°ä¸Š â†’ ç‰¹å¾åˆ©ç”¨æ›´å‡è¡¡\næ³›åŒ–èƒ½åŠ›æå‡ï¼Œä¸ä¼šå› ä¸ºè®­ç»ƒé›†æŸä¸ªç‰¹å¾å¼‚å¸¸è€Œè¿‡æ‹Ÿåˆ\n\nL1 æ­£åˆ™ï¼ˆLassoï¼‰å…¬å¼ï¼š\n\nç‰¹ç‚¹ï¼š\n\næƒ©ç½šå‚æ•°ç»å¯¹å€¼\nä¼šäº§ç”Ÿ ç¨€ç–è§£ â†’ å¾ˆå¤šå‚æ•°è¢«å‹åˆ° 0\nå¯ä»¥åšç‰¹å¾é€‰æ‹©ï¼šä¿ç•™é‡è¦ç‰¹å¾ï¼Œå¿½ç•¥ä¸é‡è¦ç‰¹å¾\n\nç›´è§‚ç†è§£ï¼š\n\næƒ³è±¡æŠŠæ¯æ ¹å‚æ•°çš„é•¿åº¦ç›´æ¥ç æ‰ä¸€éƒ¨åˆ† â†’ ä¸é‡è¦çš„ç›´æ¥ç æˆ 0\n\nç‰¹ç‚¹ï¼š\n\næ¢¯åº¦åœ¨ 0 é™„è¿‘ä¸è¿ç»­ â†’ å¾ˆå®¹æ˜“æŠŠå°å‚æ•°ç›´æ¥å‹ä¸º 0\né‡è¦å‚æ•°ä¿ç•™ â†’ 0 çš„å‚æ•°å¯¹åº”â€œä¸é‡è¦â€ç‰¹å¾è¢«å¿½ç•¥\n\næ‰€ä»¥ï¼š\n\nç¨€ç–è§£ &#x3D; è‡ªåŠ¨é€‰æ‹©ç‰¹å¾\næ¨¡å‹åªä¿ç•™å¯¹é¢„æµ‹è´¡çŒ®å¤§çš„ç‰¹å¾\n\nè¡¥å……ï¼šå‚æ•° æ¢¯åº¦ æƒé‡ å­¦ä¹ ç‡\næƒé‡ï¼ˆweightï¼‰ï¼šå°±æ˜¯æ¨¡å‹é‡Œçš„å‚æ•°ã€‚\n\næ¨¡å‹å­¦ä¹ çš„æ ¸å¿ƒç›®æ ‡å°±æ˜¯æ‰¾åˆ°ä¸€ç»„æœ€ä¼˜æƒé‡ï¼Œä½¿å¾—é¢„æµ‹ç»“æœå’ŒçœŸå®æ ‡ç­¾å°½å¯èƒ½æ¥è¿‘ã€‚\n\næ¢¯åº¦ï¼ˆgradientï¼‰ï¼šæŸå¤±å‡½æ•°å¯¹æƒé‡çš„å¯¼æ•°ï¼ˆå¾€å“ªèµ°ï¼‰\n\nå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼šå¦‚æœæˆ‘ç¨å¾®è°ƒæ•´æŸä¸ªæƒé‡ï¼ŒæŸå¤±ä¼šå¾€å“ªä¸ªæ–¹å‘å¢å¤§&#x2F;å‡å°ã€‚\næ‰€ä»¥æ¢¯åº¦æœ¬è´¨ä¸Šæ˜¯æ›´æ–°æƒé‡çš„æ–¹å‘æŒ‡å¼•å™¨ï¼Œè€Œä¸æ˜¯æƒé‡æœ¬èº«ã€‚\n\nå­¦ä¹ ç‡ï¼šæ§åˆ¶â€œæ­¥é•¿â€ï¼Œåœ¨æ¢¯åº¦æ›´æ–°å’Œæ­£åˆ™åŒ–ä¸­éƒ½èµ·ä½œç”¨ï¼ˆèµ°çš„æ­¥é•¿ï¼‰\n\næ§åˆ¶æ¢¯åº¦ä¸‹é™å’Œæ­£åˆ™åŒ–å‹ç¼©çš„æ­¥é•¿\nå­¦ä¹ ç‡è¡°å‡ï¼šéšè®­ç»ƒé€æ­¥å‡å° \\eta\n\nåˆæœŸå¤§æ­¥ â†’ å¿«é€Ÿä¸‹é™\n\nåæœŸå°æ­¥ â†’ æ”¶æ•›ç¨³å®š\n\nä½œç”¨äºæ¢¯åº¦å’Œæ­£åˆ™åŒ–ä¸€èµ·ï¼Œé¿å…æ”¶æ•›æŒ¯è¡\n\n\næ¢¯åº¦ä¸‹é™ï¼šæ ¹æ®æ¢¯åº¦è°ƒæ•´å‚æ•°\næ­£åˆ™åŒ–ï¼šåœ¨æŸå¤±å‡½æ•°ä¸­åŠ ä¸Šäº†ä¸€é¡¹ï¼Œæ±‚å¯¼ä¹‹åæƒé‡æ›´æ–°ä¸­å¤šäº†ä¸€é¡¹æ­£åˆ™é¡¹å¯¹æ¢¯åº¦çš„è´¡çŒ®\nweight decayï¼šä¸ä»æ¢¯åº¦è®¡ç®—ï¼Œç›´æ¥å¯¹å‚æ•°è¿›è¡Œè¡°å‡ &#x3D;&#x3D;&gt; é¿å…å’ŒåŠ¨é‡&#x2F;è‡ªé€‚åº”æ¢¯åº¦æ··åˆå¹²æ‰°ï¼Œæ•°å€¼è¡¨ç°æ›´ç¨³å®šï¼ˆè¿™å°±æ˜¯ AdamW çš„æ ¸å¿ƒæ”¹è¿› â€“&gt; æŠŠä¸¤è€…åŒºåˆ†å¼€ï¼‰ã€‚\nä¼˜åŒ–å™¨ä¸­çš„weight decayWeight Decay å°±æ˜¯ L2 æ­£åˆ™åŒ–åœ¨ä¼˜åŒ–å™¨é‡Œçš„å®ç°æ–¹å¼\nä¼ ç»Ÿåšæ³•ï¼šåœ¨æ›´æ–°å‚æ•°çš„æ—¶å€™ç›´æ¥åŠ ä¸Šå¯¹å‚æ•°çš„æƒ©ç½š\n\n\nä¼˜åŒ–å™¨ä¸­çš„æ­£åˆ™åŒ–é€šå¸¸åªæœ‰ L2ï¼ˆWeight Decayï¼‰ã€‚L1 å¯ä»¥è‡ªå·±æ‰‹åŠ¨åŠ åˆ°æŸå¤±å‡½æ•°é‡Œï¼Œä½†ä¸»æµä¼˜åŒ–å™¨ï¼ˆAdamWã€LAMBã€SGDï¼‰é»˜è®¤åªæ”¯æŒ L2&#x2F;Weight Decay\næœ‰äº›åœºæ™¯ä¼šæ··åˆä½¿ç”¨ï¼ˆæ¯”å¦‚ Elastic Net &#x3D; L1 + L2ï¼‰\næƒé‡ï¼ˆå‚æ•°ï¼‰æ›´æ–°æƒé‡ï¼ˆå‚æ•°ï¼‰æ›´æ–°æ˜¯ æ¢¯åº¦ + æ­£åˆ™åŒ– + ä¼˜åŒ–å™¨æœºåˆ¶ å…±åŒä½œç”¨çš„ç»“æœï¼š\n\næ¢¯åº¦ï¼šæ¥è‡ªæŸå¤±å‡½æ•° \\mathcal{L}ï¼Œå‘Šè¯‰ä½ è¯¥å¾€å“ªèµ°ã€èµ°å¤šè¿œï¼ˆæ–¹å‘ + å¤§å°ï¼‰ã€‚\næ­£åˆ™åŒ–ï¼šç›¸å½“äºåœ¨æŸå¤±å‡½æ•°é‡ŒåŠ â€œæƒ©ç½šé¡¹â€ï¼Œé™åˆ¶å‚æ•°è§„æ¨¡æˆ–ç¨€ç–åŒ–ï¼ˆL1&#x2F;L2ï¼‰ï¼Œé¿å…æ¨¡å‹å¤ªå¤æ‚ã€‚\nä¼˜åŒ–å™¨ï¼šåœ¨ç”¨æ¢¯åº¦æ›´æ–°å‚æ•°æ—¶ï¼Œé¢å¤–å¼•å…¥æŠ€å·§ï¼ˆåŠ¨é‡ã€å­¦ä¹ ç‡è°ƒåº¦ã€æƒé‡è¡°å‡ç­‰ï¼‰ï¼Œè®©è®­ç»ƒæ›´å¿«ã€æ›´ç¨³ã€‚\n\nä½ å¯ä»¥æŠŠå®ƒæƒ³æˆï¼šæ¢¯åº¦æ˜¯æŒ‡è·¯ç¯ï¼Œæ­£åˆ™åŒ–æ˜¯ä¿®è·¯æ—¶åŠ çš„æŠ¤æ ï¼Œä¼˜åŒ–å™¨æ˜¯å¯¼èˆªè½¯ä»¶ï¼Œä¸‰è€…ä¸€èµ·å†³å®šä½ æ€ä¹ˆèµ°åˆ°ç»ˆç‚¹ã€‚\néšæœºç§å­åœ¨æ·±åº¦å­¦ä¹ é‡Œå¾ˆå¤šä¸œè¥¿éƒ½å¸¦â€œéšæœºæ€§â€ï¼š\n\næ•°æ®æ‰“ä¹±ï¼ˆshuffle&#x3D;True æ—¶ï¼Œæ¯ä¸ª epoch æ ·æœ¬é¡ºåºä¼šéšæœºå˜åŒ–ï¼‰\nå‚æ•°åˆå§‹åŒ–ï¼ˆæ¨¡å‹çš„æƒé‡é€šå¸¸ç”¨éšæœºæ•°åˆå§‹åŒ–ï¼‰\nDropoutï¼ˆæ¯æ¬¡ä¼šéšæœºä¸¢æ‰ä¸åŒçš„ç¥ç»å…ƒï¼‰\næ•°æ®å¢å¼ºï¼ˆéšæœºè£å‰ªã€ç¿»è½¬ç­‰ï¼‰\n\nå¦‚æœä¸è®¾ç§å­ï¼Œæ¯æ¬¡è¿è¡Œéƒ½ä¼šä¸ä¸€æ ·ï¼Œç»“æœå¯èƒ½æ³¢åŠ¨å¾ˆå¤§ã€‚\n&#x3D;&#x3D;&gt; è®¾å®šéšæœºç§å­ &#x3D; å›ºå®šâ€œéšæœºæ•°ç”Ÿæˆå™¨â€çš„èµ·ç‚¹ï¼Œä¿è¯ä½ ä¸‹æ¬¡è·‘å‡ºæ¥çš„ç»“æœå’Œè¿™æ¬¡ä¸€æ ·ï¼ˆå¤ç°å®éªŒï¼‰ã€‚\n","categories":["åŸºç¡€çŸ¥è¯†","æ·±åº¦å­¦ä¹ "],"tags":["notes"]},{"title":"å¼€å‘ç›¸å…³èµ„æ–™æ•´ç†","url":"/%E4%BB%93%E5%BA%93/%E8%B5%84%E6%96%99%E6%95%B4%E7%90%86/","content":"æ¨èè¯¾å‘¨å¿—æ˜çš„è½¯ä»¶æ¶æ„è¯¾ï¼ˆæ„ç­‘å¤§å‹çš„å¯é è½¯ä»¶ç³»ç»Ÿï¼‰ï¼šhttps://time.geekbang.org/opencourse/intro/100064201\nClaude&amp;Cursoræ¡ˆä¾‹é›†\n\nå¬è¯¾åœ°å€ï¼šhttps://u.geekbang.org/subject/intro/1010817\nExcalidrawåº”ç”¨ä»£ç åœ°å€ï¼šhttps://github.com/tyrchen/excaliapp\nAgentä»£ç åœ°å€ï¼šhttps://github.com/tyrchen/claude-agents\n\nå­¦ä¹ æ¨¡å¼\n\nAPP ç«¯ï¼šæ‰“å¼€æå®¢æ—¶é—´APP - ä½¿ç”¨ä½ æŠ¥åçš„æ‰‹æœºå·ç™»é™† - ç‚¹å‡»ã€æˆ‘çš„ã€‘- æ‰¾åˆ°ã€è¯¾ç¨‹ã€‘å°±å¯ä»¥è§‚çœ‹å­¦ä¹ å•¦\n\nPC ç«¯ï¼šhttps://time.geekbang.org/ ã€‚ä½¿ç”¨ä½ æŠ¥åçš„å¾®ä¿¡&#x2F;æ‰‹æœºå·è¿›è¡Œç™»å½•-ç‚¹å‡»ã€å³ä¸Šè§’æˆ‘çš„å¤´åƒã€‘ã€æˆ‘çš„è®­ç»ƒè¥ã€‘-ã€è¯¾ç¨‹ã€‘\n\n\næ¨èä¹¦è®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ï¼šï¼ˆä¸­æ–‡ç¿»è¯‘ç‰ˆï¼‰https://github.com/Vonng/ddia\näº§å“è°ƒç ”ç½‘ç«™å‚è€ƒæ˜é‡‘ã€çŸ¥ä¹ã€ç‰›å®¢ã€ç™¾åº¦è´´å§\nå¼€å‘è€…å®¢æ ˆï¼šhttps://github.com/Qbian61/forum-java\né“¾æ»´ï¼šhttps://github.com/88250/symphony\npybbsï¼šhttps://github.com/tomoya92/pybbs\nlearnkuï¼šhttps://learnku.com/articles/40839\né»‘å®¢è¯´ï¼šhttps://hackertalk.net/\nè®¾è®¡è½¯ä»¶æå®šè®¾è®¡ï¼šhttps://www.gaoding.com\ncanvaï¼šhttps://www.canva.cn\nå·¥ç¨‹å®ç°DBç›¸å…³æ•°æ®åº“è¡¨è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆLiquibaseï¼‰â€‹\thttps://www.yuque.com/itwanger/az7yww/wo81a7zngcim6wvb\nâ€‹\thttps://spring.hhui.top/spring-blog/2022/12/21/221221-SpringBoot%E7%B3%BB%E5%88%97%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96-DataSourceInitializer%E6%96%B9%E5%BC%8F/\nâ€‹\thttps://spring.hhui.top/spring-blog/2022/12/21/221221-SpringBoot%E7%B3%BB%E5%88%97%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96-jpa%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F/\nâ€‹\thttps://spring.hhui.top/spring-blog/2022/12/21/221221-SpringBoot%E7%B3%BB%E5%88%97%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96-DataSourceInitializer%E6%96%B9%E5%BC%8F/\n","categories":["ä»“åº“"],"tags":["æ•´ç†","èµ„æº"]},{"title":"é«˜å¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆç»†ç²’åº¦å®ä¾‹","url":"/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%BC%80%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E7%BB%86%E7%B2%92%E5%BA%A6%E5%AE%9E%E4%BE%8B/","content":"æ•°æ®åº“è¡¨ä¸­æœ‰ä¸€ä¸ªå­—æ®µä¼šé¢‘ç¹æ›´æ–°ï¼ˆæ¯”å¦‚é€’å¢ï¼‰è¿™æ—¶ä½ å¯ä»¥ï¼š\n\nå…ˆæŸ¥è¯¢ï¼Œå¦‚æœå­˜åœ¨å°±æ›´æ–°ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆå§‹åŒ–\nç”¨ä¸€æ¡SQLå®Œæˆæ’å…¥å’Œæ›´æ–°ï¼Œæ— éœ€å…ˆæŸ¥è¯¢ï¼ˆåˆ©ç”¨idå’Œtypeçš„å”¯ä¸€ç´¢å¼•ï¼‰\n\n-- æ ¸å¿ƒSQLï¼šå¦‚æœè®°å½•å­˜åœ¨åˆ™ cnt+1ï¼Œä¸å­˜åœ¨åˆ™åˆå§‹åŒ– cnt=1INSERT INTO read_count (document_id, document_type, cnt)VALUES (101, 1, 1)ON DUPLICATE KEY UPDATE cnt = cnt + 1;\n\nåŸç†ï¼šå› ä¸º idx_document_id_type æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œå½“æ’å…¥çš„ (document_id, document_type) å·²å­˜åœ¨æ—¶ï¼Œä¼šè§¦å‘ **ON DUPLICATE KEY UPDATE**ï¼Œæ‰§è¡Œ cnt = cnt + 1ï¼›\nä¼˜åŠ¿ï¼šåŸå­æ€§æ“ä½œï¼Œé¿å…å¹¶å‘ä¸‹çš„ â€œæŸ¥è¯¢ - æ›´æ–°â€ ä¸ä¸€è‡´é—®é¢˜ï¼Œæ€§èƒ½æ›´é«˜ã€‚\næ³¨æ„ï¼šç”¨é€’å¢çš„æ–¹å¼è€Œä¸æ˜¯èµ‹å€¼çš„æ–¹å¼ &#x3D;&#x3D;&gt; å¹¶å‘è¯·æ±‚ä¸‹ä¿è¯è®¡æ•°å‡†ç¡®ï¼ˆå¦‚æœèµ‹å€¼å¯èƒ½ä¼šå‡ºç°è¦†ç›–æ›´æ–°çš„é—®é¢˜ï¼‰\nå…¶ä»–ä¼˜åŒ–æ€è·¯ï¼š\nç¼“å†²å±‚ç¼“å†²ï¼šç”¨**redisåšè®¡æ•°ç¼“å†²ï¼ˆè¿˜å¯ä»¥ç”¨æ¥åšuvç»Ÿè®¡**ï¼‰ï¼Œå†å®šæ—¶æŠŠredisçš„å€¼æ‰¹é‡åŒæ­¥åˆ°redis\nå¼‚æ­¥æ›´æ–°ï¼šè®¡æ•°è¯·æ±‚æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œåå°çš„æ¶ˆè´¹é˜Ÿåˆ—å†æ‰¹é‡æ›´æ–°æ•°æ®åº“ï¼Œä¸ç”¨é˜»å¡ç­‰å¾…è¯·æ±‚\nåˆ†åº“åˆ†è¡¨ï¼šå¦‚æœå•è¡¨æ•°æ®é‡å¤ªå¤§äº†ï¼Œå¯ä»¥æŒ‰ç…§document_typeåˆ†è¡¨ï¼Œæˆ–è€…æŒ‰ç…§document_idå“ˆå¸Œåˆ†è¡¨ï¼Œåˆ†æ•£å†™å…¥å‹åŠ›\n\n","categories":["åŸºç¡€çŸ¥è¯†","å¼€å‘"],"tags":["å¼€å‘","å®ä¾‹","é«˜å¹¶å‘"]},{"title":"\"Frequency Domain-Based Diffusion Model for Unpaired Image\" Dehazing","url":"/papers/work2/papers/work2/postpapers-work2-Frequency-Domain-Based-Diffusion-Model-for-Unpaired-Image-Dehazing/","content":"åŸºäºé¢‘åŸŸçš„éé…å¯¹å›¾åƒå»é›¾æ‰©æ•£æ¨¡å‹\nå›¾åƒå»é›¾ï¼šä»è¢«é›¾éœ¾é®æŒ¡çš„å›¾åƒä¸­æ¢å¤æ¸…æ™°å›¾åƒã€‚ä¼ ç»Ÿæ–¹æ³•å¤šä¾èµ–ç‰©ç†æ¨¡å‹ï¼ˆå¦‚å¤§æ°”æ•£å°„æ¨¡å‹ï¼‰æˆ–é…å¯¹è®­ç»ƒæ•°æ®ï¼ˆæ¸…æ™°å›¾åƒ + å¯¹åº”é›¾å›¾åƒï¼‰ã€‚\n\nè¾“å…¥ï¼šé›¾å›¾åƒï¼ˆHazy Imageï¼‰\nè¾“å‡ºï¼šå»é›¾å›¾åƒï¼ˆDehazed&#x2F;Clear Imageï¼‰\nç›®æ ‡ï¼šæ¢å¤æ¸…æ™°å›¾åƒçš„é¢œè‰²ã€çº¹ç†å’Œç»“æ„ï¼ŒåŒæ—¶å»é™¤é›¾éœ¾é€ æˆçš„è¡°å‡å’Œé¢œè‰²åç§»ã€‚åœ¨éé…å¯¹è®¾ç½®ä¸‹ï¼Œä½  ä¸éœ€è¦æ¯ä¸ªé›¾å›¾åƒéƒ½å¯¹åº”ä¸€ä¸ªæ¸…æ™°å›¾åƒï¼Œè®­ç»ƒæ•°æ®æ›´çµæ´»ï¼š\næ•°æ®é›†åªæä¾›ä¸€ç»„é›¾å›¾åƒå’Œä¸€ç»„æ¸…æ™°å›¾åƒï¼Œä½†æ²¡æœ‰é€ä¸€å¯¹åº”å…³ç³»ã€‚\né€šå¸¸ä½¿ç”¨ ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰ æˆ– å¯¹æ¯”å­¦ä¹ ï¼ˆContrastive Learningï¼‰ æ¥å­¦ä¹ åŸŸé—´æ˜ å°„ï¼š\né›¾åŸŸ â†’ æ¸…æ™°åŸŸ\nä¿æŒå›¾åƒå†…å®¹ä¸å˜ï¼Œä½†å»é™¤é›¾éœ¾ç‰¹å¾â€œå¿½ç•¥äº†é¢‘åŸŸçš„é›¾éœ¾ç‰¹æ€§ï¼ˆé›¾éœ¾ç›¸å…³çš„é€€åŒ–ä¸»è¦è¡¨ç°åœ¨å¹…åº¦è°±ä¸Šï¼‰â€ï¼Œè¿™å°±æ¶‰åŠ å›¾åƒé¢‘åŸŸåˆ†æï¼š\n\n\né›¾éœ¾å¯¹å›¾åƒä¸»è¦è¡¨ç°ä¸º ä½é¢‘è¡°å‡ã€é«˜é¢‘æ¨¡ç³Šï¼š\nå¹…åº¦è°±çš„ä½é¢‘éƒ¨åˆ†ï¼ˆæ•´ä½“äº®åº¦å’Œå¤§ç»“æ„ï¼‰ä¼šè¢«è¡°å‡æˆ–åç§»\né«˜é¢‘éƒ¨åˆ†ï¼ˆçº¹ç†ã€è¾¹ç¼˜ï¼‰ä¼šæ¨¡ç³ŠåŸºäºå¯¹æ¯”å­¦ä¹ çš„ä¸»æµæ–¹æ³•å¦‚æœåªåœ¨ ç©ºé—´åŸŸï¼ˆRGBåƒç´ æˆ–ç‰¹å¾å›¾ï¼‰ å¯¹æ¯”ï¼Œå¯èƒ½ä¼š ä¿ç•™é›¾éœ¾æ®‹ä½™ æˆ–ç ´åçº¹ç†ã€‚\n\n\n\n\nabstructéé…å¯¹å›¾åƒå»é›¾ï¼ˆUnpaired image dehazingï¼‰å› å…¶åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹æ•°æ®éœ€æ±‚çš„çµæ´»æ€§è€Œå—åˆ°è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ã€‚åŸºäºå¯¹æ¯”å­¦ä¹ çš„ä¸»æµæ–¹æ³•ä¸ä»…å¼•å…¥äº†ä¸é›¾éœ¾æ— å…³çš„å†…å®¹ä¿¡æ¯ï¼Œè€Œä¸”å¿½ç•¥äº†é¢‘åŸŸçš„é›¾éœ¾ç‰¹æ€§ï¼ˆå³é›¾éœ¾ç›¸å…³çš„é€€åŒ–ä¸»è¦è¡¨ç°åœ¨å¹…åº¦è°±ä¸Šï¼‰ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºé¢‘åŸŸçš„æ‰©æ•£æ¨¡å‹ï¼Œç§°ä¸ºFrDiffï¼Œä»¥å……åˆ†åˆ©ç”¨éæˆå¯¹æ¸…æ™°æ•°æ®ä¸­çš„æœ‰ç›ŠçŸ¥è¯†ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå—æ‰©æ•£æ¨¡å‹å¼ºå¤§çš„ç”Ÿæˆèƒ½åŠ›çš„å¯å‘ï¼Œæˆ‘ä»¬ä»é¢‘åŸŸé‡å»ºçš„è§’åº¦æ¥è§£å†³å»é›¾ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œæ‰©æ•£æ¨¡å‹ä»¥äº§ç”Ÿä¸æ¸…æ™°å›¾åƒåˆ†å¸ƒä¸€è‡´çš„å¹…åº¦è°±ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æŒ¯å¹…æ®‹å·®ç¼–ç å™¨ï¼ˆAmplitude Residual Encoderï¼Œ AREï¼‰æ¥æå–æŒ¯å¹…æ®‹å·®ï¼Œæœ‰æ•ˆåœ°è¡¥å¿äº†æ¨¡ç³ŠåŸŸåˆ°æ¸…æ™°åŸŸçš„æŒ¯å¹…é—´éš™ï¼Œå¹¶ä¸ºdmï¼ˆdiffusion modelï¼‰çš„è®­ç»ƒæä¾›äº†ç›‘ç£ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç›¸ä½æ ¡æ­£æ¨¡å—ï¼ˆPCMï¼‰ï¼Œé€šè¿‡ä½¿ç”¨ç®€å•çš„æ³¨æ„æœºåˆ¶è¿›ä¸€æ­¥ç»†åŒ–é™¤é›¾è¿‡ç¨‹ä¸­çš„ç›¸ä½è°±æ¥æ¶ˆé™¤ä¼ªå½±ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„FrDiffåœ¨åˆæˆå’ŒçœŸå®æ•°æ®é›†ä¸Šéƒ½ä¼˜äºå…¶ä»–æœ€å…ˆè¿›çš„æ–¹æ³•ã€‚\nintroé›¾éœ¾æ˜¯ä¸€ç§ç»å¸¸å‘ç”Ÿçš„å¤§æ°”ç°è±¡ï¼Œæ˜¯ç”±ç²‰å°˜ã€çƒŸé›¾ç­‰æ°”æº¶èƒ¶ç²’å­çš„æ•£å°„æ•ˆåº”å¼•èµ·çš„ã€‚ å®ƒé€šå¸¸å¯¼è‡´åœºæ™¯è¾å°„è¡°å‡ï¼Œäº§ç”Ÿä¸¥é‡çš„è§†è§‰å†…å®¹é€€åŒ–[19]ã€‚ å›¾åƒå»é›¾å¯ä»¥ç”¨äºæé«˜åç»­é«˜çº§è§†è§‰ä»»åŠ¡çš„æ€§èƒ½[31,46]ã€‚ä¸ºäº†æ¶ˆé™¤é›¾éœ¾ï¼Œä¼ ç»Ÿæ–¹æ³•æ˜¯åŸºäºå¤§æ°”æ•£å°„æ¨¡å‹[38]æˆ–è§‚æµ‹å€¼æ‰‹åŠ¨è®¾è®¡å›¾åƒå…ˆéªŒ[3,4,18,19,68]ã€‚ ç„¶è€Œï¼Œè¿™äº›æ‰‹å·¥åˆ¶ä½œçš„å…ˆéªŒå¾ˆéš¾å‡†ç¡®åœ°æ¨¡æ‹Ÿé›¾éœ¾çš„å†…åœ¨ç‰¹å¾ï¼Œè€Œä¸”å¾€å¾€ç¼ºä¹é²æ£’æ€§å’Œå¯é æ€§ã€‚ æœ€è¿‘åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ä¸»è¦é›†ä¸­åœ¨ä½¿ç”¨åˆæˆçš„æˆå¯¹æ¨¡ç³Š-æ¸…æ™°æ•°æ®å¼€å‘ç›‘ç£æ¨¡å‹[13,34,42,42,64]ã€‚å…¶ä¸­ï¼Œäº®åº¦å¯¹æ¯”ï¼ˆå¦‚é›¾éœ¾ï¼‰è¡¨ç°åœ¨å¹…å€¼è°±ä¸Šçš„å‘ç°[39,48]æ˜¾ç¤ºäº†é€šè¿‡é¢‘åŸŸå»é™¤é›¾éœ¾çš„å·¨å¤§æ½œåŠ›[30,41,62]ï¼ˆå¦‚å›¾2(a)æ‰€ç¤ºï¼Œè¯¦ç»†çš„ç»Ÿè®¡åˆ†æè¯·å‚è§é™„å½•ï¼‰ã€‚ ç„¶è€Œï¼Œåˆæˆé›¾éœ¾ä¸çœŸå®é›¾éœ¾ä¹‹é—´å­˜åœ¨è¾ƒå¤§çš„åŸŸå·®è·ï¼Œé™åˆ¶äº†å…¶åœ¨ç°å®åœºæ™¯ä¸‹çš„æ³›åŒ–èƒ½åŠ›[60]ã€‚ æ­¤å¤–ï¼Œè·å–æˆå¯¹çš„æ¨¡ç³Šæ¸…æ™°æ•°æ®éå¸¸æ˜‚è´µä¸”è€—æ—¶ã€‚æœ€è¿‘ï¼Œæ‰©æ•£æ¨¡å‹ï¼ˆDMsï¼‰åœ¨å›¾åƒæ¢å¤æ–¹é¢è¡¨ç°å‡ºäº†ä»¤äººå°è±¡æ·±åˆ»çš„æ€§èƒ½[10,24,32,36,59,61]ï¼Œè¿™ä¿ƒä½¿æˆ‘ä»¬ç ”ç©¶å®ƒä»¬åœ¨é›¾éœ¾å»é™¤æ–¹é¢çš„æœ‰æ•ˆæ€§ã€‚\n\nå›¾2ã€‚ (a)é›¾éœ¾åœ¨é¢‘åŸŸçš„é€€åŒ–ç‰¹æ€§è¯´æ˜ã€‚ é›¾éœ¾çš„é™è§£å¯ä»¥é€šè¿‡æŒ¯å¹…è°±çš„äº¤æ¢è¿›è¡Œè½¬ç§»ã€‚ \n(b)ç±»å¯¹æ¯”å­¦ä¹ æ–¹æ³•æ„å»ºæ­£ã€è´Ÿæ ·æœ¬å¯¹ï¼Œæœ€å¤§é™åº¦åœ°æé«˜å¹²å‡€å›¾åƒå’Œæ¨¡ç³Šå›¾åƒä¹‹é—´çš„äº’ä¿¡æ¯ã€‚ \n(c)æˆ‘ä»¬çš„FrDiffåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»æœªé…å¯¹çš„æ•°æ®ä¸­å­¦ä¹ æ¸…æ™°å›¾åƒçš„æŒ¯å¹…è°±ï¼Œå¹¶åœ¨æ¨ç†è¿‡ç¨‹ä¸­é‡å»ºå®ƒä»¬ã€‚\nç„¶è€Œï¼Œå°†è¿™äº›æ¨¡å‹åº”ç”¨äºéé…å¯¹å›¾åƒå»é›¾å­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼š\n1)dmå¯¹äº®åº¦å¯¹æ¯”åº¦æ•æ„Ÿã€‚ ç›´æ¥åˆ©ç”¨DMsç”Ÿæˆæ¸…æ™°å›¾åƒçš„æ–¹æ³•[24,36]å¾€å¾€ä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„ä¼ªå½±å’Œè‰²å·®ï¼ŒåŒæ—¶ä¹Ÿä¼šäº§ç”Ÿå¤§é‡çš„è®¡ç®—æˆæœ¬[61,63]ã€‚ \n2)å…¶ä»–ä½¿ç”¨dmç”Ÿæˆæ½œåœ¨è¡¨ç¤ºçš„æ–¹æ³•[10,32,59]åªèƒ½ä»é«˜è´¨é‡çš„æˆå¯¹æ•°æ®ä¸­å­¦ä¹ ï¼Œè¿™é™åˆ¶äº†å®ƒä»¬åœ¨éæˆå¯¹è®¾ç½®ä¸­çš„åº”ç”¨ã€‚ å› æ­¤ï¼Œæ¢ç´¢åˆ©ç”¨DMsè¿›è¡Œéé…å¯¹å›¾åƒæ¢å¤çš„æœ‰æ•ˆæ–¹æ³•ä»ç„¶æ˜¯ä¸€ä¸ªé‡å¤§æŒ‘æˆ˜ã€‚\næœ¬æ–‡é’ˆå¯¹é›¾éœ¾çš„é¢‘åŸŸç‰¹å¾ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„éé…å¯¹å›¾åƒå»é›¾ï¼ˆFrDiffï¼‰æ‰©æ•£æ¨¡å‹ã€‚ FrDiffçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨DMå­¦ä¹ ä»æœªé…å¯¹çš„æ•°æ®ä¸­é‡å»ºæ¸…æ™°å›¾åƒçš„æŒ¯å¹…ï¼Œå¦‚å›¾2(c)æ‰€ç¤ºã€‚ \nå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æŒ‰ç…§å‰é¢çš„å®è·µ[10,59]å°†FrDiffçš„è®­ç»ƒè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚ \n\nåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†æŒ¯å¹…æ®‹å·®ç¼–ç å™¨ï¼ˆAmplitude Residual Encoderï¼Œ AREï¼‰ï¼Œå®ƒæå–æŒ¯å¹…æ®‹å·®æ¥è§£å†³æ¨¡ç³Šå›¾åƒå’Œæ¸…æ™°å›¾åƒä¹‹é—´æŒ¯å¹…åˆ†å¸ƒçš„å·®è·ï¼Œè€Œä¸ä¼šå¹²æ‰°ä¸é›¾æ— å…³çš„ç‰¹å¾ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨é™¤é›¾ç½‘ç»œä¸­åŠ å…¥ç›¸ä½æ ¡æ­£æ¨¡å—ï¼ˆPCMï¼‰ä»¥è¿›ä¸€æ­¥å¢å¼ºç›¸ä½è°±ã€‚ æˆ‘ä»¬å¯¹é™¤é›¾ç½‘ç»œè¿›è¡Œäº†ä¼˜åŒ–ï¼Œä»¥æœ‰æ•ˆåœ°åˆ©ç”¨æŒ¯å¹…æ®‹å·®è¿›è¡Œé™¤é›¾ã€‚ \nåœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ä»AREè·å¾—çš„å¹…åº¦æ®‹å·®ä½œä¸ºåœ°é¢çœŸå€¼ï¼Œå¹¶è®­ç»ƒDMä»é«˜æ–¯å™ªå£°ä¸­é‡å»ºè¿™äº›æ®‹å·®ä»¥å»é™¤é›¾éœ¾ã€‚ åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼ŒDMä»¥é«˜æ–¯å™ªå£°ä¸ºè¾“å…¥ï¼Œä»¥æ¨¡ç³Šå›¾åƒçš„å¹…å€¼è°±ä¸ºæ¡ä»¶é‡æ„å¹…å€¼æ®‹å·®ã€‚ ä¸é‡å»ºåŒ…å«å…‰ç…§å’Œçº¹ç†ç»“æ„çš„å›¾åƒç›¸æ¯”ï¼Œé‡å»ºåªåŒ…å«å…‰ç…§ä¿¡æ¯çš„å¹…å€¼æ®‹å·®æ‰€éœ€çš„è¿­ä»£æ¬¡æ•°æ›´å°‘[39,48]ã€‚\næˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºé¢‘åŸŸçš„éé…å¯¹å›¾åƒå»é›¾ï¼ˆFrDiffï¼‰æ‰©æ•£æ¨¡å‹ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå°†DMé›†æˆåˆ°éé…å¯¹æ¢å¤ä»»åŠ¡ä¸­çš„ç ”ç©¶ã€‚\n\nFrDiffé€šè¿‡å­¦ä¹ éé…å¯¹æ•°æ®çš„æŒ¯å¹…é‡å»ºæ¥å¢å¼ºé›¾éœ¾å»é™¤èƒ½åŠ›ï¼Œä¸ºå…¶ä»–éé…å¯¹æ¢å¤ä»»åŠ¡æä¾›äº†çµæ„Ÿã€‚\n\n\næˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæŒ¯å¹…æ®‹å·®ç¼–ç å™¨ï¼ˆAREï¼‰ï¼Œå®ƒäº§ç”ŸæŒ¯å¹…æ®‹å·®ï¼Œä»¥å¼¥åˆæ¨¡ç³Šå’Œæ¸…æ™°åŸŸä¹‹é—´çš„å·®è·ï¼Œè€Œä¸æ·»åŠ é¢å¤–çš„å‚æ•°ï¼Œä¸ºDMè®­ç»ƒæä¾›ç›‘ç£ã€‚\næˆ‘ä»¬æå‡ºäº†ä¸€ç§ç›¸ä½æ ¡æ­£æ¨¡å—ï¼ˆPCMï¼‰ï¼Œæ—¨åœ¨é€šè¿‡ä½¿ç”¨æ³¨æ„æœºåˆ¶æ”¹è¿›ç›¸ä½è°±æ¥æ¶ˆé™¤ä¸éœ€è¦çš„ä¼ªåƒã€‚\nå¤§é‡å®éªŒè¡¨æ˜ï¼ŒFrDiffä»¥æ›´å°‘çš„å‚æ•°å’ŒFLOPsä¼˜äºç°æœ‰çš„SOTAæ–¹æ³•ã€‚\n\n\n\nç©ºé—´åŸŸvsé¢‘åŸŸ\n\nç©ºé—´åŸŸï¼šå¹³æ—¶å¯è§çš„å›¾åƒï¼Œç”±åƒç´ å€¼çŸ©é˜µè¡¨ç¤ºï¼Œæ¯ä¸ªåƒç´ å€¼ç›´æ¥è¡¨ç¤ºäº®åº¦å’Œé¢œè‰²\né¢‘åŸŸï¼šå°†å›¾åƒä»åƒç´ è¡¨ç¤ºè½¬æ¢æˆé¢‘åŸŸè¡¨ç¤ºã€‚é¢‘ç‡è¡¨ç¤ºå›¾åƒä¸­äº®åº¦å˜åŒ–çš„å¿«æ…¢\n\nä½é¢‘ï¼šäº®åº¦å˜åŒ–æ…¢ï¼Œåæ˜ å¤§å—åŒºåŸŸã€æ•´ä½“ç»“æ„ã€å¹³æ»‘è‰²å½©\né«˜é¢‘ï¼šäº®åº¦å˜åŒ–å¿«ï¼Œåæ˜ çº¹ç†ã€è¾¹ç¼˜ã€ç»†èŠ‚\n\n\nåƒç´ è¡¨ç¤ºè½¬æ¢æˆé¢‘åŸŸè¡¨ç¤ºï¼šä¸€èˆ¬ç”±äºŒç»´å‚…ç«‹å¶å˜æ¢2D-FFTå˜æ¢å®ç°\n\nç”±æŒ¯å¹…ï¼ˆå¹…åº¦è°±ï¼‰å’Œç›¸ä½ç»„æˆ\n\nå›¾åƒå»é›¾ä»»åŠ¡\n\né›¾éœ¾ä¸»è¦é™ä½äº†é«˜é¢‘èƒ½é‡ï¼šå›¾åƒè¾¹ç¼˜ã€ç»†èŠ‚æ¨¡ç³Šã€‚ä½†ç›¸ä½å˜åŒ–å°ï¼ˆå›¾åƒç»“æ„ä½ç½®åŸºæœ¬æ²¡å˜ï¼‰ \nâ€‹    &#x3D;&#x3D;&gt; æœ‰å¤§é‡â€œçœŸå®å›¾åƒâ€çš„ç›¸è¿‘ä¿¡æ¯\nä»é¢‘åŸŸé‡å»ºï¼šåˆ†æå¹…åº¦è°±ï¼Œè°ƒæ•´é«˜ä½é¢‘åˆ†å¸ƒï¼Œå¢å¼ºæ¨¡ç³Šçš„é«˜é¢‘ã€‚ç„¶åå°†ä¿®æ”¹åçš„é¢‘åŸŸFFTå˜å›ç©ºé—´åŸŸï¼Œå¾—åˆ°æ›´æ¸…æ™°çš„å›¾åƒã€‚\n\nåˆ†åˆ«è¾“å…¥å®éƒ¨å’Œè™šéƒ¨ï¼ˆå¹…åº¦è°±å’Œç›¸ä½ä¿¡æ¯ï¼‰\n\nå›¾åƒå®è™šéƒ¨ &#x3D;&#x3D;&gt; å­¦ä¹ å’Œgtä¹‹é—´çš„æ®‹å·®                   è¶…åˆ†ä»»åŠ¡\nç‰©ç†æ„ä¹‰ä¸Šçš„ç”µåœºå®éƒ¨è™šéƒ¨ &#x3D;&#x3D;&gt; losså‡½æ•°çº¦æŸ\n\næ ¹æ®ç¨€ç–è§‚æµ‹è®¡ç®—\næ ¹æ®å‘å°„æœºä½ç½®è®¡ç®— Physics-Informed Neural Networks for Path Loss Estimation by Solving Electromagnetic Integral Equations\n\nä½œä¸ºä¸åŒï¼ˆ4ä¸ªï¼‰channelè¾“å…¥\n\n","categories":["papers","work2"],"tags":["diffusion","cv","frequency"]}]